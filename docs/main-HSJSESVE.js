import{$ as Q,$a as Gt,$b as Ui,A as qu,Aa as Yu,Ab as a_,B as Fg,Ba as En,Bb as st,C as Wu,Ca as Xg,Cb as ho,D as Ug,Da as lo,Db as c_,E as ki,Ea as E,Eb as dc,F as Ur,Fa as k,Fb as fc,G as oo,Ga as Ju,Gb as l_,H as Hu,Ha as Zg,Hb as Zu,I as Mi,Ia as e_,Ib as eh,J as Bg,Ja as uc,Jb as u_,K as ac,Ka as Ut,Kb as on,L as Li,La as t_,Lb as h_,M as zu,Ma as xe,Mb as d_,N as jg,Na as n_,Nb as Ee,O as $g,Oa as Vi,Ob as bn,P as qg,Pa as be,Pb as fo,Q as Cn,Qa as xt,Qb as Fi,R as Wg,Ra as i_,Rb as $r,S as it,Sa as r_,Sb as f_,T as Ve,Ta as B,Tb as p_,U as ao,Ua as H,Ub as Ue,V as X,Va as R,Vb as th,W as Xe,Wa as Bt,Wb as pc,X as Hg,Xa as se,Xb as m_,Y as Ce,Ya as y,Yb as li,Z as Gu,Za as _,Zb as Fn,_ as re,_a as O,_b as de,a as q,aa as Fe,ab as Kt,ac as Bi,b as Re,ba as co,bb as Tn,bc as g_,ca as F,cb as Se,cc as Un,d as Oi,da as Ze,db as z,dc as __,e as C,ea as je,eb as L,ec as Qt,f as Ng,fa as Pt,fb as ci,fc as nh,g as io,ga as zg,gb as Vn,gc as y_,h as ro,ha as cc,hb as sn,i as Vu,ia as oi,ib as Br,j as Fu,ja as ai,jb as wt,jc as po,k as Vt,ka as Z,kb as It,kc as qr,l as Ft,la as ee,lb as rt,m as kg,ma as Pe,mb as M,mc as ar,n as Mg,na as lc,nb as pe,nc as mo,o as Ni,oa as De,ob as uo,oc as cr,p as Uu,pa as Gg,pb as Ge,pc as v_,q as Bu,qa as zt,qb as Ke,qc as w_,r as ju,ra as Ku,rb as Qe,s as Rt,sa as vt,sb as He,t as Y,ta as Kg,tb as j,u as so,ua as $e,ub as Xu,v as Lg,va as Qg,vb as ut,w as Vg,wa as Qu,wb as jr,x as ce,xa as Yg,xb as hc,y as $u,ya as Dt,yb as s_,z as rn,za as Jg,zb as o_}from"./chunk-BBLCPNZC.js";var sh=class extends p_{constructor(){super(...arguments),this.supportsDOMEvents=!0}},oh=class n extends sh{static makeCurrent(){f_(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=TE();return t==null?null:bE(t)}resetBaseElement(){go=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return m_(document.cookie,e)}},go=null;function TE(){return go=go||document.querySelector("base"),go?go.getAttribute("href"):null}function bE(n){return new URL(n,document.baseURI).pathname}var SE=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),mc=new Ce(""),E_=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new Ve(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(re(mc),re(xe))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),_o=class{constructor(e){this._doc=e}},ih="ng-app-id",T_=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=nh(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${ih}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(ih),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(ih,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(re(Ue),re(Qu),re(Yu,8),re(Dt))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),rh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ch=/%COMP%/g,b_="%COMP%",AE=`_nghost-${b_}`,RE=`_ngcontent-${b_}`,PE=!0,DE=new Ce("",{providedIn:"root",factory:()=>PE});function xE(n){return RE.replace(ch,n)}function OE(n){return AE.replace(ch,n)}function S_(n,e){return e.map(t=>t.replace(ch,n))}var gc=(()=>{let e=class e{constructor(i,r,s,o,c,u,h,p=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=u,this.ngZone=h,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=nh(u),this.defaultRenderer=new yo(i,c,h,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===co.ShadowDom&&(r=Re(q({},r),{encapsulation:co.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof _c?s.applyToHost(i):s instanceof vo&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let c=this.doc,u=this.ngZone,h=this.eventManager,p=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case co.Emulated:o=new _c(h,p,r,this.appId,m,c,u,g);break;case co.ShadowDom:return new ah(h,p,i,r,c,u,this.nonce,g);default:o=new vo(h,p,r,m,c,u,g);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(re(E_),re(T_),re(Qu),re(DE),re(Ue),re(Dt),re(xe),re(Yu))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),yo=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(rh[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(I_(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(I_(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Ve(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=rh[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=rh[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(lo.DashCase|lo.Important)?e.style.setProperty(t,i,r&lo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&lo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=$r().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function I_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ah=class extends yo{constructor(e,t,i,r,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=S_(r.id,r.styles);for(let p of h){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=p,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},vo=class extends yo{constructor(e,t,i,r,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=u?S_(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},_c=class extends vo{constructor(e,t,i,r,s,o,c,u){let h=r+"-"+i.id;super(e,t,i,s,o,c,u,h),this.contentAttr=xE(h),this.hostAttr=OE(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},NE=(()=>{let e=class e extends _o{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(re(Ue))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),kE=(()=>{let e=class e extends _o{constructor(i){super(i),this.delegate=Q(d_,{optional:!0})}supports(i){return this.delegate?this.delegate.supports(i):!1}addEventListener(i,r,s){return this.delegate.addEventListener(i,r,s)}removeEventListener(i,r,s){return this.delegate.removeEventListener(i,r,s)}};e.\u0275fac=function(r){return new(r||e)(re(Ue))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),C_=["alt","control","meta","shift"],ME={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LE={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},VE=(()=>{let e=class e extends _o{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),c=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$r().onAndCancel(i,o.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),c="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),c="code."),C_.forEach(p=>{let m=r.indexOf(p);m>-1&&(r.splice(m,1),c+=p+".")}),c+=o,r.length!=0||o.length===0)return null;let h={};return h.domEventName=s,h.fullKey=c,h}static matchEventFullKeyCode(i,r){let s=ME[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),C_.forEach(c=>{if(c!==s){let u=LE[c];u(i)&&(o+=c+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(re(Ue))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})();function A_(n,e){return h_(q({rootComponent:n},FE(e)))}function FE(n){return{appProviders:[...qE,...n?.providers??[]],platformProviders:$E}}function UE(){oh.makeCurrent()}function BE(){return new Ku}function jE(){return Qg(document),document}var $E=[{provide:Dt,useValue:__},{provide:Yg,useValue:UE,multi:!0},{provide:Ue,useFactory:jE,deps:[]}];var qE=[{provide:zg,useValue:"root"},{provide:Ku,useFactory:BE,deps:[]},{provide:mc,useClass:NE,multi:!0,deps:[Ue,xe,Dt]},{provide:mc,useClass:VE,multi:!0,deps:[Ue]},{provide:mc,useClass:kE,multi:!0},gc,T_,E_,{provide:uc,useExisting:gc},{provide:y_,useClass:SE,deps:[]},[]];var R_=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(re(Ue))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var te="primary",Mo=Symbol("RouteTitle"),fh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Qr(n){return new fh(n)}function HE(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function zE(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Bn(n[t],e[t]))return!1;return!0}function Bn(n,e){let t=n?ph(n):void 0,i=e?ph(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!L_(n[r],e[r]))return!1;return!0}function ph(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function L_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function V_(n){return n.length>0?n[n.length-1]:null}function ji(n){return Lg(n)?n:fc(n)?Rt(Promise.resolve(n)):Y(n)}var GE={exact:U_,subset:B_},F_={exact:KE,subset:QE,ignored:()=>!0};function P_(n,e,t){return GE[t.paths](n.root,e.root,t.matrixParams)&&F_[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function KE(n,e){return Bn(n,e)}function U_(n,e,t){if(!ur(n.segments,e.segments)||!wc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!U_(n.children[i],e.children[i],t))return!1;return!0}function QE(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>L_(n[t],e[t]))}function B_(n,e,t){return j_(n,e,e.segments,t)}function j_(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!ur(r,t)||e.hasChildren()||!wc(r,t,i))}else if(n.segments.length===t.length){if(!ur(n.segments,t)||!wc(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!B_(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ur(n.segments,r)||!wc(n.segments,r,i)||!n.children[te]?!1:j_(n.children[te],e,s,i)}}function wc(n,e,t){return e.every((i,r)=>F_[t](n[r].parameters,i.parameters))}var hi=class{constructor(e=new me([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Qr(this.queryParams),this._queryParamMap}toString(){return XE.serialize(this)}},me=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ic(this)}},lr=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Qr(this.parameters),this._parameterMap}toString(){return q_(this)}};function YE(n,e){return ur(n,e)&&n.every((t,i)=>Bn(t.parameters,e[i].parameters))}function ur(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function JE(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===te&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==te&&(t=t.concat(e(r,i)))}),t}var Bh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>new So,providedIn:"root"});let n=e;return n})(),So=class{parse(e){let t=new gh(e);return new hi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${wo(e.root,!0)}`,i=tT(e.queryParams),r=typeof e.fragment=="string"?`#${ZE(e.fragment)}`:"";return`${t}${i}${r}`}},XE=new So;function Ic(n){return n.segments.map(e=>q_(e)).join("/")}function wo(n,e){if(!n.hasChildren())return Ic(n);if(e){let t=n.children[te]?wo(n.children[te],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==te&&i.push(`${r}:${wo(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=JE(n,(i,r)=>r===te?[wo(n.children[te],!1)]:[`${r}:${wo(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[te]!=null?`${Ic(n)}/${t[0]}`:`${Ic(n)}/(${t.join("//")})`}}function $_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yc(n){return $_(n).replace(/%3B/gi,";")}function ZE(n){return encodeURI(n)}function mh(n){return $_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cc(n){return decodeURIComponent(n)}function D_(n){return Cc(n.replace(/\+/g,"%20"))}function q_(n){return`${mh(n.path)}${eT(n.parameters)}`}function eT(n){return Object.entries(n).map(([e,t])=>`;${mh(e)}=${mh(t)}`).join("")}function tT(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${yc(t)}=${yc(r)}`).join("&"):`${yc(t)}=${yc(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var nT=/^[^\/()?;#]+/;function lh(n){let e=n.match(nT);return e?e[0]:""}var iT=/^[^\/()?;=#]+/;function rT(n){let e=n.match(iT);return e?e[0]:""}var sT=/^[^=?&#]+/;function oT(n){let e=n.match(sT);return e?e[0]:""}var aT=/^[^&#]+/;function cT(n){let e=n.match(aT);return e?e[0]:""}var gh=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[te]=new me(e,t)),i}parseSegment(){let e=lh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ve(4009,!1);return this.capture(e),new lr(Cc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=rT(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=lh(this.remaining);r&&(i=r,this.capture(i))}e[Cc(t)]=Cc(i)}parseQueryParam(e){let t=oT(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=cT(this.remaining);o&&(i=o,this.capture(i))}let r=D_(t),s=D_(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=lh(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ve(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=te);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[te]:new me([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ve(4011,!1)}};function W_(n){return n.segments.length>0?new me([],{[te]:n}):n}function H_(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=H_(r);if(i===te&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new me(n.segments,e);return lT(t)}function lT(n){if(n.numberOfChildren===1&&n.children[te]){let e=n.children[te];return new me(n.segments.concat(e.segments),e.children)}return n}function hr(n){return n instanceof hi}function uT(n,e,t=null,i=null){let r=z_(n);return G_(r,e,t,i)}function z_(n){let e;function t(s){let o={};for(let u of s.children){let h=t(u);o[u.outlet]=h}let c=new me(s.url,o);return s===n&&(e=c),c}let i=t(n.root),r=W_(i);return e??r}function G_(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return uh(r,r,r,t,i);let s=hT(e);if(s.toRoot())return uh(r,r,new me([],{}),t,i);let o=dT(s,r,n),c=o.processChildren?Eo(o.segmentGroup,o.index,s.commands):Q_(o.segmentGroup,o.index,s.commands);return uh(r,o.segmentGroup,c,t,i)}function Ec(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ao(n){return typeof n=="object"&&n!=null&&n.outlets}function uh(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([u,h])=>{s[u]=Array.isArray(h)?h.map(p=>`${p}`):`${h}`});let o;n===e?o=t:o=K_(n,e,t);let c=W_(H_(o));return new hi(c,s,r)}function K_(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=K_(s,e,t)}),new me(n.segments,i)}var Tc=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Ec(i[0]))throw new Ve(4003,!1);let r=i.find(Ao);if(r&&r!==V_(i))throw new Ve(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function hT(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Tc(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,h])=>{c[u]=typeof h=="string"?h.split("/"):h}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Tc(t,e,i)}var zr=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function dT(n,e,t){if(n.isAbsolute)return new zr(e,!0,0);if(!t)return new zr(e,!1,NaN);if(t.parent===null)return new zr(t,!0,0);let i=Ec(n.commands[0])?0:1,r=t.segments.length-1+i;return fT(t,r,n.numberOfDoubleDots)}function fT(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Ve(4005,!1);r=i.segments.length}return new zr(i,!1,r-s)}function pT(n){return Ao(n[0])?n[0].outlets:{[te]:n}}function Q_(n,e,t){if(n??=new me([],{}),n.segments.length===0&&n.hasChildren())return Eo(n,e,t);let i=mT(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new me(n.segments.slice(0,i.pathIndex),{});return s.children[te]=new me(n.segments.slice(i.pathIndex),n.children),Eo(s,0,r)}else return i.match&&r.length===0?new me(n.segments,{}):i.match&&!n.hasChildren()?_h(n,e,t):i.match?Eo(n,0,r):_h(n,e,t)}function Eo(n,e,t){if(t.length===0)return new me(n.segments,{});{let i=pT(t),r={};if(Object.keys(i).some(s=>s!==te)&&n.children[te]&&n.numberOfChildren===1&&n.children[te].segments.length===0){let s=Eo(n.children[te],e,t);return new me(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Q_(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new me(n.segments,r)}}function mT(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],c=t[i];if(Ao(c))break;let u=`${c}`,h=i<t.length-1?t[i+1]:null;if(r>0&&u===void 0)break;if(u&&h&&typeof h=="object"&&h.outlets===void 0){if(!O_(u,h,o))return s;i+=2}else{if(!O_(u,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function _h(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(Ao(s)){let u=gT(s.outlets);return new me(i,u)}if(r===0&&Ec(t[0])){let u=n.segments[e];i.push(new lr(u.path,x_(t[0]))),r++;continue}let o=Ao(s)?s.outlets[te]:`${s}`,c=r<t.length-1?t[r+1]:null;o&&c&&Ec(c)?(i.push(new lr(o,x_(c))),r+=2):(i.push(new lr(o,{})),r++)}return new me(i,{})}function gT(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=_h(new me([],{}),0,i))}),e}function x_(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function O_(n,e,t){return n==t.path&&Bn(e,t.parameters)}var To="imperative",ht=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ht||{}),an=class{constructor(e,t){this.id=e,this.url=t}},Ro=class extends an{constructor(e,t,i="imperative",r=null){super(e,t),this.type=ht.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},An=class extends an{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=ht.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Jt||{}),yh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(yh||{}),ui=class extends an{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=ht.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},dr=class extends an{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=ht.NavigationSkipped}},Po=class extends an{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=ht.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bc=class extends an{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ht.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vh=class extends an{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ht.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wh=class extends an{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=ht.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ih=class extends an{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ht.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ch=class extends an{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ht.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Eh=class{constructor(e){this.route=e,this.type=ht.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Th=class{constructor(e){this.route=e,this.type=ht.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},bh=class{constructor(e){this.snapshot=e,this.type=ht.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sh=class{constructor(e){this.snapshot=e,this.type=ht.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ah=class{constructor(e){this.snapshot=e,this.type=ht.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rh=class{constructor(e){this.snapshot=e,this.type=ht.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Do=class{},Yr=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function _T(n,e){return n.providers&&!n._injector&&(n._injector=r_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Sn(n){return n.outlet||te}function yT(n,e){let t=n.filter(i=>Sn(i)===e);return t.push(...n.filter(i=>Sn(i)!==e)),t}function Lo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ph=class{get injector(){return Lo(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new kc(this.rootInjector),this.attachRef=null}},kc=(()=>{let e=class e{constructor(i){this.rootInjector=i,this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Ph(this.rootInjector),this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)(re(cc))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Sc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Dh(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Dh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=xh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return xh(e,this._root).map(t=>t.value)}};function Dh(n,e){if(n===e.value)return e;for(let t of e.children){let i=Dh(n,t);if(i)return i}return null}function xh(n,e){if(n===e.value)return[e];for(let t of e.children){let i=xh(n,t);if(i.length)return i.unshift(e),i}return[]}var Yt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Hr(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ac=class extends Sc{constructor(e,t){super(e),this.snapshot=t,jh(this,e)}toString(){return this.snapshot.toString()}};function Y_(n){let e=vT(n),t=new Ft([new lr("",{})]),i=new Ft({}),r=new Ft({}),s=new Ft({}),o=new Ft(""),c=new Rn(t,i,s,o,r,te,n,e.root);return c.snapshot=e.root,new Ac(new Yt(c,[]),e)}function vT(n){let e={},t={},i={},r="",s=new Gr([],e,i,r,t,te,n,null,{});return new Pc("",new Yt(s,[]))}var Rn=class{constructor(e,t,i,r,s,o,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ce(h=>h[Mo]))??Y(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(e=>Qr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(e=>Qr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Rc(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:q(q({},e.params),n.params),data:q(q({},e.data),n.data),resolve:q(q(q(q({},n.data),e.data),r?.data),n._resolvedData)}:i={params:q({},n.params),data:q({},n.data),resolve:q(q({},n.data),n._resolvedData??{})},r&&X_(r)&&(i.resolve[Mo]=r.title),i}var Gr=class{get title(){return this.data?.[Mo]}constructor(e,t,i,r,s,o,c,u,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Pc=class extends Sc{constructor(e,t){super(t),this.url=e,jh(this,t)}toString(){return J_(this._root)}};function jh(n,e){e.value._routerState=n,e.children.forEach(t=>jh(n,t))}function J_(n){let e=n.children.length>0?` { ${n.children.map(J_).join(", ")} } `:"";return`${n.value}${e}`}function hh(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Bn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Bn(e.params,t.params)||n.paramsSubject.next(t.params),zE(e.url,t.url)||n.urlSubject.next(t.url),Bn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Oh(n,e){let t=Bn(n.params,e.params)&&YE(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Oh(n.parent,e.parent))}function X_(n){return typeof n.title=="string"||n.title===null}var $h=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new $e,this.deactivateEvents=new $e,this.attachEvents=new $e,this.detachEvents=new $e,this.parentContexts=Q(kc),this.location=Q(n_),this.changeDetector=Q(on),this.inputBinder=Q(qh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ve(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ve(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ve(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Ve(4013,!1);this._activatedRoute=i;let s=this.location,c=i.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,h=new Nh(i,u,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:h,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=je({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ai]});let n=e;return n})(),Nh=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Rn?this.route:e===kc?this.childContexts:this.parent.get(e,t)}},qh=new Ce("");function wT(n,e,t){let i=xo(n,e._root,t?t._root:void 0);return new Ac(i,e)}function xo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=IT(n,e,t);return new Yt(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>xo(n,c)),o}}let i=CT(e.value),r=e.children.map(s=>xo(n,s));return new Yt(i,r)}}function IT(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return xo(n,i,r);return xo(n,i)})}function CT(n){return new Rn(new Ft(n.url),new Ft(n.params),new Ft(n.queryParams),new Ft(n.fragment),new Ft(n.data),n.outlet,n.component,n)}var Oo=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Z_="ngNavigationCancelingError";function Dc(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=hr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=ey(!1,Jt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function ey(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Z_]=!0,t.cancellationCode=e,t}function ET(n){return ty(n)&&hr(n.url)}function ty(n){return!!n&&n[Z_]}var TT=(n,e,t,i)=>ce(r=>(new kh(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),kh=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),hh(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Hr(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Hr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Hr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Hr(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Rh(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Sh(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(hh(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),hh(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},xc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Kr=class{constructor(e,t){this.component=e,this.route=t}};function bT(n,e,t){let i=n._root,r=e?e._root:null;return Io(i,r,t,[i.value])}function ST(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Xr(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Hg(n)?n:e.get(n):i}function Io(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Hr(e);return n.children.forEach(o=>{AT(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>bo(c,t.getContext(o),r)),r}function AT(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=RT(o,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new xc(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Io(n,e,c?c.children:null,i,r):Io(n,e,t,i,r),u&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Kr(c.outlet.component,o))}else o&&bo(e,c,r),r.canActivateChecks.push(new xc(i)),s.component?Io(n,null,c?c.children:null,i,r):Io(n,null,t,i,r);return r}function RT(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ur(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ur(n.url,e.url)||!Bn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oh(n,e)||!Bn(n.queryParams,e.queryParams);case"paramsChange":default:return!Oh(n,e)}}function bo(n,e,t){let i=Hr(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?bo(o,e.children.getContext(s),t):bo(o,null,t):bo(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Kr(e.outlet.component,r)):t.canDeactivateChecks.push(new Kr(null,r)):t.canDeactivateChecks.push(new Kr(null,r))}function Vo(n){return typeof n=="function"}function PT(n){return typeof n=="boolean"}function DT(n){return n&&Vo(n.canLoad)}function xT(n){return n&&Vo(n.canActivate)}function OT(n){return n&&Vo(n.canActivateChild)}function NT(n){return n&&Vo(n.canDeactivate)}function kT(n){return n&&Vo(n.canMatch)}function ny(n){return n instanceof Vg||n?.name==="EmptyError"}var vc=Symbol("INITIAL_VALUE");function Jr(){return Cn(n=>$u(n.map(e=>e.pipe(Mi(1),qg(vc)))).pipe(ce(e=>{for(let t of e)if(t!==!0){if(t===vc)return vc;if(t===!1||MT(t))return t}return!0}),ki(e=>e!==vc),Mi(1)))}function MT(n){return hr(n)||n instanceof Oo}function LT(n,e){return rn(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Y(Re(q({},t),{guardsResult:!0})):VT(o,i,r,n).pipe(rn(c=>c&&PT(c)?FT(i,s,n,e):Y(c)),ce(c=>Re(q({},t),{guardsResult:c})))})}function VT(n,e,t,i){return Rt(n).pipe(rn(r=>qT(r.component,r.route,t,e,i)),Li(r=>r!==!0,!0))}function FT(n,e,t,i){return Rt(e).pipe(oo(r=>Fg(BT(r.route.parent,i),UT(r.route,i),$T(n,r.path,t),jT(n,r.route,t))),Li(r=>r!==!0,!0))}function UT(n,e){return n!==null&&e&&e(new Ah(n)),Y(!0)}function BT(n,e){return n!==null&&e&&e(new bh(n)),Y(!0)}function jT(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Y(!0);let r=i.map(s=>Wu(()=>{let o=Lo(e)??t,c=Xr(s,o),u=xT(c)?c.canActivate(e,n):oi(o,()=>c(e,n));return ji(u).pipe(Li())}));return Y(r).pipe(Jr())}function $T(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>ST(o)).filter(o=>o!==null).map(o=>Wu(()=>{let c=o.guards.map(u=>{let h=Lo(o.node)??t,p=Xr(u,h),m=OT(p)?p.canActivateChild(i,n):oi(h,()=>p(i,n));return ji(m).pipe(Li())});return Y(c).pipe(Jr())}));return Y(s).pipe(Jr())}function qT(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Y(!0);let o=s.map(c=>{let u=Lo(e)??r,h=Xr(c,u),p=NT(h)?h.canDeactivate(n,e,t,i):oi(u,()=>h(n,e,t,i));return ji(p).pipe(Li())});return Y(o).pipe(Jr())}function WT(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Y(!0);let s=r.map(o=>{let c=Xr(o,n),u=DT(c)?c.canLoad(e,t):oi(n,()=>c(e,t));return ji(u)});return Y(s).pipe(Jr(),iy(i))}function iy(n){return io(it(e=>{if(typeof e!="boolean")throw Dc(n,e)}),ce(e=>e===!0))}function HT(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Y(!0);let s=r.map(o=>{let c=Xr(o,n),u=kT(c)?c.canMatch(e,t):oi(n,()=>c(e,t));return ji(u)});return Y(s).pipe(Jr(),iy(i))}var No=class{constructor(e){this.segmentGroup=e||null}},ko=class extends Error{constructor(e){super(),this.urlTree=e}};function Wr(n){return so(new No(n))}function zT(n){return so(new Ve(4e3,!1))}function GT(n){return so(ey(!1,Jt.GuardRejected))}var Mh=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Y(i);if(r.numberOfChildren>1||!r.children[te])return zT(`${e.redirectTo}`);r=r.children[te]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let c=t,{queryParams:u,fragment:h,routeConfig:p,url:m,outlet:g,params:x,data:N,title:$}=r,W=oi(s,()=>c({params:x,data:N,queryParams:u,fragment:h,routeConfig:p,url:m,outlet:g,title:$}));if(W instanceof hi)throw new ko(W);t=W}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new ko(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new hi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);i[r]=t[c]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,i,r)}),new me(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Ve(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},Lh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KT(n,e,t,i,r){let s=Wh(n,e,t);return s.matched?(i=_T(e,i),HT(i,e,t,r).pipe(ce(o=>o===!0?s:q({},Lh)))):Y(s)}function Wh(n,e,t){if(e.path==="**")return QT(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?q({},Lh):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||HE)(t,n,e);if(!r)return q({},Lh);let s={};Object.entries(r.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=r.consumed.length>0?q(q({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function QT(n){return{matched:!0,parameters:n.length>0?V_(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function N_(n,e,t,i){return t.length>0&&XT(n,t,i)?{segmentGroup:new me(e,JT(i,new me(t,n.children))),slicedSegments:[]}:t.length===0&&ZT(n,t,i)?{segmentGroup:new me(n.segments,YT(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new me(n.segments,n.children),slicedSegments:t}}function YT(n,e,t,i){let r={};for(let s of t)if(Mc(n,e,s)&&!i[Sn(s)]){let o=new me([],{});r[Sn(s)]=o}return q(q({},i),r)}function JT(n,e){let t={};t[te]=e;for(let i of n)if(i.path===""&&Sn(i)!==te){let r=new me([],{});t[Sn(i)]=r}return t}function XT(n,e,t){return t.some(i=>Mc(n,e,i)&&Sn(i)!==te)}function ZT(n,e,t){return t.some(i=>Mc(n,e,i))}function Mc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function eb(n,e,t,i){return Sn(n)!==i&&(i===te||!Mc(e,t,n))?!1:Wh(e,n,t).matched}function tb(n,e,t){return e.length===0&&!n.children[t]}var Vh=class{};function nb(n,e,t,i,r,s,o="emptyOnly"){return new Fh(n,e,t,i,r,o,s).recognize()}var ib=31,Fh=class{constructor(e,t,i,r,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Mh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Ve(4002,`'${e.segmentGroup}'`)}recognize(){let e=N_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ce(({children:t,rootSnapshot:i})=>{let r=new Yt(i,t),s=new Pc("",r),o=uT(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Gr([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,te,t).pipe(ce(i=>({children:i,rootSnapshot:t})),Ur(i=>{if(i instanceof ko)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof No?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(ce(o=>o instanceof Yt?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return Rt(s).pipe(oo(o=>{let c=i.children[o],u=yT(t,o);return this.processSegmentGroup(e,u,c,o,r)}),$g((o,c)=>(o.push(...c),o)),Hu(null),jg(),rn(o=>{if(o===null)return Wr(i);let c=ry(o);return rb(c),Y(c)}))}processSegment(e,t,i,r,s,o,c){return Rt(t).pipe(oo(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,i,r,s,o,c).pipe(Ur(h=>{if(h instanceof No)return Y(null);throw h}))),Li(u=>!!u),Ur(u=>{if(ny(u))return tb(i,r,s)?Y(new Vh):Wr(i);throw u}))}processSegmentAgainstRoute(e,t,i,r,s,o,c,u){return eb(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,u):Wr(r):Wr(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,c){let{matched:u,parameters:h,consumedSegments:p,positionalParamSegments:m,remainingSegments:g}=Wh(t,r,s);if(!u)return Wr(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ib&&(this.allowRedirects=!1));let x=new Gr(s,h,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,k_(r),Sn(r),r.component??r._loadedComponent??null,r,M_(r)),N=Rc(x,c,this.paramsInheritanceStrategy);x.params=Object.freeze(N.params),x.data=Object.freeze(N.data);let $=this.applyRedirects.applyRedirectCommands(p,r.redirectTo,m,x,e);return this.applyRedirects.lineralizeSegments(r,$).pipe(rn(W=>this.processSegment(e,i,t,W.concat(g),o,!1,c)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let c=KT(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),c.pipe(Cn(u=>u.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Cn(({routes:h})=>{let p=i._loadedInjector??e,{parameters:m,consumedSegments:g,remainingSegments:x}=u,N=new Gr(g,m,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,k_(i),Sn(i),i.component??i._loadedComponent??null,i,M_(i)),$=Rc(N,o,this.paramsInheritanceStrategy);N.params=Object.freeze($.params),N.data=Object.freeze($.data);let{segmentGroup:W,slicedSegments:we}=N_(t,g,x,h);if(we.length===0&&W.hasChildren())return this.processChildren(p,h,W,N).pipe(ce(ue=>new Yt(N,ue)));if(h.length===0&&we.length===0)return Y(new Yt(N,[]));let Ie=Sn(i)===s;return this.processSegment(p,h,W,we,Ie?te:s,!0,N).pipe(ce(ue=>new Yt(N,ue instanceof Yt?[ue]:[])))}))):Wr(t)))}getChildConfig(e,t,i){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):WT(e,t,i,this.urlSerializer).pipe(rn(r=>r?this.configLoader.loadChildren(e,t).pipe(it(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):GT(t))):Y({routes:[],injector:e})}};function rb(n){n.sort((e,t)=>e.value.outlet===te?-1:t.value.outlet===te?1:e.value.outlet.localeCompare(t.value.outlet))}function sb(n){let e=n.value.routeConfig;return e&&e.path===""}function ry(n){let e=[],t=new Set;for(let i of n){if(!sb(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=ry(i.children);e.push(new Yt(i.value,r))}return e.filter(i=>!t.has(i))}function k_(n){return n.data||{}}function M_(n){return n.resolve||{}}function ob(n,e,t,i,r,s){return rn(o=>nb(n,e,t,i,o.extractedUrl,r,s).pipe(ce(({state:c,tree:u})=>Re(q({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function ab(n,e){return rn(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Y(t);let s=new Set(r.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let h of sy(u))o.add(h);let c=0;return Rt(o).pipe(oo(u=>s.has(u)?cb(u,i,n,e):(u.data=Rc(u,u.parent,n).resolve,Y(void 0))),it(()=>c++),zu(1),rn(u=>c===o.size?Y(t):Ni))})}function sy(n){let e=n.children.map(t=>sy(t)).flat();return[n,...e]}function cb(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!X_(r)&&(s[Mo]=r.title),lb(s,n,e,i).pipe(ce(o=>(n._resolvedData=o,n.data=Rc(n,n.parent,t).resolve,null)))}function lb(n,e,t,i){let r=ph(n);if(r.length===0)return Y({});let s={};return Rt(r).pipe(rn(o=>ub(n[o],e,t,i).pipe(Li(),it(c=>{if(c instanceof Oo)throw Dc(new So,c);s[o]=c}))),zu(1),Bg(s),Ur(o=>ny(o)?Ni:so(o)))}function ub(n,e,t,i){let r=Lo(e)??i,s=Xr(n,r),o=s.resolve?s.resolve(e,t):oi(r,()=>s(e,t));return ji(o)}function dh(n){return Cn(e=>{let t=n(e);return t?Rt(t).pipe(ce(()=>e)):Y(e)})}var oy=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===te);return r}getResolvedTitleForRoute(i){return i.data[Mo]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>Q(hb),providedIn:"root"});let n=e;return n})(),hb=(()=>{let e=class e extends oy{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(re(R_))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Hh=new Ce("",{providedIn:"root",factory:()=>({})}),db=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=F({type:e,selectors:[["ng-component"]],standalone:!0,features:[j],decls:1,vars:0,template:function(r,s){r&1&&O(0,"router-outlet")},dependencies:[$h],encapsulation:2});let n=e;return n})();function zh(n){let e=n.children&&n.children.map(zh),t=e?Re(q({},n),{children:e}):q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==te&&(t.component=db),t}var Gh=new Ce(""),fb=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Q(eh)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Y(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=ji(i.loadComponent()).pipe(ce(ay),it(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),ac(()=>{this.componentLoaders.delete(i)})),s=new Fu(r,()=>new Vt).pipe(Vu());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=pb(r,this.compiler,i,this.onLoadEndListener).pipe(ac(()=>{this.childrenLoaders.delete(r)})),c=new Fu(o,()=>new Vt).pipe(Vu());return this.childrenLoaders.set(r,c),c}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function pb(n,e,t,i){return ji(n.loadChildren()).pipe(ce(ay),rn(r=>r instanceof i_||Array.isArray(r)?Y(r):Rt(e.compileModuleAsync(r))),ce(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(t).injector,o=s.get(Gh,[],{optional:!0,self:!0}).flat()),{routes:o.map(zh),injector:s}}))}function mb(n){return n&&typeof n=="object"&&"default"in n}function ay(n){return mb(n)?n.default:n}var Kh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>Q(gb),providedIn:"root"});let n=e;return n})(),gb=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),_b=new Ce("");var yb=new Ce(""),vb=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Vt,this.transitionAbortSubject=new Vt,this.configLoader=Q(fb),this.environmentInjector=Q(cc),this.urlSerializer=Q(Bh),this.rootContexts=Q(kc),this.location=Q(pc),this.inputBindingEnabled=Q(qh,{optional:!0})!==null,this.titleStrategy=Q(oy),this.options=Q(Hh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Q(Kh),this.createViewTransition=Q(_b,{optional:!0}),this.navigationErrorHandler=Q(yb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Eh(s)),r=s=>this.events.next(new Th(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Re(q(q({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Ft({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:To,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ki(o=>o.id!==0),ce(o=>Re(q({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Cn(o=>{let c=!1,u=!1;return Y(o).pipe(Cn(h=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Jt.SupersededByNewNavigation),Ni;this.currentTransition=o,this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,targetBrowserUrl:typeof h.extras.browserUrl=="string"?this.urlSerializer.parse(h.extras.browserUrl):h.extras.browserUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Re(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=h.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!p&&m!=="reload"){let g="";return this.events.next(new dr(h.id,this.urlSerializer.serialize(h.rawUrl),g,yh.IgnoredSameUrlNavigation)),h.resolve(!1),Ni}if(this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Y(h).pipe(Cn(g=>{let x=this.transitions?.getValue();return this.events.next(new Ro(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),x!==this.transitions?.getValue()?Ni:Promise.resolve(g)}),ob(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),it(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Re(q({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let x=new bc(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(x)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(h.currentRawUrl)){let{id:g,extractedUrl:x,source:N,restoredState:$,extras:W}=h,we=new Ro(g,this.urlSerializer.serialize(x),N,$);this.events.next(we);let Ie=Y_(this.rootComponentType).snapshot;return this.currentTransition=o=Re(q({},h),{targetSnapshot:Ie,urlAfterRedirects:x,extras:Re(q({},W),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=x,Y(o)}else{let g="";return this.events.next(new dr(h.id,this.urlSerializer.serialize(h.extractedUrl),g,yh.IgnoredByUrlHandlingStrategy)),h.resolve(!1),Ni}}),it(h=>{let p=new vh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),ce(h=>(this.currentTransition=o=Re(q({},h),{guards:bT(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),o)),LT(this.environmentInjector,h=>this.events.next(h)),it(h=>{if(o.guardsResult=h.guardsResult,h.guardsResult&&typeof h.guardsResult!="boolean")throw Dc(this.urlSerializer,h.guardsResult);let p=new wh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.events.next(p)}),ki(h=>h.guardsResult?!0:(this.cancelNavigationTransition(h,"",Jt.GuardRejected),!1)),dh(h=>{if(h.guards.canActivateChecks.length)return Y(h).pipe(it(p=>{let m=new Ih(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}),Cn(p=>{let m=!1;return Y(p).pipe(ab(this.paramsInheritanceStrategy,this.environmentInjector),it({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(p,"",Jt.NoDataFromResolver)}}))}),it(p=>{let m=new Ch(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}))}),dh(h=>{let p=m=>{let g=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(m.routeConfig).pipe(it(x=>{m.component=x}),ce(()=>{})));for(let x of m.children)g.push(...p(x));return g};return $u(p(h.targetSnapshot.root)).pipe(Hu(null),Mi(1))}),dh(()=>this.afterPreactivation()),Cn(()=>{let{currentSnapshot:h,targetSnapshot:p}=o,m=this.createViewTransition?.(this.environmentInjector,h.root,p.root);return m?Rt(m).pipe(ce(()=>o)):Y(o)}),ce(h=>{let p=wT(i.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return this.currentTransition=o=Re(q({},h),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,o}),it(()=>{this.events.next(new Do)}),TT(this.rootContexts,i.routeReuseStrategy,h=>this.events.next(h),this.inputBindingEnabled),Mi(1),it({next:h=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new An(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects))),this.titleStrategy?.updateTitle(h.targetRouterState.snapshot),h.resolve(!0)},complete:()=>{c=!0}}),Wg(this.transitionAbortSubject.pipe(it(h=>{throw h}))),ac(()=>{!c&&!u&&this.cancelNavigationTransition(o,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ur(h=>{if(u=!0,ty(h))this.events.next(new ui(o.id,this.urlSerializer.serialize(o.extractedUrl),h.message,h.cancellationCode)),ET(h)?this.events.next(new Yr(h.url,h.navigationBehaviorOptions)):o.resolve(!1);else{let p=new Po(o.id,this.urlSerializer.serialize(o.extractedUrl),h,o.targetSnapshot??void 0);try{let m=oi(this.environmentInjector,()=>this.navigationErrorHandler?.(p));if(m instanceof Oo){let{message:g,cancellationCode:x}=Dc(this.urlSerializer,m);this.events.next(new ui(o.id,this.urlSerializer.serialize(o.extractedUrl),g,x)),this.events.next(new Yr(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(p);let g=i.errorHandler(h);o.resolve(!!g)}}catch(m){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(m)}}return Ni}))}))}cancelNavigationTransition(i,r,s){let o=new ui(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let i=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return i.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function wb(n){return n!==To}var Ib=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>Q(Cb),providedIn:"root"});let n=e;return n})(),Uh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Cb=(()=>{let e=class e extends Uh{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=De(e)))(s||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),cy=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>Q(Eb),providedIn:"root"});let n=e;return n})(),Eb=(()=>{let e=class e extends cy{constructor(){super(...arguments),this.location=Q(pc),this.urlSerializer=Q(Bh),this.options=Q(Hh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Q(Kh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Y_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Ro)this.stateMemento=this.createStateMemento();else if(i instanceof dr)this.rawUrlTree=r.initialUrl;else if(i instanceof bc){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else i instanceof Do?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):i instanceof ui&&(i.code===Jt.GuardRejected||i.code===Jt.NoDataFromResolver)?this.restoreHistory(r):i instanceof Po?this.restoreHistory(r,!0):i instanceof An&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=i instanceof hi?this.urlSerializer.serialize(i):i;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,c=q(q({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",c)}else{let o=q(q({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=De(e)))(s||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Co=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Co||{});function Tb(n,e){n.events.pipe(ki(t=>t instanceof An||t instanceof ui||t instanceof Po||t instanceof dr),ce(t=>t instanceof An||t instanceof dr?Co.COMPLETE:(t instanceof ui?t.code===Jt.Redirect||t.code===Jt.SupersededByNewNavigation:!1)?Co.REDIRECTING:Co.FAILED),ki(t=>t!==Co.REDIRECTING),Mi(1)).subscribe(()=>{e()})}function bb(n){throw n}var Sb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ab={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Q(dc),this.stateManager=Q(cy),this.options=Q(Hh,{optional:!0})||{},this.pendingTasks=Q(Kg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Q(vb),this.urlSerializer=Q(Bh),this.location=Q(pc),this.urlHandlingStrategy=Q(Kh),this._events=new Vt,this.errorHandler=this.options.errorHandler||bb,this.navigated=!1,this.routeReuseStrategy=Q(Ib),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Q(Gh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Q(qh,{optional:!0}),this.eventsSubscription=new Ng,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ui&&r.code!==Jt.Redirect&&r.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof An)this.navigated=!0;else if(r instanceof Yr){let c=r.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),h=q({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||wb(s.source)},c);this.scheduleNavigation(u,To,null,h,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}Pb(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),To,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let h=q({},s);delete h.navigationId,delete h.\u0275routerPageId,Object.keys(h).length!==0&&(o.state=h)}let u=this.parseUrl(i);this.scheduleNavigation(u,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(zh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:u,preserveFragment:h}=r,p=h?this.currentUrlTree.fragment:c,m=null;switch(u){case"merge":m=q(q({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let g;try{let x=s?s.snapshot:this.routerState.snapshot.root;g=z_(x)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),g=this.currentUrlTree.root}return G_(g,i,m,p??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=hr(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,To,null,r)}navigate(i,r={skipLocationChange:!1}){return Rb(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=q({},Sb):r===!1?s=q({},Ab):s=r,hr(i))return P_(this.currentUrlTree,i,s);let o=this.parseUrl(i);return P_(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,c){if(this.disposed)return Promise.resolve(!1);let u,h,p;c?(u=c.resolve,h=c.reject,p=c.promise):p=new Promise((g,x)=>{u=g,h=x});let m=this.pendingTasks.add();return Tb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:u,reject:h,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(g=>Promise.reject(g))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Rb(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Ve(4008,!1)}function Pb(n){return!(n instanceof Do)&&!(n instanceof Yr)}var Oc=(()=>{let e=class e{constructor(i,r,s,o,c,u){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=c,this.locationStrategy=u,this.href=null,this.onChanges=new Vt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let h=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=h==="a"||h==="area",this.isAnchorElement?this.subscription=i.events.subscribe(p=>{p instanceof An&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(hr(i)?this.routerLinkInput=i:this.routerLinkInput=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0"))}onClick(i,r,s,o,c){let u=this.urlTree;if(u===null||this.isAnchorElement&&(i!==0||r||s||o||c||typeof this.target=="string"&&this.target!="_self"))return!0;let h={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,h),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let r=this.href===null?null:Xg(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.routerLinkInput===null?null:hr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(k(jt),k(Rn),Gg("tabindex"),k(Ut),k(vt),k(th))},e.\u0275dir=je({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&z("click",function(c){return s.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),r&2&&H("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ee],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ee],replaceUrl:[2,"replaceUrl","replaceUrl",Ee],routerLink:"routerLink"},standalone:!0,features:[xt,ai]});let n=e;return n})(),ly=(()=>{let e=class e{get isActive(){return this._isActive}constructor(i,r,s,o,c){this.router=i,this.element=r,this.renderer=s,this.cdr=o,this.link=c,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new $e,this.routerEventsSubscription=i.events.subscribe(u=>{u instanceof An&&this.update()})}ngAfterContentInit(){Y(this.links.changes,Y(null)).pipe(qu()).subscribe(i=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let i=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Rt(i).pipe(qu()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(i){let r=Array.isArray(i)?i:i.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(i){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let i=this.hasActiveLinks();this.classes.forEach(r=>{i?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),i&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==i&&(this._isActive=i,this.cdr.markForCheck(),this.isActiveChange.emit(i))})}isLinkActive(i){let r=Db(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{let o=s.urlTree;return o?i.isActive(o,r):!1}}hasActiveLinks(){let i=this.isLinkActive(this.router);return this.link&&i(this.link)||this.links.some(i)}};e.\u0275fac=function(r){return new(r||e)(k(jt),k(vt),k(Ut),k(on),k(Oc,8))},e.\u0275dir=je({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,s,o){if(r&1&&sn(o,Oc,5),r&2){let c;wt(c=It())&&(s.links=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[ai]});let n=e;return n})();function Db(n){return!!n.paths}var xb=new Ce("");function uy(n,...e){return Pt([{provide:Gh,multi:!0,useValue:n},[],{provide:Rn,useFactory:Ob,deps:[jt]},{provide:l_,multi:!0,useFactory:Nb},e.map(t=>t.\u0275providers)])}function Ob(n){return n.routerState.root}function Nb(){let n=Q(zt);return e=>{let t=n.get(Zu);if(e!==t.components[0])return;let i=n.get(jt),r=n.get(kb);n.get(Mb)===1&&i.initialNavigation(),n.get(Lb,null,Gu.Optional)?.setUpPreloading(),n.get(xb,null,Gu.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var kb=new Ce("",{factory:()=>new Vt}),Mb=new Ce("",{providedIn:"root",factory:()=>1});var Lb=new Ce("");var Yh={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var V=function(n,e){if(!n)throw pr(e)},pr=function(n){return new Error("Firebase Database ("+Yh.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var dy=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Vb=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Vc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,u=r+2<n.length,h=u?n[r+2]:0,p=s>>2,m=(s&3)<<4|c>>4,g=(c&15)<<2|h>>6,x=h&63;u||(x=64,o||(g=64)),i.push(t[p],t[m],t[g],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Vb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let h=r<n.length?t[n.charAt(r)]:64;++r;let m=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||h==null||m==null)throw new Jh;let g=s<<2|c>>4;if(i.push(g),h!==64){let x=c<<4&240|h>>2;if(i.push(x),m!==64){let N=h<<6&192|m;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Jh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Zh=function(n){let e=dy(n);return Vc.encodeByteArray(e,!0)},Fo=function(n){return Zh(n).replace(/\./g,"")},Uo=function(n){try{return Vc.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fy(n){return py(void 0,n)}function py(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!Fb(t)||(n[t]=py(n[t],e[t]));return n}function Fb(n){return n!=="__proto__"}function Ub(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Bb=()=>Ub().__FIREBASE_DEFAULTS__,jb=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$b=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Uo(n[1]);return e&&JSON.parse(e)},ed=()=>{try{return Bb()||jb()||$b()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},td=n=>{var e,t;return(t=(e=ed())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},es=n=>{let e=td(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},nd=()=>{var n;return(n=ed())===null||n===void 0?void 0:n.config},id=n=>{var e;return(e=ed())===null||e===void 0?void 0:e[`_${n}`]};var di=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function ts(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Fo(JSON.stringify(t)),Fo(JSON.stringify(o)),""].join(".")}function ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bo(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function my(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Fc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gy(){let n=ot();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function jn(){return Yh.NODE_CLIENT===!0||Yh.NODE_ADMIN===!0}function rd(){try{return typeof indexedDB=="object"}catch{return!1}}function _y(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var qb="FirebaseError",Ot=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=qb,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fi.prototype.create)}},fi=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?Wb(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new Ot(r,c,i)}};function Wb(n,e){return n.replace(Hb,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var Hb=/\{\$([^}]+)}/g;function Zr(n){return JSON.parse(n)}function Ye(n){return JSON.stringify(n)}var yy=function(n){let e={},t={},i={},r="";try{let s=n.split(".");e=Zr(Uo(s[0])||""),t=Zr(Uo(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}};var vy=function(n){let e=yy(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},wy=function(n){let e=yy(n).claims;return typeof e=="object"&&e.admin===!0};function Pn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function mr(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function jo(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $o(n,e,t){let i={};for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function gr(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(hy(s)&&hy(o)){if(!gr(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function hy(n){return n!==null&&typeof n=="object"}function _r(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ns(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function is(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}var Lc=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let i=this.W_;if(typeof e=="string")for(let m=0;m<16;m++)i[m]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let m=0;m<16;m++)i[m]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let m=16;m<80;m++){let g=i[m-3]^i[m-8]^i[m-14]^i[m-16];i[m]=(g<<1|g>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4],h,p;for(let m=0;m<80;m++){m<40?m<20?(h=c^s&(o^c),p=1518500249):(h=s^o^c,p=1859775393):m<60?(h=s&o|c&(s|o),p=2400959708):(h=s^o^c,p=3395469782);let g=(r<<5|r>>>27)+h+u+p+i[m]&4294967295;u=c,c=o,o=(s<<30|s>>>2)&4294967295,s=r,r=g}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let i=t-this.blockSize,r=0,s=this.buf_,o=this.inbuf_;for(;r<t;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<t;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}};function Iy(n,e){let t=new Xh(n,e);return t.subscribe.bind(t)}var Xh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");zb(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Qh),r.error===void 0&&(r.error=Qh),r.complete===void 0&&(r.complete=Qh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function zb(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Qh(){}function qo(n,e){return`${n} failed: ${e} argument `}var Cy=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){let s=r-55296;i++,V(i<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Wo=function(n){let e=0;for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};var y2=4*60*60*1e3;function ze(n){return n&&n._delegate?n._delegate:n}var Ct=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var yr="[DEFAULT]";var Uc=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new di;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kb(e))try{this.getOrInitializeService({instanceIdentifier:yr})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=yr){return this.instances.has(e)}getOptions(e=yr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Gb(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=yr){return this.component?this.component.multipleInstances?e:yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Gb(n){return n===yr?void 0:n}function Kb(n){return n.instantiationMode==="EAGER"}var Ho=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Uc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Qb=[],le=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(le||{}),Yb={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},Jb=le.INFO,Xb={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},Zb=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Xb[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},$n=class{constructor(e){this.name=e,this._logLevel=Jb,this._logHandler=Zb,this._userLogHandler=null,Qb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var eS=(n,e)=>e.some(t=>n instanceof t),Ey,Ty;function tS(){return Ey||(Ey=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nS(){return Ty||(Ty=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var by=new WeakMap,od=new WeakMap,Sy=new WeakMap,sd=new WeakMap,cd=new WeakMap;function iS(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(qn(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&by.set(t,n)}).catch(()=>{}),cd.set(e,n),e}function rS(n){if(od.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});od.set(n,e)}var ad={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return od.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Sy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ay(n){ad=n(ad)}function sS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Bc(this),e,...t);return Sy.set(i,e.sort?e.sort():[e]),qn(i)}:nS().includes(n)?function(...e){return n.apply(Bc(this),e),qn(by.get(this))}:function(...e){return qn(n.apply(Bc(this),e))}}function oS(n){return typeof n=="function"?sS(n):(n instanceof IDBTransaction&&rS(n),eS(n,tS())?new Proxy(n,ad):n)}function qn(n){if(n instanceof IDBRequest)return iS(n);if(sd.has(n))return sd.get(n);let e=oS(n);return e!==n&&(sd.set(n,e),cd.set(e,n)),e}var Bc=n=>cd.get(n);function Py(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),c=qn(o);return i&&o.addEventListener("upgradeneeded",u=>{i(qn(o.result),u.oldVersion,u.newVersion,qn(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var aS=["get","getKey","getAll","getAllKeys","count"],cS=["put","add","delete","clear"],ld=new Map;function Ry(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ld.get(e))return ld.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=cS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||aS.includes(t)))return;let s=function(o,...c){return C(this,null,function*(){let u=this.transaction(o,r?"readwrite":"readonly"),h=u.store;return i&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),r&&u.done]))[0]})};return ld.set(e,s),s}Ay(n=>Re(q({},n),{get:(e,t,i)=>Ry(e,t)||n.get(e,t,i),has:(e,t)=>!!Ry(e,t)||n.has(e,t)}));var hd=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lS(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function lS(n){let e=n.getComponent();return e?.type==="VERSION"}var dd="@firebase/app",Dy="0.10.7";var vr=new $n("@firebase/app"),uS="@firebase/app-compat",hS="@firebase/analytics-compat",dS="@firebase/analytics",fS="@firebase/app-check-compat",pS="@firebase/app-check",mS="@firebase/auth",gS="@firebase/auth-compat",_S="@firebase/database",yS="@firebase/database-compat",vS="@firebase/functions",wS="@firebase/functions-compat",IS="@firebase/installations",CS="@firebase/installations-compat",ES="@firebase/messaging",TS="@firebase/messaging-compat",bS="@firebase/performance",SS="@firebase/performance-compat",AS="@firebase/remote-config",RS="@firebase/remote-config-compat",PS="@firebase/storage",DS="@firebase/storage-compat",xS="@firebase/firestore",OS="@firebase/vertexai-preview",NS="@firebase/firestore-compat",kS="firebase",MS="10.12.4";var fd="[DEFAULT]",LS={[dd]:"fire-core",[uS]:"fire-core-compat",[dS]:"fire-analytics",[hS]:"fire-analytics-compat",[pS]:"fire-app-check",[fS]:"fire-app-check-compat",[mS]:"fire-auth",[gS]:"fire-auth-compat",[_S]:"fire-rtdb",[yS]:"fire-rtdb-compat",[vS]:"fire-fn",[wS]:"fire-fn-compat",[IS]:"fire-iid",[CS]:"fire-iid-compat",[ES]:"fire-fcm",[TS]:"fire-fcm-compat",[bS]:"fire-perf",[SS]:"fire-perf-compat",[AS]:"fire-rc",[RS]:"fire-rc-compat",[PS]:"fire-gcs",[DS]:"fire-gcs-compat",[xS]:"fire-fst",[NS]:"fire-fst-compat",[OS]:"fire-vertex","fire-js":"fire-js",[kS]:"fire-js-all"};var zo=new Map,VS=new Map,pd=new Map;function xy(n,e){try{n.container.addComponent(e)}catch(t){vr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function cn(n){let e=n.name;if(pd.has(e))return vr.debug(`There were multiple attempts to register component ${e}.`),!1;pd.set(e,n);for(let t of zo.values())xy(t,n);for(let t of VS.values())xy(t,n);return!0}function pi(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dn(n){return n.settings!==void 0}var FS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new fi("app","Firebase",FS);var md=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ct("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}};var ln=MS;function yd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:fd,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw $i.create("bad-app-name",{appName:String(r)});if(t||(t=nd()),!t)throw $i.create("no-options");let s=zo.get(r);if(s){if(gr(t,s.options)&&gr(i,s.config))return s;throw $i.create("duplicate-app",{appName:r})}let o=new Ho(r);for(let u of pd.values())o.addComponent(u);let c=new md(t,i,o);return zo.set(r,c),c}function Wn(n=fd){let e=zo.get(n);if(!e&&n===fd&&nd())return yd();if(!e)throw $i.create("no-app",{appName:n});return e}function jc(){return Array.from(zo.values())}function ge(n,e,t){var i;let r=(i=LS[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vr.warn(c.join(" "));return}cn(new Ct(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var US="firebase-heartbeat-database",BS=1,Go="firebase-heartbeat-store",ud=null;function My(){return ud||(ud=Py(US,BS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Go)}catch(t){console.warn(t)}}}}).catch(n=>{throw $i.create("idb-open",{originalErrorMessage:n.message})})),ud}function jS(n){return C(this,null,function*(){try{let t=(yield My()).transaction(Go),i=yield t.objectStore(Go).get(Ly(n));return yield t.done,i}catch(e){if(e instanceof Ot)vr.warn(e.message);else{let t=$i.create("idb-get",{originalErrorMessage:e?.message});vr.warn(t.message)}}})}function Oy(n,e){return C(this,null,function*(){try{let i=(yield My()).transaction(Go,"readwrite");yield i.objectStore(Go).put(e,Ly(n)),yield i.done}catch(t){if(t instanceof Ot)vr.warn(t.message);else{let i=$i.create("idb-set",{originalErrorMessage:t?.message});vr.warn(i.message)}}})}function Ly(n){return`${n.name}!${n.options.appId}`}var $S=1024,qS=30*24*60*60*1e3,gd=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new _d(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return C(this,null,function*(){var e,t;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ny();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=qS}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return C(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Ny(),{heartbeatsToSend:i,unsentEntries:r}=WS(this._heartbeatsCache.heartbeats),s=Fo(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Ny(){return new Date().toISOString().substring(0,10)}function WS(n,e=$S){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),ky(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),ky(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var _d=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return rd()?_y().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield jS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Oy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Oy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function ky(n){return Fo(JSON.stringify({version:2,heartbeats:n})).length}function HS(n){cn(new Ct("platform-logger",e=>new hd(e),"PRIVATE")),cn(new Ct("heartbeat",e=>new gd(e),"PRIVATE")),ge(dd,Dy,n),ge(dd,Dy,"esm2017"),ge("fire-js","")}HS("");var Vy="@firebase/database",Fy="1.0.6";var Cf="";function zS(n){Cf=n}var Sd=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ye(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Zr(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Ad=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Pn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var gv=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Sd(e)}}catch{}return new Ad},Ir=gv("localStorage"),Rd=gv("sessionStorage");var os=new $n("@firebase/database"),GS=function(){let n=1;return function(){return n++}}(),_v=function(n){let e=Cy(n),t=new Lc;t.update(e);let i=t.digest();return Vc.encodeByteArray(i)},fa=function(...n){let e="";for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=fa.apply(null,i):typeof i=="object"?e+=Ye(i):e+=i,e+=" "}return e},Cr=null,Uy=!0,KS=function(n,e){V(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(os.logLevel=le.VERBOSE,Cr=os.log.bind(os),e&&Rd.set("logging_enabled",!0)):typeof n=="function"?Cr=n:(Cr=null,Rd.remove("logging_enabled"))},dt=function(...n){if(Uy===!0&&(Uy=!1,Cr===null&&Rd.get("logging_enabled")===!0&&KS(!0)),Cr){let e=fa.apply(null,n);Cr(e)}},pa=function(n){return function(...e){dt(n,...e)}},Pd=function(...n){let e="FIREBASE INTERNAL ERROR: "+fa(...n);os.error(e)},mi=function(...n){let e=`FIREBASE FATAL ERROR: ${fa(...n)}`;throw os.error(e),new Error(e)},kt=function(...n){let e="FIREBASE WARNING: "+fa(...n);os.warn(e)},QS=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&kt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ef=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},YS=function(n){if(jn()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},cs="[MIN_NAME]",Er="[MAX_NAME]",Sr=function(n,e){if(n===e)return 0;if(n===cs||e===Er)return-1;if(e===cs||n===Er)return 1;{let t=By(n),i=By(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},JS=function(n,e){return n===e?0:n<e?-1:1},Ko=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Ye(e))},Tf=function(n){if(typeof n!="object"||n===null)return Ye(n);let e=[];for(let i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=Ye(e[i]),t+=":",t+=Tf(n[e[i]]);return t+="}",t},yv=function(n,e){let t=n.length;if(t<=e)return[n];let i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function ft(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var vv=function(n){V(!Ef(n),"Invalid JSON number");let e=11,t=52,i=(1<<e-1)-1,r,s,o,c,u;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=c+i,o=Math.round(n*Math.pow(2,t-c)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-i-t))));let h=[];for(u=t;u;u-=1)h.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(r?1:0),h.reverse();let p=h.join(""),m="";for(u=0;u<64;u+=8){let g=parseInt(p.substr(u,8),2).toString(16);g.length===1&&(g="0"+g),m=m+g}return m.toLowerCase()},XS=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ZS=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function e1(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}var t1=new RegExp("^-?(0*)\\d{1,10}$"),n1=-2147483648,i1=2147483647,By=function(n){if(t1.test(n)){let e=Number(n);if(e>=n1&&e<=i1)return e}return null},gs=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw kt("Exception was thrown by user callback.",t),e},Math.floor(0))}},r1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zo=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var Dd=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){kt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var xd=class{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(dt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',kt(e)}},ea=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),qc="5",wv="v",Iv="s",Cv="r",Ev="f",Tv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bv="ls",Sv="p",Od="ac",Av="websocket",Rv="long_polling";var Wc=class{constructor(e,t,i,r,s=!1,o="",c=!1,u=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ir.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ir.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function s1(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Pv(n,e,t){V(typeof e=="string","typeof type must == string"),V(typeof t=="object","typeof params must == object");let i;if(e===Av)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Rv)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);s1(n)&&(t.ns=n.namespace);let r=[];return ft(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var Nd=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Pn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return fy(this.counters_)}};var vd={},wd={};function bf(n){let e=n.toString();return vd[e]||(vd[e]=new Nd),vd[e]}function o1(n,e){let t=n.toString();return wd[t]||(wd[t]=e()),wd[t]}var kd=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&gs(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var jy="start",a1="close",c1="pLPCommand",l1="pRTLPCB",Dv="id",xv="pw",Ov="ser",u1="cb",h1="seg",d1="ts",f1="d",p1="dframe",Nv=1870,kv=30,m1=Nv-kv,g1=25e3,_1=3e4,Md=class n{constructor(e,t,i,r,s,o,c){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pa(e),this.stats_=bf(t),this.urlFn=u=>(this.appCheckToken&&(u[Od]=this.appCheckToken),Pv(t,Rv,u))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new kd(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(_1)),YS(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ld((...s)=>{let[o,c,u,h,p]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===jy)this.id=c,this.password=u;else if(o===a1)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,c]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);let i={};i[jy]="t",i[Ov]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[u1]=this.scriptTagHolder.uniqueCallbackIdentifier),i[wv]=qc,this.transportSessionId&&(i[Iv]=this.transportSessionId),this.lastSessionId&&(i[bv]=this.lastSessionId),this.applicationId&&(i[Sv]=this.applicationId),this.appCheckToken&&(i[Od]=this.appCheckToken),typeof location<"u"&&location.hostname&&Tv.test(location.hostname)&&(i[Cv]=Ev);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return jn()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!XS()&&!ZS()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Ye(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let i=Zh(t),r=yv(i,m1);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(jn())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[p1]="t",i[Dv]=e,i[xv]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Ye(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Ld=class n{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,jn())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=GS(),window[c1+this.uniqueCallbackIdentifier]=e,window[l1+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){dt("frame writing exception"),c.stack&&dt(c.stack),dt(c)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||dt("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Dv]=this.myID,e[xv]=this.myPW,e[Ov]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kv+i.length<=Nv;){let o=this.pendingSegs.shift();i=i+"&"+h1+r+"="+o.seg+"&"+d1+r+"="+o.ts+"&"+f1+r+"="+o.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(g1)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,t){jn()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{dt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var y1=16384,v1=45e3,Hc=null;typeof MozWebSocket<"u"?Hc=MozWebSocket:typeof WebSocket<"u"&&(Hc=WebSocket);var Qo=(()=>{class n{constructor(t,i,r,s,o,c,u){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pa(this.connId),this.stats_=bf(i),this.connURL=n.connectionURL_(i,c,u,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){let c={};return c[wv]=qc,!jn()&&typeof location<"u"&&location.hostname&&Tv.test(location.hostname)&&(c[Cv]=Ev),i&&(c[Iv]=i),r&&(c[bv]=r),s&&(c[Od]=s),o&&(c[Sv]=o),Pv(t,Av,c)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ir.set("previous_websocket_failure",!0);try{let r;if(jn()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${qc}/${Cf}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,c=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;c&&(r.proxy={origin:c})}this.mySock=new Hc(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Hc!==null&&!n.forceDisallow_}static previouslyFailed(){return Ir.isInMemoryStorage||Ir.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ir.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=Zr(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(V(this.frames===null,"We already have a frame buffer"),t.length<=6){let i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();let i=Ye(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=yv(i,y1);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(v1))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),w1=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Md,Qo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let i=Qo&&Qo.isAvailable(),r=i&&!Qo.previouslyFailed();if(t.webSocketOnly&&(i||kt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Qo];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),I1=6e4,C1=5e3,E1=10*1024,T1=100*1024,Id="t",$y="d",b1="s",qy="r",S1="e",Wy="o",Hy="a",zy="n",Gy="p",A1="h",Vd=class{constructor(e,t,i,r,s,o,c,u,h,p){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=u,this.onKill_=h,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pa("c:"+this.id+":"),this.transportManager_=new w1(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Zo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>T1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>E1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Id in e){let t=e[Id];t===Hy?this.upgradeIfSecondaryHealthy_():t===qy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Wy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Ko("t",e),i=Ko("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Gy,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Hy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:zy,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Ko("t",e),i=Ko("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Ko(Id,e);if($y in e){let i=e[$y];if(t===A1){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===zy){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===b1?this.onConnectionShutdown_(i):t===qy?this.onReset_(i):t===S1?Pd("Server Error: "+i):t===Wy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Pd("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),qc!==i&&kt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Zo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(I1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(C1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Gy,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ir.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var zc=class{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}};var Gc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},V(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});let r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){V(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Kc=class n extends Gc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Bo()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return V(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Ky=32,Qy=768,_e=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function fe(){return new _e("")}function ne(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function zi(n){return n.pieces_.length-n.pieceNum_}function Oe(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new _e(n.pieces_,e)}function Sf(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function R1(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function ra(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Mv(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new _e(e,0)}function qe(n,e){let t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof _e)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new _e(t,0)}function oe(n){return n.pieceNum_>=n.pieces_.length}function Nt(n,e){let t=ne(n),i=ne(e);if(t===null)return e;if(t===i)return Nt(Oe(n),Oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function P1(n,e){let t=ra(n,0),i=ra(e,0);for(let r=0;r<t.length&&r<i.length;r++){let s=Sr(t[r],i[r]);if(s!==0)return s}return t.length===i.length?0:t.length<i.length?-1:1}function Af(n,e){if(zi(n)!==zi(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function un(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(zi(n)>zi(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}var Fd=class{constructor(e,t){this.errorPrefix_=t,this.parts_=ra(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Wo(this.parts_[i]);Lv(this)}};function D1(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Wo(e),Lv(n)}function x1(n){let e=n.parts_.pop();n.byteLength_-=Wo(e),n.parts_.length>0&&(n.byteLength_-=1)}function Lv(n){if(n.byteLength_>Qy)throw new Error(n.errorPrefix_+"has a key path longer than "+Qy+" bytes ("+n.byteLength_+").");if(n.parts_.length>Ky)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ky+") or object contains a cycle "+wr(n))}function wr(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var Ud=class n extends Gc{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new n}getInitialEvent(e){return V(e==="visible","Unknown event type: "+e),[this.visible_]}};var Yo=1e3,O1=60*5*1e3,Yy=30*1e3,N1=1.3,k1=3e4,M1="server_kill",Jy=3,Rf=(()=>{class n extends zc{constructor(t,i,r,s,o,c,u,h){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=c,this.appCheckTokenProvider_=u,this.authOverride_=h,this.id=n.nextPersistentConnectionId_++,this.log_=pa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Yo,this.maxReconnectDelay_=O1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!jn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ud.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Kc.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){let s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_(Ye(o)),V(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();let i=new di,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:c=>{let u=c.d;c.s==="ok"?i.resolve(u):i.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(t,i,r,s){this.initConnection_();let o=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+o),this.listens.has(c)||this.listens.set(c,new Map),V(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),V(!this.listens.get(c).has(o),"listen() called twice for same path/queryId.");let u={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(c).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(t){let i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){let i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},c="q";t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(c,o,u=>{let h=u.d,p=u.s;n.warnOnListenWarnings_(h,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",u),p!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(p,h))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Pn(t,"w")){let r=mr(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();kt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||wy(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Yy)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,i=vy(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,c=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){let r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),V(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);let o={p:t},c="n";s&&(o.q=r,o.t=s),this.sendRequest(c,o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();let c={p:i,d:r};o!==void 0&&(c.h=o),this.outstandingPuts_.push({action:t,request:c,onComplete:s}),this.outstandingPutCount_++;let u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+i)}sendPut_(t){let i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ye(t));let i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):Pd("Unrecognized action received from server: "+Ye(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){V(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>k1&&(this.reconnectDelay_=Yo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*N1)}this.onConnectStatus_(!1)}establishConnection_(){return C(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,c=!1,u=null,h=function(){u?u.close():(c=!0,r())},p=function(g){V(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(g)};this.realtime_={close:h,sendRequest:p};let m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,x]=yield Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);c?dt("getToken() completed but was canceled"):(dt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=x&&x.token,u=new Vd(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,N=>{kt(N+" ("+this.repoInfo_.toString()+")"),this.interrupt(M1)},o))}catch(g){this.log_("Failed to get token: "+g),c||(this.repoInfo_.nodeAdmin&&kt(g),h())}}})}interrupt(t){dt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){dt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],jo(this.interruptReasons_)&&(this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(o=>Tf(o)).join("$"):r="default";let s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){let r=new _e(t).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){dt("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Jy&&(this.reconnectDelay_=Yy,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){dt("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Jy&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},i="js";jn()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),t["sdk."+i+"."+Cf.replace(/\./g,"-")]=1,Bo()?t["framework.cordova"]=1:Fc()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Kc.getInstance().currentlyOnline();return jo(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),ie=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var ls=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let i=new ie(cs,e),r=new ie(cs,t);return this.compare(i,r)!==0}minPost(){return ie.MIN}};var $c,Qc=class extends ls{static get __EMPTY_NODE(){return $c}static set __EMPTY_NODE(e){$c=e}compare(e,t){return Sr(e.name,t.name)}isDefinedOn(e){throw pr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ie.MIN}maxPost(){return new ie(Er,$c)}makePost(e,t){return V(typeof e=="string","KeyIndex indexValue must always be a string."),new ie(e,$c)}toString(){return".key"}},as=new Qc;var ss=class{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},xn=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??hn.EMPTY_NODE,this.right=o??hn.EMPTY_NODE}copy(t,i,r,s,o){return new n(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this,o=r(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return hn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return hn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Bd=class{copy(e,t,i,r,s){return this}insert(e,t,i){return new xn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},hn=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,xn.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ss(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ss(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ss(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ss(this.root_,null,this.comparator_,!0,e)}};hn.EMPTY_NODE=new Bd;function L1(n,e){return Sr(n.name,e.name)}function Pf(n,e){return Sr(n,e)}var jd;function V1(n){jd=n}var Vv=function(n){return typeof n=="number"?"number:"+vv(n):"string:"+n},Fv=function(n){if(n.isLeafNode()){let e=n.val();V(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Pn(e,".sv"),"Priority must be a string or number.")}else V(n===jd||n.isEmpty(),"priority of unexpected type.");V(n===jd||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Xy,us=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,V(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Fv(this.priorityNode_)}static set __childrenNodeConstructor(t){Xy=t}static get __childrenNodeConstructor(){return Xy}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return oe(t)?this:ne(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){let r=ne(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(V(r!==".priority"||zi(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oe(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Vv(this.priorityNode_.val())+":");let i=typeof this.value_;t+=i+":",i==="number"?t+=vv(this.value_):t+=this.value_,this.lazyHash_=_v(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(V(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return V(s>=0,"Unknown leaf type: "+i),V(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),Uv,Bv;function F1(n){Uv=n}function U1(n){Bv=n}var $d=class extends ls{compare(e,t){let i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return s===0?Sr(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ie.MIN}maxPost(){return new ie(Er,new us("[PRIORITY-POST]",Bv))}makePost(e,t){let i=Uv(e);return new ie(t,new us("[PRIORITY-POST]",i))}toString(){return".priority"}},We=new $d;var B1=Math.log(2),qd=class{constructor(e){let t=s=>parseInt(Math.log(s)/B1,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Yc=function(n,e,t,i){n.sort(e);let r=function(u,h){let p=h-u,m,g;if(p===0)return null;if(p===1)return m=n[u],g=t?t(m):m,new xn(g,m.node,xn.BLACK,null,null);{let x=parseInt(p/2,10)+u,N=r(u,x),$=r(x+1,h);return m=n[x],g=t?t(m):m,new xn(g,m.node,xn.BLACK,N,$)}},s=function(u){let h=null,p=null,m=n.length,g=function(N,$){let W=m-N,we=m;m-=N;let Ie=r(W+1,we),ue=n[W],Me=t?t(ue):ue;x(new xn(Me,ue.node,$,null,Ie))},x=function(N){h?(h.left=N,h=N):(p=N,h=N)};for(let N=0;N<u.count;++N){let $=u.nextBitIsOne(),W=Math.pow(2,u.count-(N+1));$?g(W,xn.BLACK):(g(W,xn.BLACK),g(W,xn.RED))}return p},o=new qd(n.length),c=s(o);return new hn(i||e,c)};var Cd,rs={},hs=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return V(rs&&We,"ChildrenNode.ts has not been loaded"),Cd=Cd||new n({".priority":rs},{".priority":We}),Cd}get(e){let t=mr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof hn?t:null}hasIndex(e){return Pn(this.indexSet_,e.toString())}addIndex(e,t){V(e!==as,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=t.getIterator(ie.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let c;r?c=Yc(i,e.getCompare()):c=rs;let u=e.toString(),h=Object.assign({},this.indexSet_);h[u]=e;let p=Object.assign({},this.indexes_);return p[u]=c,new n(p,h)}addToIndexes(e,t){let i=$o(this.indexes_,(r,s)=>{let o=mr(this.indexSet_,s);if(V(o,"Missing index implementation for "+s),r===rs)if(o.isDefinedOn(e.node)){let c=[],u=t.getIterator(ie.Wrap),h=u.getNext();for(;h;)h.name!==e.name&&c.push(h),h=u.getNext();return c.push(e),Yc(c,o.getCompare())}else return rs;else{let c=t.get(e.name),u=r;return c&&(u=u.remove(new ie(e.name,c))),u.insert(e,e.node)}});return new n(i,this.indexSet_)}removeFromIndexes(e,t){let i=$o(this.indexes_,r=>{if(r===rs)return r;{let s=t.get(e.name);return s?r.remove(new ie(e.name,s)):r}});return new n(i,this.indexSet_)}};var Jo,J=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Fv(this.priorityNode_),this.children_.isEmpty()&&V(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Jo||(Jo=new n(new hn(Pf),null,hs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Jo}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let i=this.children_.get(t);return i===null?Jo:i}}getChild(t){let i=ne(t);return i===null?this:this.getImmediateChild(i).getChild(Oe(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(V(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{let r=new ie(t,i),s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));let c=s.isEmpty()?Jo:this.priorityNode_;return new n(s,c,o)}}updateChild(t,i){let r=ne(t);if(r===null)return i;{V(ne(t)!==".priority"||zi(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(Oe(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(We,(c,u)=>{i[c]=u.val(t),r++,o&&n.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):o=!1}),!t&&o&&s<2*r){let c=[];for(let u in i)c[u]=i[u];return c}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Vv(this.getPriority().val())+":"),this.forEachChild(We,(i,r)=>{let s=r.hash();s!==""&&(t+=":"+i+":"+s)}),this.lazyHash_=t===""?"":_v(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new ie(t,i));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){let i=this.getFirstChildName(t);return i?new ie(i,this.children_.get(i)):null}getLastChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){let i=this.getLastChildName(t);return i?new ie(i,this.children_.get(i)):null}forEachChild(t,i){let r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,ie.Wrap),o=s.peek();for(;o!=null&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,ie.Wrap),o=s.peek();for(;o!=null&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ma?-1:0}withIndex(t){if(t===as||this.indexMap_.hasIndex(t))return this;{let i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===as||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(We),s=i.getIterator(We),o=r.getNext(),c=s.getNext();for(;o&&c;){if(o.name!==c.name||!o.node.equals(c.node))return!1;o=r.getNext(),c=s.getNext()}return o===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===as?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),Wd=class extends J{constructor(){super(new hn(Pf),J.EMPTY_NODE,hs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return J.EMPTY_NODE}isEmpty(){return!1}},ma=new Wd;Object.defineProperties(ie,{MIN:{value:new ie(cs,J.EMPTY_NODE)},MAX:{value:new ie(Er,ma)}});Qc.__EMPTY_NODE=J.EMPTY_NODE;us.__childrenNodeConstructor=J;V1(ma);U1(ma);var j1=!0;function et(n,e=null){if(n===null)return J.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),V(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new us(t,et(e))}if(!(n instanceof Array)&&j1){let t=[],i=!1;if(ft(n,(o,c)=>{if(o.substring(0,1)!=="."){let u=et(c);u.isEmpty()||(i=i||!u.getPriority().isEmpty(),t.push(new ie(o,u)))}}),t.length===0)return J.EMPTY_NODE;let s=Yc(t,L1,o=>o.name,Pf);if(i){let o=Yc(t,We.getCompare());return new J(s,et(e),new hs({".priority":o},{".priority":We}))}else return new J(s,et(e),hs.Default)}else{let t=J.EMPTY_NODE;return ft(n,(i,r)=>{if(Pn(n,i)&&i.substring(0,1)!=="."){let s=et(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(et(e))}}F1(et);var Hd=class extends ls{constructor(e){super(),this.indexPath_=e,V(!oe(e)&&ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return s===0?Sr(e.name,t.name):s}makePost(e,t){let i=et(e),r=J.EMPTY_NODE.updateChild(this.indexPath_,i);return new ie(t,r)}maxPost(){let e=J.EMPTY_NODE.updateChild(this.indexPath_,ma);return new ie(Er,e)}toString(){return ra(this.indexPath_,0).join("/")}};var zd=class extends ls{compare(e,t){let i=e.node.compareTo(t.node);return i===0?Sr(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ie.MIN}maxPost(){return ie.MAX}makePost(e,t){let i=et(e);return new ie(t,i)}toString(){return".value"}},$1=new zd;function jv(n){return{type:"value",snapshotNode:n}}function ds(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function sa(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function oa(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function q1(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var aa=class{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){V(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let c=e.getImmediateChild(t);return c.getChild(r).equals(i.getChild(r))&&c.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(sa(t,c)):V(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?o.trackChildChange(ds(t,i)):o.trackChildChange(oa(t,i,c))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(We,(r,s)=>{t.hasChild(r)||i.trackChildChange(sa(r,s))}),t.isLeafNode()||t.forEachChild(We,(r,s)=>{if(e.hasChild(r)){let o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(oa(r,s,o))}else i.trackChildChange(ds(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?J.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Jc=class n{constructor(e){this.indexedFilter_=new aa(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,o){return this.matches(new ie(t,i))||(i=J.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=J.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(J.EMPTY_NODE);let s=this;return t.forEachChild(We,(o,c)=>{s.matches(new ie(o,c))||(r=r.updateImmediateChild(o,J.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var Gd=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{let i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Jc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new ie(t,i))||(i=J.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=J.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=J.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let c=s.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))r=r.updateImmediateChild(c.name,c.node),o++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(J.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){let c=s.getNext();o<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?o++:r=r.updateImmediateChild(c.name,J.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){let m=this.index_.getCompare();o=(g,x)=>m(x,g)}else o=this.index_.getCompare();let c=e;V(c.numChildren()===this.limit_,"");let u=new ie(t,i),h=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),p=this.rangedFilter_.matches(u);if(c.hasChild(t)){let m=c.getImmediateChild(t),g=r.getChildAfterChild(this.index_,h,this.reverse_);for(;g!=null&&(g.name===t||c.hasChild(g.name));)g=r.getChildAfterChild(this.index_,g,this.reverse_);let x=g==null?1:o(g,u);if(p&&!i.isEmpty()&&x>=0)return s?.trackChildChange(oa(t,i,m)),c.updateImmediateChild(t,i);{s?.trackChildChange(sa(t,m));let $=c.updateImmediateChild(t,J.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(s?.trackChildChange(ds(g.name,g.node)),$.updateImmediateChild(g.name,g.node)):$}}else return i.isEmpty()?e:p&&o(h,u)>=0?(s!=null&&(s.trackChildChange(sa(h.name,h.node)),s.trackChildChange(ds(t,i))),c.updateImmediateChild(t,i).updateImmediateChild(h.name,J.EMPTY_NODE)):e}};var Kd=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=We}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return V(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return V(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cs}hasEnd(){return this.endSet_}getIndexEndValue(){return V(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return V(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Er}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return V(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===We}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function W1(n){return n.loadsAllData()?new aa(n.getIndex()):n.hasLimit()?new Gd(n):new Jc(n)}function Zy(n){let e={};if(n.isDefault())return e;let t;if(n.index_===We?t="$priority":n.index_===$1?t="$value":n.index_===as?t="$key":(V(n.index_ instanceof Hd,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Ye(t),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";e[i]=Ye(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+Ye(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";e[i]=Ye(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+Ye(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ev(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==We&&(e.i=n.index_.toString()),e}var Qd=class n extends zc{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=pa("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(V(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,i),c={};this.listens_[o]=c;let u=Zy(e._queryParams);this.restRequest_(s+".json",u,(h,p)=>{let m=p;if(h===404&&(m=null,h=null),h===null&&this.onDataUpdate_(s,m,!1,i),mr(this.listens_,o)===c){let g;h?h===401?g="permission_denied":g="rest_error:"+h:g="ok",r(g,null)}})}unlisten(e,t){let i=n.getListenId_(e,t);delete this.listens_[i]}get(e){let t=Zy(e._queryParams),i=e._path.toString(),r=new di;return this.restRequest_(i+".json",t,(s,o)=>{let c=o;s===404&&(c=null,s=null),s===null?(this.onDataUpdate_(i,c,!1,null),r.resolve(c)):r.reject(new Error(c))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_r(t);this.log_("Sending REST request for "+o);let c=new XMLHttpRequest;c.onreadystatechange=()=>{if(i&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=Zr(c.responseText)}catch{kt("Failed to parse JSON response for "+o+": "+c.responseText)}i(null,u)}else c.status!==401&&c.status!==404&&kt("Got unsuccessful REST response for "+o+" Status: "+c.status),i(c.status);i=null}},c.open("GET",o,!0),c.send()})}};var Yd=class{constructor(){this.rootNode_=J.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Xc(){return{value:null,children:new Map}}function $v(n,e,t){if(oe(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let i=ne(e);n.children.has(i)||n.children.set(i,Xc());let r=n.children.get(i);e=Oe(e),$v(r,e,t)}}function Jd(n,e,t){n.value!==null?t(e,n.value):H1(n,(i,r)=>{let s=new _e(e.toString()+"/"+i);Jd(r,s,t)})}function H1(n,e){n.children.forEach((t,i)=>{e(i,t)})}var Xd=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ft(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}};var tv=10*1e3,z1=30*1e3,G1=5*60*1e3,Zd=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Xd(e);let i=tv+(z1-tv)*Math.random();Zo(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),t={},i=!1;ft(e,(r,s)=>{s>0&&Pn(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),Zo(this.reportStats_.bind(this),Math.floor(Math.random()*2*G1))}};var Hn=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Hn||{});function Df(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function xf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Of(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var ef=class n{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Hn.ACK_USER_WRITE,this.source=Df()}operationForChild(e){if(oe(this.path)){if(this.affectedTree.value!=null)return V(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new _e(e));return new n(fe(),t,this.revert)}}else return V(ne(this.path)===e,"operationForChild called for unrelated child."),new n(Oe(this.path),this.affectedTree,this.revert)}};var Zc=class n{constructor(e,t){this.source=e,this.path=t,this.type=Hn.LISTEN_COMPLETE}operationForChild(e){return oe(this.path)?new n(this.source,fe()):new n(this.source,Oe(this.path))}};var fs=class n{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Hn.OVERWRITE}operationForChild(e){return oe(this.path)?new n(this.source,fe(),this.snap.getImmediateChild(e)):new n(this.source,Oe(this.path),this.snap)}};var ca=class n{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Hn.MERGE}operationForChild(e){if(oe(this.path)){let t=this.children.subtree(new _e(e));return t.isEmpty()?null:t.value?new fs(this.source,fe(),t.value):new n(this.source,fe(),t)}else return V(ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var zn=class{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(oe(e))return this.isFullyInitialized()&&!this.filtered_;let t=ne(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var tf=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function K1(n,e,t,i){let r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(q1(o.childName,o.snapshotNode))}),Xo(n,r,"child_removed",e,i,t),Xo(n,r,"child_added",e,i,t),Xo(n,r,"child_moved",s,i,t),Xo(n,r,"child_changed",e,i,t),Xo(n,r,"value",e,i,t),r}function Xo(n,e,t,i,r,s){let o=i.filter(c=>c.type===t);o.sort((c,u)=>Y1(n,c,u)),o.forEach(c=>{let u=Q1(n,c,s);r.forEach(h=>{h.respondsTo(c.type)&&e.push(h.createEvent(u,n.query_))})})}function Q1(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Y1(n,e,t){if(e.childName==null||t.childName==null)throw pr("Should only compare child_ events.");let i=new ie(e.childName,e.snapshotNode),r=new ie(t.childName,t.snapshotNode);return n.index_.compare(i,r)}function fl(n,e){return{eventCache:n,serverCache:e}}function ta(n,e,t,i){return fl(new zn(e,t,i),n.serverCache)}function qv(n,e,t,i){return fl(n.eventCache,new zn(e,t,i))}function el(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Tr(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var Ed,J1=()=>(Ed||(Ed=new hn(JS)),Ed),Mt=class n{constructor(e,t=J1()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return ft(e,(i,r)=>{t=t.set(new _e(i),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:fe(),value:this.value};if(oe(e))return null;{let i=ne(e),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(Oe(e),t);return s!=null?{path:qe(new _e(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(oe(e))return this;{let t=ne(e),i=this.children.get(t);return i!==null?i.subtree(Oe(e)):new n(null)}}set(e,t){if(oe(e))return new n(t,this.children);{let i=ne(e),s=(this.children.get(i)||new n(null)).set(Oe(e),t),o=this.children.insert(i,s);return new n(this.value,o)}}remove(e){if(oe(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=ne(e),i=this.children.get(t);if(i){let r=i.remove(Oe(e)),s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(oe(e))return this.value;{let t=ne(e),i=this.children.get(t);return i?i.get(Oe(e)):null}}setTree(e,t){if(oe(e))return t;{let i=ne(e),s=(this.children.get(i)||new n(null)).setTree(Oe(e),t),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new n(this.value,o)}}fold(e){return this.fold_(fe(),e)}fold_(e,t){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(qe(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,fe(),t)}findOnPath_(e,t,i){let r=this.value?i(t,this.value):!1;if(r)return r;if(oe(e))return null;{let s=ne(e),o=this.children.get(s);return o?o.findOnPath_(Oe(e),qe(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,fe(),t)}foreachOnPath_(e,t,i){if(oe(e))return this;{this.value&&i(t,this.value);let r=ne(e),s=this.children.get(r);return s?s.foreachOnPath_(Oe(e),qe(t,r),i):new n(null)}}foreach(e){this.foreach_(fe(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(qe(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}};var On=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Mt(null))}};function na(n,e,t){if(oe(e))return new On(new Mt(t));{let i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,s=i.value,o=Nt(r,e);return s=s.updateChild(o,t),new On(n.writeTree_.set(r,s))}else{let r=new Mt(t),s=n.writeTree_.setTree(e,r);return new On(s)}}}function nf(n,e,t){let i=n;return ft(t,(r,s)=>{i=na(i,qe(e,r),s)}),i}function nv(n,e){if(oe(e))return On.empty();{let t=n.writeTree_.setTree(e,new Mt(null));return new On(t)}}function rf(n,e){return Ar(n,e)!=null}function Ar(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Nt(t.path,e)):null}function iv(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(We,(i,r)=>{e.push(new ie(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new ie(i,r.value))}),e}function Wi(n,e){if(oe(e))return n;{let t=Ar(n,e);return t!=null?new On(new Mt(t)):new On(n.writeTree_.subtree(e))}}function sf(n){return n.writeTree_.isEmpty()}function ps(n,e){return Wv(fe(),n.writeTree_,e)}function Wv(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(V(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):t=Wv(qe(n,r),s,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(qe(n,".priority"),i)),t}}function pl(n,e){return Kv(e,n)}function X1(n,e,t,i,r){V(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=na(n.visibleWrites,e,t)),n.lastWriteId=i}function Z1(n,e,t,i){V(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=nf(n.visibleWrites,e,t),n.lastWriteId=i}function eA(n,e){for(let t=0;t<n.allWrites.length;t++){let i=n.allWrites[t];if(i.writeId===e)return i}return null}function tA(n,e){let t=n.allWrites.findIndex(c=>c.writeId===e);V(t>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){let c=n.allWrites[o];c.visible&&(o>=t&&nA(c,i.path)?r=!1:un(i.path,c.path)&&(s=!0)),o--}if(r){if(s)return iA(n),!0;if(i.snap)n.visibleWrites=nv(n.visibleWrites,i.path);else{let c=i.children;ft(c,u=>{n.visibleWrites=nv(n.visibleWrites,qe(i.path,u))})}return!0}else return!1}function nA(n,e){if(n.snap)return un(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&un(qe(n.path,t),e))return!0;return!1}function iA(n){n.visibleWrites=Hv(n.allWrites,rA,fe()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function rA(n){return n.visible}function Hv(n,e,t){let i=On.empty();for(let r=0;r<n.length;++r){let s=n[r];if(e(s)){let o=s.path,c;if(s.snap)un(t,o)?(c=Nt(t,o),i=na(i,c,s.snap)):un(o,t)&&(c=Nt(o,t),i=na(i,fe(),s.snap.getChild(c)));else if(s.children){if(un(t,o))c=Nt(t,o),i=nf(i,c,s.children);else if(un(o,t))if(c=Nt(o,t),oe(c))i=nf(i,fe(),s.children);else{let u=mr(s.children,ne(c));if(u){let h=u.getChild(Oe(c));i=na(i,fe(),h)}}}else throw pr("WriteRecord should have .snap or .children")}}return i}function zv(n,e,t,i,r){if(!i&&!r){let s=Ar(n.visibleWrites,e);if(s!=null)return s;{let o=Wi(n.visibleWrites,e);if(sf(o))return t;if(t==null&&!rf(o,fe()))return null;{let c=t||J.EMPTY_NODE;return ps(o,c)}}}else{let s=Wi(n.visibleWrites,e);if(!r&&sf(s))return t;if(!r&&t==null&&!rf(s,fe()))return null;{let o=function(h){return(h.visible||r)&&(!i||!~i.indexOf(h.writeId))&&(un(h.path,e)||un(e,h.path))},c=Hv(n.allWrites,o,e),u=t||J.EMPTY_NODE;return ps(c,u)}}}function sA(n,e,t){let i=J.EMPTY_NODE,r=Ar(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(We,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){let s=Wi(n.visibleWrites,e);return t.forEachChild(We,(o,c)=>{let u=ps(Wi(s,new _e(o)),c);i=i.updateImmediateChild(o,u)}),iv(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=Wi(n.visibleWrites,e);return iv(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function oA(n,e,t,i,r){V(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=qe(e,t);if(rf(n.visibleWrites,s))return null;{let o=Wi(n.visibleWrites,s);return sf(o)?r.getChild(t):ps(o,r.getChild(t))}}function aA(n,e,t,i){let r=qe(e,t),s=Ar(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(t)){let o=Wi(n.visibleWrites,r);return ps(o,i.getNode().getImmediateChild(t))}else return null}function cA(n,e){return Ar(n.visibleWrites,e)}function lA(n,e,t,i,r,s,o){let c,u=Wi(n.visibleWrites,e),h=Ar(u,fe());if(h!=null)c=h;else if(t!=null)c=ps(u,t);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){let p=[],m=o.getCompare(),g=s?c.getReverseIteratorFrom(i,o):c.getIteratorFrom(i,o),x=g.getNext();for(;x&&p.length<r;)m(x,i)!==0&&p.push(x),x=g.getNext();return p}else return[]}function uA(){return{visibleWrites:On.empty(),allWrites:[],lastWriteId:-1}}function tl(n,e,t,i){return zv(n.writeTree,n.treePath,e,t,i)}function Nf(n,e){return sA(n.writeTree,n.treePath,e)}function rv(n,e,t,i){return oA(n.writeTree,n.treePath,e,t,i)}function nl(n,e){return cA(n.writeTree,qe(n.treePath,e))}function hA(n,e,t,i,r,s){return lA(n.writeTree,n.treePath,e,t,i,r,s)}function kf(n,e,t){return aA(n.writeTree,n.treePath,e,t)}function Gv(n,e){return Kv(qe(n.treePath,e),n.writeTree)}function Kv(n,e){return{treePath:n,writeTree:e}}var of=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,i=e.childName;V(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),V(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(i,oa(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(i,sa(i,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(i,ds(i,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(i,oa(i,e.snapshotNode,r.oldSnap));else throw pr("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var af=class{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}},Qv=new af,la=class{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new zn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return kf(this.writes_,e,i)}}getChildAfterChild(e,t,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Tr(this.viewCache_),s=hA(this.writes_,r,t,1,i,e);return s.length===0?null:s[0]}};function dA(n){return{filter:n}}function fA(n,e){V(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),V(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function pA(n,e,t,i,r){let s=new of,o,c;if(t.type===Hn.OVERWRITE){let h=t;h.source.fromUser?o=cf(n,e,h.path,h.snap,i,r,s):(V(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.serverCache.isFiltered()&&!oe(h.path),o=il(n,e,h.path,h.snap,i,r,c,s))}else if(t.type===Hn.MERGE){let h=t;h.source.fromUser?o=gA(n,e,h.path,h.children,i,r,s):(V(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.serverCache.isFiltered(),o=lf(n,e,h.path,h.children,i,r,c,s))}else if(t.type===Hn.ACK_USER_WRITE){let h=t;h.revert?o=vA(n,e,h.path,i,r,s):o=_A(n,e,h.path,h.affectedTree,i,r,s)}else if(t.type===Hn.LISTEN_COMPLETE)o=yA(n,e,t.path,i,s);else throw pr("Unknown operation type: "+t.type);let u=s.getChanges();return mA(e,o,u),{viewCache:o,changes:u}}function mA(n,e,t){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=el(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(jv(el(e)))}}function Yv(n,e,t,i,r,s){let o=e.eventCache;if(nl(i,t)!=null)return e;{let c,u;if(oe(t))if(V(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let h=Tr(e),p=h instanceof J?h:J.EMPTY_NODE,m=Nf(i,p);c=n.filter.updateFullNode(e.eventCache.getNode(),m,s)}else{let h=tl(i,Tr(e));c=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{let h=ne(t);if(h===".priority"){V(zi(t)===1,"Can't have a priority with additional path components");let p=o.getNode();u=e.serverCache.getNode();let m=rv(i,t,p,u);m!=null?c=n.filter.updatePriority(p,m):c=o.getNode()}else{let p=Oe(t),m;if(o.isCompleteForChild(h)){u=e.serverCache.getNode();let g=rv(i,t,o.getNode(),u);g!=null?m=o.getNode().getImmediateChild(h).updateChild(p,g):m=o.getNode().getImmediateChild(h)}else m=kf(i,h,e.serverCache);m!=null?c=n.filter.updateChild(o.getNode(),h,m,p,r,s):c=o.getNode()}}return ta(e,c,o.isFullyInitialized()||oe(t),n.filter.filtersNodes())}}function il(n,e,t,i,r,s,o,c){let u=e.serverCache,h,p=o?n.filter:n.filter.getIndexedFilter();if(oe(t))h=p.updateFullNode(u.getNode(),i,null);else if(p.filtersNodes()&&!u.isFiltered()){let x=u.getNode().updateChild(t,i);h=p.updateFullNode(u.getNode(),x,null)}else{let x=ne(t);if(!u.isCompleteForPath(t)&&zi(t)>1)return e;let N=Oe(t),W=u.getNode().getImmediateChild(x).updateChild(N,i);x===".priority"?h=p.updatePriority(u.getNode(),W):h=p.updateChild(u.getNode(),x,W,N,Qv,null)}let m=qv(e,h,u.isFullyInitialized()||oe(t),p.filtersNodes()),g=new la(r,m,s);return Yv(n,m,t,r,g,c)}function cf(n,e,t,i,r,s,o){let c=e.eventCache,u,h,p=new la(r,e,s);if(oe(t))h=n.filter.updateFullNode(e.eventCache.getNode(),i,o),u=ta(e,h,!0,n.filter.filtersNodes());else{let m=ne(t);if(m===".priority")h=n.filter.updatePriority(e.eventCache.getNode(),i),u=ta(e,h,c.isFullyInitialized(),c.isFiltered());else{let g=Oe(t),x=c.getNode().getImmediateChild(m),N;if(oe(g))N=i;else{let $=p.getCompleteChild(m);$!=null?Sf(g)===".priority"&&$.getChild(Mv(g)).isEmpty()?N=$:N=$.updateChild(g,i):N=J.EMPTY_NODE}if(x.equals(N))u=e;else{let $=n.filter.updateChild(c.getNode(),m,N,g,p,o);u=ta(e,$,c.isFullyInitialized(),n.filter.filtersNodes())}}}return u}function sv(n,e){return n.eventCache.isCompleteForChild(e)}function gA(n,e,t,i,r,s,o){let c=e;return i.foreach((u,h)=>{let p=qe(t,u);sv(e,ne(p))&&(c=cf(n,c,p,h,r,s,o))}),i.foreach((u,h)=>{let p=qe(t,u);sv(e,ne(p))||(c=cf(n,c,p,h,r,s,o))}),c}function ov(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function lf(n,e,t,i,r,s,o,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,h;oe(t)?h=i:h=new Mt(null).setTree(t,i);let p=e.serverCache.getNode();return h.children.inorderTraversal((m,g)=>{if(p.hasChild(m)){let x=e.serverCache.getNode().getImmediateChild(m),N=ov(n,x,g);u=il(n,u,new _e(m),N,r,s,o,c)}}),h.children.inorderTraversal((m,g)=>{let x=!e.serverCache.isCompleteForChild(m)&&g.value===null;if(!p.hasChild(m)&&!x){let N=e.serverCache.getNode().getImmediateChild(m),$=ov(n,N,g);u=il(n,u,new _e(m),$,r,s,o,c)}}),u}function _A(n,e,t,i,r,s,o){if(nl(r,t)!=null)return e;let c=e.serverCache.isFiltered(),u=e.serverCache;if(i.value!=null){if(oe(t)&&u.isFullyInitialized()||u.isCompleteForPath(t))return il(n,e,t,u.getNode().getChild(t),r,s,c,o);if(oe(t)){let h=new Mt(null);return u.getNode().forEachChild(as,(p,m)=>{h=h.set(new _e(p),m)}),lf(n,e,t,h,r,s,c,o)}else return e}else{let h=new Mt(null);return i.foreach((p,m)=>{let g=qe(t,p);u.isCompleteForPath(g)&&(h=h.set(p,u.getNode().getChild(g)))}),lf(n,e,t,h,r,s,c,o)}}function yA(n,e,t,i,r){let s=e.serverCache,o=qv(e,s.getNode(),s.isFullyInitialized()||oe(t),s.isFiltered());return Yv(n,o,t,i,Qv,r)}function vA(n,e,t,i,r,s){let o;if(nl(i,t)!=null)return e;{let c=new la(i,e,r),u=e.eventCache.getNode(),h;if(oe(t)||ne(t)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=tl(i,Tr(e));else{let m=e.serverCache.getNode();V(m instanceof J,"serverChildren would be complete if leaf node"),p=Nf(i,m)}p=p,h=n.filter.updateFullNode(u,p,s)}else{let p=ne(t),m=kf(i,p,e.serverCache);m==null&&e.serverCache.isCompleteForChild(p)&&(m=u.getImmediateChild(p)),m!=null?h=n.filter.updateChild(u,p,m,Oe(t),c,s):e.eventCache.getNode().hasChild(p)?h=n.filter.updateChild(u,p,J.EMPTY_NODE,Oe(t),c,s):h=u,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=tl(i,Tr(e)),o.isLeafNode()&&(h=n.filter.updateFullNode(h,o,s)))}return o=e.serverCache.isFullyInitialized()||nl(i,fe())!=null,ta(e,h,o,n.filter.filtersNodes())}}var uf=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new aa(i.getIndex()),s=W1(i);this.processor_=dA(s);let o=t.serverCache,c=t.eventCache,u=r.updateFullNode(J.EMPTY_NODE,o.getNode(),null),h=s.updateFullNode(J.EMPTY_NODE,c.getNode(),null),p=new zn(u,o.isFullyInitialized(),r.filtersNodes()),m=new zn(h,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=fl(m,p),this.eventGenerator_=new tf(this.query_)}get query(){return this.query_}};function wA(n){return n.viewCache_.serverCache.getNode()}function IA(n){return el(n.viewCache_)}function CA(n,e){let t=Tr(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!oe(e)&&!t.getImmediateChild(ne(e)).isEmpty())?t.getChild(e):null}function av(n){return n.eventRegistrations_.length===0}function EA(n,e){n.eventRegistrations_.push(e)}function cv(n,e,t){let i=[];if(t){V(e==null,"A cancel should cancel all event registrations.");let r=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function lv(n,e,t,i){e.type===Hn.MERGE&&e.source.queryId!==null&&(V(Tr(n.viewCache_),"We should always have a full cache before handling merges"),V(el(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,s=pA(n.processor_,r,e,t,i);return fA(n.processor_,s.viewCache),V(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Jv(n,s.changes,s.viewCache.eventCache.getNode(),null)}function TA(n,e){let t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(We,(s,o)=>{i.push(ds(s,o))}),t.isFullyInitialized()&&i.push(jv(t.getNode())),Jv(n,i,t.getNode(),e)}function Jv(n,e,t,i){let r=i?[i]:n.eventRegistrations_;return K1(n.eventGenerator_,e,t,r)}var rl,sl=class{constructor(){this.views=new Map}};function bA(n){V(!rl,"__referenceConstructor has already been defined"),rl=n}function SA(){return V(rl,"Reference.ts has not been loaded"),rl}function AA(n){return n.views.size===0}function Mf(n,e,t,i){let r=e.source.queryId;if(r!==null){let s=n.views.get(r);return V(s!=null,"SyncTree gave us an op for an invalid query."),lv(s,e,t,i)}else{let s=[];for(let o of n.views.values())s=s.concat(lv(o,e,t,i));return s}}function Xv(n,e,t,i,r){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let c=tl(t,r?i:null),u=!1;c?u=!0:i instanceof J?(c=Nf(t,i),u=!1):(c=J.EMPTY_NODE,u=!1);let h=fl(new zn(c,u,!1),new zn(i,r,!1));return new uf(e,h)}return o}function RA(n,e,t,i,r,s){let o=Xv(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),EA(o,t),TA(o,t)}function PA(n,e,t,i){let r=e._queryIdentifier,s=[],o=[],c=Gi(n);if(r==="default")for(let[u,h]of n.views.entries())o=o.concat(cv(h,t,i)),av(h)&&(n.views.delete(u),h.query._queryParams.loadsAllData()||s.push(h.query));else{let u=n.views.get(r);u&&(o=o.concat(cv(u,t,i)),av(u)&&(n.views.delete(r),u.query._queryParams.loadsAllData()||s.push(u.query)))}return c&&!Gi(n)&&s.push(new(SA())(e._repo,e._path)),{removed:s,events:o}}function Zv(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Hi(n,e){let t=null;for(let i of n.views.values())t=t||CA(i,e);return t}function e0(n,e){if(e._queryParams.loadsAllData())return ml(n);{let i=e._queryIdentifier;return n.views.get(i)}}function t0(n,e){return e0(n,e)!=null}function Gi(n){return ml(n)!=null}function ml(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var ol;function DA(n){V(!ol,"__referenceConstructor has already been defined"),ol=n}function xA(){return V(ol,"Reference.ts has not been loaded"),ol}var OA=1,al=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mt(null),this.pendingWriteTree_=uA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function n0(n,e,t,i,r){return X1(n.pendingWriteTree_,e,t,i,r),r?_s(n,new fs(Df(),e,t)):[]}function NA(n,e,t,i){Z1(n.pendingWriteTree_,e,t,i);let r=Mt.fromObject(t);return _s(n,new ca(Df(),e,r))}function qi(n,e,t=!1){let i=eA(n.pendingWriteTree_,e);if(tA(n.pendingWriteTree_,e)){let s=new Mt(null);return i.snap!=null?s=s.set(fe(),!0):ft(i.children,o=>{s=s.set(new _e(o),!0)}),_s(n,new ef(i.path,s,t))}else return[]}function ga(n,e,t){return _s(n,new fs(xf(),e,t))}function kA(n,e,t){let i=Mt.fromObject(t);return _s(n,new ca(xf(),e,i))}function MA(n,e){return _s(n,new Zc(xf(),e))}function LA(n,e,t){let i=Vf(n,t);if(i){let r=Ff(i),s=r.path,o=r.queryId,c=Nt(s,e),u=new Zc(Of(o),c);return Uf(n,s,u)}else return[]}function cl(n,e,t,i,r=!1){let s=e._path,o=n.syncPointTree_.get(s),c=[];if(o&&(e._queryIdentifier==="default"||t0(o,e))){let u=PA(o,e,t,i);AA(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let h=u.removed;if(c=u.events,!r){let p=h.findIndex(g=>g._queryParams.loadsAllData())!==-1,m=n.syncPointTree_.findOnPath(s,(g,x)=>Gi(x));if(p&&!m){let g=n.syncPointTree_.subtree(s);if(!g.isEmpty()){let x=UA(g);for(let N=0;N<x.length;++N){let $=x[N],W=$.query,we=o0(n,$);n.listenProvider_.startListening(ia(W),ua(n,W),we.hashFn,we.onComplete)}}}!m&&h.length>0&&!i&&(p?n.listenProvider_.stopListening(ia(e),null):h.forEach(g=>{let x=n.queryToTagMap.get(gl(g));n.listenProvider_.stopListening(ia(g),x)}))}BA(n,h)}return c}function i0(n,e,t,i){let r=Vf(n,i);if(r!=null){let s=Ff(r),o=s.path,c=s.queryId,u=Nt(o,e),h=new fs(Of(c),u,t);return Uf(n,o,h)}else return[]}function VA(n,e,t,i){let r=Vf(n,i);if(r){let s=Ff(r),o=s.path,c=s.queryId,u=Nt(o,e),h=Mt.fromObject(t),p=new ca(Of(c),u,h);return Uf(n,o,p)}else return[]}function hf(n,e,t,i=!1){let r=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(g,x)=>{let N=Nt(g,r);s=s||Hi(x,N),o=o||Gi(x)});let c=n.syncPointTree_.get(r);c?(o=o||Gi(c),s=s||Hi(c,fe())):(c=new sl,n.syncPointTree_=n.syncPointTree_.set(r,c));let u;s!=null?u=!0:(u=!1,s=J.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((x,N)=>{let $=Hi(N,fe());$&&(s=s.updateImmediateChild(x,$))}));let h=t0(c,e);if(!h&&!e._queryParams.loadsAllData()){let g=gl(e);V(!n.queryToTagMap.has(g),"View does not exist, but we have a tag");let x=jA();n.queryToTagMap.set(g,x),n.tagToQueryMap.set(x,g)}let p=pl(n.pendingWriteTree_,r),m=RA(c,e,t,p,s,u);if(!h&&!o&&!i){let g=e0(c,e);m=m.concat($A(n,e,g))}return m}function Lf(n,e,t){let r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,c)=>{let u=Nt(o,e),h=Hi(c,u);if(h)return h});return zv(r,e,s,t,!0)}function FA(n,e){let t=e._path,i=null;n.syncPointTree_.foreachOnPath(t,(h,p)=>{let m=Nt(h,t);i=i||Hi(p,m)});let r=n.syncPointTree_.get(t);r?i=i||Hi(r,fe()):(r=new sl,n.syncPointTree_=n.syncPointTree_.set(t,r));let s=i!=null,o=s?new zn(i,!0,!1):null,c=pl(n.pendingWriteTree_,e._path),u=Xv(r,e,c,s?o.getNode():J.EMPTY_NODE,s);return IA(u)}function _s(n,e){return r0(e,n.syncPointTree_,null,pl(n.pendingWriteTree_,fe()))}function r0(n,e,t,i){if(oe(n.path))return s0(n,e,t,i);{let r=e.get(fe());t==null&&r!=null&&(t=Hi(r,fe()));let s=[],o=ne(n.path),c=n.operationForChild(o),u=e.children.get(o);if(u&&c){let h=t?t.getImmediateChild(o):null,p=Gv(i,o);s=s.concat(r0(c,u,h,p))}return r&&(s=s.concat(Mf(r,n,i,t))),s}}function s0(n,e,t,i){let r=e.get(fe());t==null&&r!=null&&(t=Hi(r,fe()));let s=[];return e.children.inorderTraversal((o,c)=>{let u=t?t.getImmediateChild(o):null,h=Gv(i,o),p=n.operationForChild(o);p&&(s=s.concat(s0(p,c,u,h)))}),r&&(s=s.concat(Mf(r,n,i,t))),s}function o0(n,e){let t=e.query,i=ua(n,t);return{hashFn:()=>(wA(e)||J.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?LA(n,t._path,i):MA(n,t._path);{let s=e1(r,t);return cl(n,t,null,s)}}}}function ua(n,e){let t=gl(e);return n.queryToTagMap.get(t)}function gl(n){return n._path.toString()+"$"+n._queryIdentifier}function Vf(n,e){return n.tagToQueryMap.get(e)}function Ff(n){let e=n.indexOf("$");return V(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new _e(n.substr(0,e))}}function Uf(n,e,t){let i=n.syncPointTree_.get(e);V(i,"Missing sync point for query tag that we're tracking");let r=pl(n.pendingWriteTree_,e);return Mf(i,t,r,null)}function UA(n){return n.fold((e,t,i)=>{if(t&&Gi(t))return[ml(t)];{let r=[];return t&&(r=Zv(t)),ft(i,(s,o)=>{r=r.concat(o)}),r}})}function ia(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(xA())(n._repo,n._path):n}function BA(n,e){for(let t=0;t<e.length;++t){let i=e[t];if(!i._queryParams.loadsAllData()){let r=gl(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}function jA(){return OA++}function $A(n,e,t){let i=e._path,r=ua(n,e),s=o0(n,t),o=n.listenProvider_.startListening(ia(e),r,s.hashFn,s.onComplete),c=n.syncPointTree_.subtree(i);if(r)V(!Gi(c.value),"If we're adding a query, it shouldn't be shadowed");else{let u=c.fold((h,p,m)=>{if(!oe(h)&&p&&Gi(p))return[ml(p).query];{let g=[];return p&&(g=g.concat(Zv(p).map(x=>x.query))),ft(m,(x,N)=>{g=g.concat(N)}),g}});for(let h=0;h<u.length;++h){let p=u[h];n.listenProvider_.stopListening(ia(p),ua(n,p))}}return o}var df=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},ff=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=qe(this.path_,e);return new n(this.syncTree_,t)}node(){return Lf(this.syncTree_,this.path_)}},qA=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},uv=function(n,e,t){if(!n||typeof n!="object")return n;if(V(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return WA(n[".sv"],e,t);if(typeof n[".sv"]=="object")return HA(n[".sv"],e);V(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},WA=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:V(!1,"Unexpected server value: "+n)}},HA=function(n,e,t){n.hasOwnProperty("increment")||V(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&V(!1,"Unexpected increment value: "+i);let r=e.node();if(V(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},a0=function(n,e,t,i){return Bf(e,new ff(t,n),i)},c0=function(n,e,t){return Bf(n,new df(e),t)};function Bf(n,e,t){let i=n.getPriority().val(),r=uv(i,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,c=uv(o.getValue(),e,t);return c!==o.getValue()||r!==o.getPriority().val()?new us(c,et(r)):n}else{let o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new us(r))),o.forEachChild(We,(c,u)=>{let h=Bf(u,e.getImmediateChild(c),t);h!==u&&(s=s.updateImmediateChild(c,h))}),s}}var ha=class{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}};function jf(n,e){let t=e instanceof _e?e:new _e(e),i=n,r=ne(t);for(;r!==null;){let s=mr(i.node.children,r)||{children:{},childCount:0};i=new ha(r,i,s),t=Oe(t),r=ne(t)}return i}function ys(n){return n.node.value}function l0(n,e){n.node.value=e,pf(n)}function u0(n){return n.node.childCount>0}function zA(n){return ys(n)===void 0&&!u0(n)}function _l(n,e){ft(n.node.children,(t,i)=>{e(new ha(t,n,i))})}function h0(n,e,t,i){t&&!i&&e(n),_l(n,r=>{h0(r,e,!0,i)}),t&&i&&e(n)}function GA(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function _a(n){return new _e(n.parent===null?n.name:_a(n.parent)+"/"+n.name)}function pf(n){n.parent!==null&&KA(n.parent,n.name,n)}function KA(n,e,t){let i=zA(t),r=Pn(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,pf(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,pf(n))}var QA=/[\[\].#$\/\u0000-\u001F\u007F]/,YA=/[\[\].#$\u0000-\u001F\u007F]/,Td=10*1024*1024,$f=function(n){return typeof n=="string"&&n.length!==0&&!QA.test(n)},d0=function(n){return typeof n=="string"&&n.length!==0&&!YA.test(n)},JA=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),d0(n)},XA=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Ef(n)||n&&typeof n=="object"&&Pn(n,".sv")},f0=function(n,e,t,i){i&&e===void 0||yl(qo(n,"value"),e,t)},yl=function(n,e,t){let i=t instanceof _e?new Fd(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+wr(i));if(typeof e=="function")throw new Error(n+"contains a function "+wr(i)+" with contents = "+e.toString());if(Ef(e))throw new Error(n+"contains "+e.toString()+" "+wr(i));if(typeof e=="string"&&e.length>Td/3&&Wo(e)>Td)throw new Error(n+"contains a string greater than "+Td+" utf8 bytes "+wr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(ft(e,(o,c)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!$f(o)))throw new Error(n+" contains an invalid key ("+o+") "+wr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);D1(i,o),yl(n,c,i),x1(i)}),r&&s)throw new Error(n+' contains ".value" child '+wr(i)+" in addition to actual children.")}},ZA=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];let s=ra(i);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!$f(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(P1);let r=null;for(t=0;t<e.length;t++){if(i=e[t],r!==null&&un(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},eR=function(n,e,t,i){if(i&&e===void 0)return;let r=qo(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");let s=[];ft(e,(o,c)=>{let u=new _e(o);if(yl(r,c,qe(t,u)),Sf(u)===".priority"&&!XA(c))throw new Error(r+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(u)}),ZA(r,s)};var p0=function(n,e,t,i){if(!(i&&t===void 0)&&!d0(t))throw new Error(qo(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},tR=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),p0(n,e,t,i)},qf=function(n,e){if(ne(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},nR=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!$f(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!JA(t))throw new Error(qo(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var mf=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function vl(n,e){let t=null;for(let i=0;i<e.length;i++){let r=e[i],s=r.getPath();t!==null&&!Af(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function m0(n,e,t){vl(n,t),g0(n,i=>Af(i,e))}function dn(n,e,t){vl(n,t),g0(n,i=>un(i,e)||un(e,i))}function g0(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let s=r.path;e(s)?(iR(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function iR(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let i=t.getEventRunner();Cr&&dt("event: "+t.toString()),gs(i)}}}var rR="repo_interrupt",sR=25,gf=class{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xc(),this.transactionQueueTree_=new ha,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function oR(n,e,t){if(n.stats_=bf(n.repoInfo_),n.forceRestClient_||r1())n.server_=new Qd(n.repoInfo_,(i,r,s,o)=>{hv(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>dv(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ye(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Rf(n.repoInfo_,e,(i,r,s,o)=>{hv(n,i,r,s,o)},i=>{dv(n,i)},i=>{aR(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=o1(n.repoInfo_,()=>new Zd(n.stats_,n.server_)),n.infoData_=new Yd,n.infoSyncTree_=new al({startListening:(i,r,s,o)=>{let c=[],u=n.infoData_.getNode(i._path);return u.isEmpty()||(c=ga(n.infoSyncTree_,i._path,u),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),Wf(n,"connected",!1),n.serverSyncTree_=new al({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(c,u)=>{let h=o(c,u);dn(n.eventQueue_,i._path,h)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function _0(n){let t=n.infoData_.getNode(new _e(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function wl(n){return qA({timestamp:_0(n)})}function hv(n,e,t,i,r){n.dataUpdateCount++;let s=new _e(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){let u=$o(t,h=>et(h));o=VA(n.serverSyncTree_,s,u,r)}else{let u=et(t);o=i0(n.serverSyncTree_,s,u,r)}else if(i){let u=$o(t,h=>et(h));o=kA(n.serverSyncTree_,s,u)}else{let u=et(t);o=ga(n.serverSyncTree_,s,u)}let c=s;o.length>0&&(c=ms(n,s)),dn(n.eventQueue_,c,o)}function dv(n,e){Wf(n,"connected",e),e===!1&&hR(n)}function aR(n,e){ft(e,(t,i)=>{Wf(n,t,i)})}function Wf(n,e,t){let i=new _e("/.info/"+e),r=et(t);n.infoData_.updateSnapshot(i,r);let s=ga(n.infoSyncTree_,i,r);dn(n.eventQueue_,i,s)}function Hf(n){return n.nextWriteId_++}function cR(n,e,t){let i=FA(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(r=>{let s=et(r).withIndex(e._queryParams.getIndex());hf(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=ga(n.serverSyncTree_,e._path,s);else{let c=ua(n.serverSyncTree_,e);o=i0(n.serverSyncTree_,e._path,s,c)}return dn(n.eventQueue_,e._path,o),cl(n.serverSyncTree_,e,t,null,!0),s},r=>(ya(n,"get for query "+Ye(e)+" failed: "+r),Promise.reject(new Error(r))))}function lR(n,e,t,i,r){ya(n,"set",{path:e.toString(),value:t,priority:i});let s=wl(n),o=et(t,i),c=Lf(n.serverSyncTree_,e),u=c0(o,c,s),h=Hf(n),p=n0(n.serverSyncTree_,e,u,h,!0);vl(n.eventQueue_,p),n.server_.put(e.toString(),o.val(!0),(g,x)=>{let N=g==="ok";N||kt("set at "+e+" failed: "+g);let $=qi(n.serverSyncTree_,h,!N);dn(n.eventQueue_,e,$),_f(n,r,g,x)});let m=Gf(n,e);ms(n,m),dn(n.eventQueue_,m,[])}function uR(n,e,t,i){ya(n,"update",{path:e.toString(),value:t});let r=!0,s=wl(n),o={};if(ft(t,(c,u)=>{r=!1,o[c]=a0(qe(e,c),et(u),n.serverSyncTree_,s)}),r)dt("update() called with empty data.  Don't do anything."),_f(n,i,"ok",void 0);else{let c=Hf(n),u=NA(n.serverSyncTree_,e,o,c);vl(n.eventQueue_,u),n.server_.merge(e.toString(),t,(h,p)=>{let m=h==="ok";m||kt("update at "+e+" failed: "+h);let g=qi(n.serverSyncTree_,c,!m),x=g.length>0?ms(n,e):e;dn(n.eventQueue_,x,g),_f(n,i,h,p)}),ft(t,h=>{let p=Gf(n,qe(e,h));ms(n,p)}),dn(n.eventQueue_,e,[])}}function hR(n){ya(n,"onDisconnectEvents");let e=wl(n),t=Xc();Jd(n.onDisconnect_,fe(),(r,s)=>{let o=a0(r,s,n.serverSyncTree_,e);$v(t,r,o)});let i=[];Jd(t,fe(),(r,s)=>{i=i.concat(ga(n.serverSyncTree_,r,s));let o=Gf(n,r);ms(n,o)}),n.onDisconnect_=Xc(),dn(n.eventQueue_,fe(),i)}function dR(n,e,t){let i;ne(e._path)===".info"?i=hf(n.infoSyncTree_,e,t):i=hf(n.serverSyncTree_,e,t),m0(n.eventQueue_,e._path,i)}function fv(n,e,t){let i;ne(e._path)===".info"?i=cl(n.infoSyncTree_,e,t):i=cl(n.serverSyncTree_,e,t),m0(n.eventQueue_,e._path,i)}function fR(n){n.persistentConnection_&&n.persistentConnection_.interrupt(rR)}function ya(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),dt(t,...e)}function _f(n,e,t,i){e&&gs(()=>{if(t==="ok")e(null);else{let r=(t||"error").toUpperCase(),s=r;i&&(s+=": "+i);let o=new Error(s);o.code=r,e(o)}})}function y0(n,e,t){return Lf(n.serverSyncTree_,e,t)||J.EMPTY_NODE}function zf(n,e=n.transactionQueueTree_){if(e||Il(n,e),ys(e)){let t=w0(n,e);V(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&pR(n,_a(e),t)}else u0(e)&&_l(e,t=>{zf(n,t)})}function pR(n,e,t){let i=t.map(h=>h.currentWriteId),r=y0(n,e,i),s=r,o=r.hash();for(let h=0;h<t.length;h++){let p=t[h];V(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;let m=Nt(e,p.path);s=s.updateChild(m,p.currentOutputSnapshotRaw)}let c=s.val(!0),u=e;n.server_.put(u.toString(),c,h=>{ya(n,"transaction put response",{path:u.toString(),status:h});let p=[];if(h==="ok"){let m=[];for(let g=0;g<t.length;g++)t[g].status=2,p=p.concat(qi(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&m.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();Il(n,jf(n.transactionQueueTree_,e)),zf(n,n.transactionQueueTree_),dn(n.eventQueue_,e,p);for(let g=0;g<m.length;g++)gs(m[g])}else{if(h==="datastale")for(let m=0;m<t.length;m++)t[m].status===3?t[m].status=4:t[m].status=0;else{kt("transaction at "+u.toString()+" failed: "+h);for(let m=0;m<t.length;m++)t[m].status=4,t[m].abortReason=h}ms(n,e)}},o)}function ms(n,e){let t=v0(n,e),i=_a(t),r=w0(n,t);return mR(n,r,i),i}function mR(n,e,t){if(e.length===0)return;let i=[],r=[],o=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){let u=e[c],h=Nt(t,u.path),p=!1,m;if(V(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)p=!0,m=u.abortReason,r=r.concat(qi(n.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=sR)p=!0,m="maxretry",r=r.concat(qi(n.serverSyncTree_,u.currentWriteId,!0));else{let g=y0(n,u.path,o);u.currentInputSnapshot=g;let x=e[c].update(g.val());if(x!==void 0){yl("transaction failed: Data returned ",x,u.path);let N=et(x);typeof x=="object"&&x!=null&&Pn(x,".priority")||(N=N.updatePriority(g.getPriority()));let W=u.currentWriteId,we=wl(n),Ie=c0(N,g,we);u.currentOutputSnapshotRaw=N,u.currentOutputSnapshotResolved=Ie,u.currentWriteId=Hf(n),o.splice(o.indexOf(W),1),r=r.concat(n0(n.serverSyncTree_,u.path,Ie,u.currentWriteId,u.applyLocally)),r=r.concat(qi(n.serverSyncTree_,W,!0))}else p=!0,m="nodata",r=r.concat(qi(n.serverSyncTree_,u.currentWriteId,!0))}dn(n.eventQueue_,t,r),r=[],p&&(e[c].status=2,function(g){setTimeout(g,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(m==="nodata"?i.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):i.push(()=>e[c].onComplete(new Error(m),!1,null))))}Il(n,n.transactionQueueTree_);for(let c=0;c<i.length;c++)gs(i[c]);zf(n,n.transactionQueueTree_)}function v0(n,e){let t,i=n.transactionQueueTree_;for(t=ne(e);t!==null&&ys(i)===void 0;)i=jf(i,t),e=Oe(e),t=ne(e);return i}function w0(n,e){let t=[];return I0(n,e,t),t.sort((i,r)=>i.order-r.order),t}function I0(n,e,t){let i=ys(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);_l(e,r=>{I0(n,r,t)})}function Il(n,e){let t=ys(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,l0(e,t.length>0?t:void 0)}_l(e,i=>{Il(n,i)})}function Gf(n,e){let t=_a(v0(n,e)),i=jf(n.transactionQueueTree_,e);return GA(i,r=>{bd(n,r)}),bd(n,i),h0(i,r=>{bd(n,r)}),t}function bd(n,e){let t=ys(e);if(t){let i=[],r=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(V(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(V(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(qi(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?l0(e,void 0):t.length=s+1,dn(n.eventQueue_,_a(e),r);for(let o=0;o<i.length;o++)gs(i[o])}}function gR(n){let e="",t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function _R(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):kt(`Invalid query segment '${t}' in query '${n}'`)}return e}var pv=function(n,e){let t=yR(n),i=t.namespace;t.domain==="firebase.com"&&mi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&mi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||QS();let r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Wc(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new _e(t.pathString)}},yR=function(n){let e="",t="",i="",r="",s="",o=!0,c="https",u=443;if(typeof n=="string"){let h=n.indexOf("//");h>=0&&(c=n.substring(0,h-1),n=n.substring(h+2));let p=n.indexOf("/");p===-1&&(p=n.length);let m=n.indexOf("?");m===-1&&(m=n.length),e=n.substring(0,Math.min(p,m)),p<m&&(r=gR(n.substring(p,m)));let g=_R(n.substring(Math.min(n.length,m)));h=e.indexOf(":"),h>=0?(o=c==="https"||c==="wss",u=parseInt(e.substring(h+1),10)):h=e.length;let x=e.slice(0,h);if(x.toLowerCase()==="localhost")t="localhost";else if(x.split(".").length<=2)t=x;else{let N=e.indexOf(".");i=e.substring(0,N).toLowerCase(),t=e.substring(N+1),s=i}"ns"in g&&(s=g.ns)}return{host:e,port:u,domain:t,subdomain:i,secure:o,scheme:c,pathString:r,namespace:s}};var mv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",vR=function(){let n=0,e=[];return function(t){let i=t===n;n=t;let r,s=new Array(8);for(r=7;r>=0;r--)s[r]=mv.charAt(t%64),t=Math.floor(t/64);V(t===0,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=mv.charAt(e[r]);return V(o.length===20,"nextPushId: Length should be 20."),o}}();var ll=class{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ye(this.snapshot.exportVal())}},ul=class{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var hl=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return V(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var yf=class n{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return oe(this._path)?null:Sf(this._path)}get ref(){return new Gn(this._repo,this._path)}get _queryIdentifier(){let e=ev(this._queryParams),t=Tf(e);return t==="{}"?"default":t}get _queryObject(){return ev(this._queryParams)}isEqual(e){if(e=ze(e),!(e instanceof n))return!1;let t=this._repo===e._repo,i=Af(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+R1(this._path)}};var Gn=class n extends yf{constructor(e,t){super(e,t,new Kd,!1)}get parent(){let e=Mv(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},da=class n{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new _e(e),i=br(this.ref,e);return new n(this._node.getChild(t),i,We)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new n(r,br(this.ref,i),We)))}hasChild(e){let t=new _e(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Ne(n,e){return n=ze(n),n._checkNotDeleted("ref"),e!==void 0?br(n._root,e):n._root}function br(n,e){return n=ze(n),ne(n._path)===null?tR("child","path",e,!1):p0("child","path",e,!1),new Gn(n._repo,qe(n._path,e))}function Cl(n,e){n=ze(n),qf("push",n._path),f0("push",e,n._path,!0);let t=_0(n._repo),i=vR(t),r=br(n,i),s=br(n,i),o;return e!=null?o=wa(s,e).then(()=>s):o=Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function va(n){return qf("remove",n._path),wa(n,null)}function wa(n,e){n=ze(n),qf("set",n._path),f0("set",e,n._path,!1);let t=new di;return lR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function El(n,e){eR("update",e,n._path,!1);let t=new di;return uR(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Rr(n){n=ze(n);let e=new hl(()=>{}),t=new dl(e);return cR(n._repo,n,t).then(i=>new da(i,new Gn(n._repo,n._path),n._queryParams.getIndex()))}var dl=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let i=t._queryParams.getIndex();return new ll("value",this,new da(e.snapshotNode,new Gn(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ul(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},vf=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ul(this,e,t):null}createEvent(e,t){V(e.childName!=null,"Child events should have a childName.");let i=br(new Gn(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new ll(e.type,this,new da(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function wR(n,e,t,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){let u=t,h=(p,m)=>{fv(n._repo,n,c),u(p,m)};h.userCallback=t.userCallback,h.context=t.context,t=h}let o=new hl(t,s||void 0),c=e==="value"?new dl(o):new vf(e,o);return dR(n._repo,n,c),()=>fv(n._repo,n,c)}function fn(n,e,t,i){return wR(n,"value",e,t,i)}bA(Gn);DA(Gn);var IR="FIREBASE_DATABASE_EMULATOR_HOST",wf={},CR=!1;function ER(n,e,t,i){n.repoInfo_=new Wc(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function TR(n,e,t,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||mi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dt("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=pv(s,r),c=o.repoInfo,u,h;typeof process<"u"&&process.env&&(h=process.env[IR]),h?(u=!0,s=`http://${h}?ns=${c.namespace}`,o=pv(s,r),c=o.repoInfo):u=!o.repoInfo.secure;let p=r&&u?new ea(ea.OWNER):new xd(n.name,n.options,e);nR("Invalid Firebase Database URL",o),oe(o.path)||mi("Database URL must point to the root of a Firebase Database (not including a child path).");let m=SR(c,n,p,new Dd(n.name,t));return new If(m,n)}function bR(n,e){let t=wf[e];(!t||t[n.key]!==n)&&mi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),fR(n),delete t[n.key]}function SR(n,e,t,i){let r=wf[e.name];r||(r={},wf[e.name]=r);let s=r[n.toURLString()];return s&&mi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new gf(n,CR,t,i),r[n.toURLString()]=s,s}var If=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(oR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gn(this._repo,fe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(bR(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&mi("Cannot call "+e+" on a deleted database.")}};function C0(n=Wn(),e){let t=pi(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let i=es("database");i&&E0(t,...i)}return t}function E0(n,e,t,i={}){n=ze(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&mi("Cannot call useEmulator() after instance has already been initialized.");let r=n._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&mi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ea(ea.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:ts(i.mockUserToken,n.app.options.projectId);s=new ea(o)}ER(r,e,t,s)}function AR(n){zS(ln),cn(new Ct("database",(e,{instanceIdentifier:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return TR(i,r,s,t)},"PUBLIC").setMultipleInstances(!0)),ge(Vy,Fy,n),ge(Vy,Fy,"esm2017")}Rf.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Rf.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};AR();var RR="firebase",PR="10.12.4";ge(RR,PR,"app");var Nn=new ho("ANGULARFIRE2_VERSION");function Ki(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var gi=(n,e)=>{let t=e?[e]:jc(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Kn=class{constructor(){return gi(DR)}},DR="app-check";function vs(){}var Tl=class{zone;delegate;constructor(e,t=Mg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},Kf=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vs,{},vs,vs)),t.pipe(it({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Qn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Tl(Zone.current)),this.insideAngular=t.run(()=>new Tl(Zone.current,kg)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(re(xe))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bl(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function xR(n){return bl().ngZone.runOutsideAngular(()=>n())}function Pr(n){return bl().ngZone.run(()=>n())}function OR(n){return NR(bl())(n)}function NR(n){return function(t){return t=t.lift(new Kf(n.ngZone)),t.pipe(ju(n.outsideAngular),Bu(n.insideAngular))}}var kR=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Pr(()=>n.apply(void 0,i))},at=(n,e)=>function(){let t,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(t||=Pr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vs,{},vs,vs))),i[s]=kR(i[s],t));let r=xR(()=>n.apply(this,i));if(!e)if(r instanceof ro){let s=bl();return r.pipe(ju(s.outsideAngular),Bu(s.insideAngular))}else return Pr(()=>r);return r instanceof ro?r.pipe(OR):r instanceof Promise?Pr(()=>new Promise((s,o)=>r.then(c=>Pr(()=>s(c)),c=>Pr(()=>o(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:Pr(()=>r)};var Xt=class{constructor(e){return e}},kn=class{constructor(){return jc()}};function MR(n){return n&&n.length===1?n[0]:new Xt(Wn())}var Qf=new Ce("angularfire2._apps"),LR={provide:Xt,useFactory:MR,deps:[[new Fe,Qf]]},VR={provide:kn,deps:[[new Fe,Qf]]};function FR(n){return(e,t)=>{let i=t.get(Dt);ge("angularfire",Nn.full,"core"),ge("angularfire",Nn.full,"app"),ge("angular",c_.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new Xt(r)}}function T0(n,...e){return Pt([LR,VR,{provide:Qf,useFactory:FR(n),multi:!0,deps:[xe,zt,Qn,...e]}])}var b0=at(yd,!0);function $0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var q0=$0,W0=new fi("auth","Firebase",$0());var xl=new $n("@firebase/auth");function UR(n,...e){xl.logLevel<=le.WARN&&xl.warn(`Auth (${ln}): ${n}`,...e)}function Al(n,...e){xl.logLevel<=le.ERROR&&xl.error(`Auth (${ln}): ${n}`,...e)}function Jn(n,...e){throw _p(n,...e)}function Dr(n,...e){return _p(n,...e)}function H0(n,e,t){let i=Object.assign(Object.assign({},q0()),{[e]:t});return new fi("auth","Firebase",i).create(e,{appName:n.name})}function vi(n){return H0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _p(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return W0.create(n,...e)}function G(n,e,...t){if(!n)throw _p(e,...t)}function _i(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Al(e),new Error(e)}function Yi(n,e){n||_i(e)}function Zf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function BR(){return S0()==="http:"||S0()==="https:"}function S0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function jR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BR()||my()||"connection"in navigator)?navigator.onLine:!0}function $R(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var xr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yi(t>e,"Short delay should be less than long delay!"),this.isMobile=Bo()||Fc()}get(){return jR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function yp(n,e){Yi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ol=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var qR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var WR=new xr(3e4,6e4);function wi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ii(s,o,c,u){return C(this,arguments,function*(n,e,t,i,r={}){return z0(n,r,()=>C(this,null,function*(){let h={},p={};i&&(e==="GET"?p=i:h={body:JSON.stringify(i)});let m=_r(Object.assign({key:n.config.apiKey},p)).slice(1),g=yield n._getAdditionalHeaders();return g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode),Ol.fetch()(G0(n,n.config.apiHost,t,m),Object.assign({method:e,headers:g,referrerPolicy:"no-referrer"},h))}))})}function z0(n,e,t){return C(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},qR),e);try{let r=new ep(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Sl(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sl(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Sl(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Sl(n,"user-disabled",o);let p=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw H0(n,p,h);Jn(n,p)}}catch(r){if(r instanceof Ot)throw r;Jn(n,"network-request-failed",{message:String(r)})}})}function Ra(s,o,c,u){return C(this,arguments,function*(n,e,t,i,r={}){let h=yield Ii(n,e,t,i,r);return"mfaPendingCredential"in h&&Jn(n,"multi-factor-auth-required",{_serverResponse:h}),h})}function G0(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?yp(n.config,r):`${n.config.apiScheme}://${r}`}function HR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ep=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Dr(this.auth,"network-request-failed")),WR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Sl(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Dr(n,e,i);return r.customData._tokenResponse=t,r}function A0(n){return n!==void 0&&n.enterprise!==void 0}var tp=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return HR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function zR(n,e){return C(this,null,function*(){return Ii(n,"GET","/v2/recaptchaConfig",wi(n,e))})}function GR(n,e){return C(this,null,function*(){return Ii(n,"POST","/v1/accounts:delete",e)})}function K0(n,e){return C(this,null,function*(){return Ii(n,"POST","/v1/accounts:lookup",e)})}function Ia(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function vp(n,e=!1){return C(this,null,function*(){let t=ze(n),i=yield t.getIdToken(e),r=wp(i);G(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Ia(Yf(r.auth_time)),issuedAtTime:Ia(Yf(r.iat)),expirationTime:Ia(Yf(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Yf(n){return Number(n)*1e3}function wp(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Al("JWT malformed, contained fewer than 3 sections"),null;try{let r=Uo(t);return r?JSON.parse(r):(Al("Failed to decode base64 JWT payload"),null)}catch(r){return Al("Caught error parsing JWT payload as JSON",r?.toString()),null}}function R0(n){let e=wp(n);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ea(n,e,t=!1){return C(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Ot&&KR(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function KR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var np=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),t)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ta=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ia(this.lastLoginAt),this.creationTime=Ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Nl(n){return C(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield Ea(n,K0(t,{idToken:i}));G(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Q0(s.providerUserInfo):[],c=QR(n.providerData,o),u=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,p=u?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Ta(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,m)})}function Ip(n){return C(this,null,function*(){let e=ze(n);yield Nl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function QR(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Q0(n){return n.map(e=>{var{providerId:t}=e,i=Uu(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function YR(n,e){return C(this,null,function*(){let t=yield z0(n,{},()=>C(this,null,function*(){let i=_r({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=G0(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ol.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function JR(n,e){return C(this,null,function*(){return Ii(n,"POST","/v2/accounts:revokeToken",wi(n,e))})}var Ca=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):R0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){G(e.length!==0,"internal-error");let t=R0(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return C(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return C(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield YR(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(G(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(G(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(G(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return _i("not implemented")}};function Qi(n,e){G(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ws=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Uu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new np(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ta(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let t=yield Ea(this,this.stsTokenManager.getToken(this.auth,e));return G(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return vp(this,e)}reload(){return Ip(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return C(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Nl(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(Dn(this.auth.app))return Promise.reject(vi(this.auth));let e=yield this.getIdToken();return yield Ea(this,GR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,u,h,p;let m=(i=t.displayName)!==null&&i!==void 0?i:void 0,g=(r=t.email)!==null&&r!==void 0?r:void 0,x=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,N=(o=t.photoURL)!==null&&o!==void 0?o:void 0,$=(c=t.tenantId)!==null&&c!==void 0?c:void 0,W=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,we=(h=t.createdAt)!==null&&h!==void 0?h:void 0,Ie=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:ue,emailVerified:Me,isAnonymous:nn,providerData:nt,stsTokenManager:S}=t;G(ue&&S,e,"internal-error");let v=Ca.fromJSON(this.name,S);G(typeof ue=="string",e,"internal-error"),Qi(m,e.name),Qi(g,e.name),G(typeof Me=="boolean",e,"internal-error"),G(typeof nn=="boolean",e,"internal-error"),Qi(x,e.name),Qi(N,e.name),Qi($,e.name),Qi(W,e.name),Qi(we,e.name),Qi(Ie,e.name);let I=new n({uid:ue,auth:e,email:g,emailVerified:Me,displayName:m,isAnonymous:nn,photoURL:N,phoneNumber:x,tenantId:$,stsTokenManager:v,createdAt:we,lastLoginAt:Ie});return nt&&Array.isArray(nt)&&(I.providerData=nt.map(T=>Object.assign({},T))),W&&(I._redirectEventId=W),I}static _fromIdTokenResponse(e,t,i=!1){return C(this,null,function*(){let r=new Ca;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Nl(s),s})}static _fromGetAccountInfoResponse(e,t,i){return C(this,null,function*(){let r=t.users[0];G(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Q0(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new Ca;c.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ta(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(u,h),u})}};var P0=new Map;function yi(n){Yi(n instanceof Function,"Expected a class definition");let e=P0.get(n);return e?(Yi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,P0.set(n,e),e)}var XR=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(t,i){return C(this,null,function*(){this.storage[t]=i})}_get(t){return C(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return C(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),ip=XR;function Rl(n,e,t){return`firebase:${n}:${e}:${t}`}var kl=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Rl(this.userKey,r.apiKey,s),this.fullPersistenceKey=Rl("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ws._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return C(this,null,function*(){if(!t.length)return new n(yi(ip),e,i);let r=(yield Promise.all(t.map(h=>C(this,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),s=r[0]||yi(ip),o=Rl(i,e.config.apiKey,e.name),c=null;for(let h of t)try{let p=yield h._get(o);if(p){let m=ws._fromJSON(e,p);h!==s&&(c=m),s=h;break}}catch{}let u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,i):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(h=>C(this,null,function*(){if(h!==s)try{yield h._remove(o)}catch{}}))),new n(s,e,i))})}};function D0(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(X0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Y0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ew(e))return"Blackberry";if(tw(e))return"Webos";if(Cp(e))return"Safari";if((e.includes("chrome/")||J0(e))&&!e.includes("edge/"))return"Chrome";if(Z0(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Y0(n=ot()){return/firefox\//i.test(n)}function Cp(n=ot()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function J0(n=ot()){return/crios\//i.test(n)}function X0(n=ot()){return/iemobile/i.test(n)}function Z0(n=ot()){return/android/i.test(n)}function ew(n=ot()){return/blackberry/i.test(n)}function tw(n=ot()){return/webos/i.test(n)}function ql(n=ot()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ZR(n=ot()){var e;return ql(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eP(){return gy()&&document.documentMode===10}function nw(n=ot()){return ql(n)||Z0(n)||tw(n)||ew(n)||/windows phone/i.test(n)||X0(n)}function tP(){try{return!!(window&&window!==window.top)}catch{return!1}}function iw(n,e=[]){let t;switch(n){case"Browser":t=D0(ot());break;case"Worker":t=`${D0(ot())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ln}/${i}`}var rp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function nP(t){return C(this,arguments,function*(n,e={}){return Ii(n,"GET","/v2/passwordPolicy",wi(n,e))})}var iP=6,sp=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:iP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var op=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ml(this),this.idTokenSubscription=new Ml(this),this.beforeStateQueue=new rp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=W0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yi(t)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield kl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let t=yield K0(this,{idToken:e}),i=yield ws._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var t;if(Dn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return C(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield Nl(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=$R()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(Dn(this.app))return Promise.reject(vi(this));let t=e?ze(e):null;return t&&G(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return C(this,null,function*(){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return Dn(this.app)?Promise.reject(vi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Dn(this.app)?Promise.reject(vi(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(yi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield nP(this),t=new sp(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fi("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield JR(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return C(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&yi(e)||this._popupRedirectResolver;G(t,this,"argument-error"),this.redirectPersistenceManager=yield kl.create(this,[yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return C(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&UR(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ji(n){return ze(n)}var Ml=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Iy(t=>this.observer=t)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Wl={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rP(n){Wl=n}function rw(n){return Wl.loadJS(n)}function sP(){return Wl.recaptchaEnterpriseScript}function oP(){return Wl.gapiScript}function sw(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var aP="recaptcha-enterprise",cP="NO_RECAPTCHA",ap=class{constructor(e){this.type=aP,this.auth=Ji(e)}verify(e="verify",t=!1){return C(this,null,function*(){function i(s){return C(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>C(this,null,function*(){zR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let h=new tp(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})}))})}function r(s,o,c){let u=window.grecaptcha;A0(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(cP)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(c=>{if(!t&&A0(window.grecaptcha))r(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=sP();u.length!==0&&(u+=c),rw(u).then(()=>{r(c,s,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})})}};function x0(n,e,t,i=!1){return C(this,null,function*(){let r=new ap(n),s;try{s=yield r.verify(t)}catch{s=yield r.verify(t,!0)}let o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Ll(n,e,t,i){return C(this,null,function*(){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield x0(n,e,t,t==="getOobCode");return i(n,s)}else return i(n,e).catch(s=>C(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield x0(n,e,t,t==="getOobCode");return i(n,o)}else return Promise.reject(s)}))})}function Ep(n,e){let t=pi(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(gr(s,e??{}))return r;Jn(r,"already-initialized")}return t.initialize({options:e})}function lP(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(yi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Tp(n,e,t){let i=Ji(n);G(i._canInitEmulator,i,"emulator-config-failed"),G(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=ow(e),{host:o,port:c}=uP(e),u=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||hP()}function ow(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function uP(n){let e=ow(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:O0(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:O0(o)}}}function O0(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function hP(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ba=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,t){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}};function dP(n,e){return C(this,null,function*(){return Ii(n,"POST","/v1/accounts:signUp",e)})}function fP(n,e){return C(this,null,function*(){return Ra(n,"POST","/v1/accounts:signInWithPassword",wi(n,e))})}function pP(n,e){return C(this,null,function*(){return Ii(n,"POST","/v1/accounts:sendOobCode",wi(n,e))})}function mP(n,e){return C(this,null,function*(){return pP(n,e)})}function gP(n,e){return C(this,null,function*(){return Ra(n,"POST","/v1/accounts:signInWithEmailLink",wi(n,e))})}function _P(n,e){return C(this,null,function*(){return Ra(n,"POST","/v1/accounts:signInWithEmailLink",wi(n,e))})}var Sa=class n extends ba{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return C(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ll(e,t,"signInWithPassword",fP);case"emailLink":return gP(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}})}_linkToIdToken(e,t){return C(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ll(e,i,"signUpPassword",dP);case"emailLink":return _P(e,{idToken:t,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Jf(n,e){return C(this,null,function*(){return Ra(n,"POST","/v1/accounts:signInWithIdp",wi(n,e))})}function yP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vP(n){let e=ns(is(n)).link,t=e?ns(is(e)).deep_link_id:null,i=ns(is(n)).deep_link_id;return(i?ns(is(i)).link:null)||i||t||e||n}var Vl=class n{constructor(e){var t,i,r,s,o,c;let u=ns(is(e)),h=(t=u.apiKey)!==null&&t!==void 0?t:null,p=(i=u.oobCode)!==null&&i!==void 0?i:null,m=yP((r=u.mode)!==null&&r!==void 0?r:null);G(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=vP(e);try{return new n(t)}catch{return null}}};var aw=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return Sa._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=Vl.parseLink(i);return G(r,"argument-error"),Sa._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Fl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var cp=class extends Fl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function wP(n,e){return C(this,null,function*(){return Ra(n,"POST","/v1/accounts:signUp",wi(n,e))})}var Is=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return C(this,null,function*(){let s=yield ws._fromIdTokenResponse(e,i,r),o=N0(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return C(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=N0(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function N0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var lp=class n extends Ot{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function cw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?lp._fromErrorAndOperation(n,s,e,i):s})}function IP(n,e,t=!1){return C(this,null,function*(){let i=yield Ea(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Is._forOperation(n,"link",i)})}function CP(n,e,t=!1){return C(this,null,function*(){let{auth:i}=n;if(Dn(i.app))return Promise.reject(vi(i));let r="reauthenticate";try{let s=yield Ea(n,cw(i,r,e,n),t);G(s.idToken,i,"internal-error");let o=wp(s.idToken);G(o,i,"internal-error");let{sub:c}=o;return G(n.uid===c,i,"user-mismatch"),Is._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Jn(i,"user-mismatch"),s}})}function lw(n,e,t=!1){return C(this,null,function*(){if(Dn(n.app))return Promise.reject(vi(n));let i="signIn",r=yield cw(n,i,e),s=yield Is._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function bp(n,e){return C(this,null,function*(){return lw(Ji(n),e)})}function EP(n,e,t){var i;G(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),G(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(G(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(G(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function uw(n){return C(this,null,function*(){let e=Ji(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Sp(n,e,t){return C(this,null,function*(){let i=Ji(n),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&EP(i,r,t),yield Ll(i,r,"getOobCode",mP)})}function Ap(n,e,t){return C(this,null,function*(){if(Dn(n.app))return Promise.reject(vi(n));let i=Ji(n),o=yield Ll(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wP).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&uw(n),u}),c=yield Is._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(c.user),c})}function Rp(n,e,t){return Dn(n.app)?Promise.reject(vi(n)):bp(ze(n),aw.credential(e,t)).catch(i=>C(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&uw(n),i}))}function Pa(n,e,t,i){return ze(n).onIdTokenChanged(e,t,i)}function Pp(n,e,t){return ze(n).beforeAuthStateChanged(e,t)}function Da(n,e,t,i){return ze(n).onAuthStateChanged(e,t,i)}function Hl(n){return ze(n).signOut()}var Ul="__sak";var Bl=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ul,"1"),this.storage.removeItem(Ul),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function TP(){let n=ot();return Cp(n)||ql(n)}var bP=1e3,SP=10,AP=(()=>{class n extends Bl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=TP()&&tP(),this.fallbackToPolling=nw(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}let r=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(r);if(t.newValue!==c)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!i)return}let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);eP()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,SP):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},bP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return C(this,null,function*(){yield Oi(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return C(this,null,function*(){let i=yield Oi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return C(this,null,function*(){yield Oi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),hw=AP;var RP=(()=>{class n extends Bl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),Dp=RP;function PP(n){return Promise.all(n.map(e=>C(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var DP=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return C(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let u=Array.from(c).map(p=>C(this,null,function*(){return p(i.origin,o)})),h=yield PP(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function dw(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var up=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return C(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let h=dw("",20);r.port1.start();let p=setTimeout(()=>{u(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(m){let g=m;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(g.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Yn(){return window}function xP(n){Yn().location.href=n}function fw(){return typeof Yn().WorkerGlobalScope<"u"&&typeof Yn().importScripts=="function"}function OP(){return C(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function NP(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function kP(){return fw()?self:null}var pw="firebaseLocalStorageDb",MP=1,jl="firebaseLocalStorage",mw="fbase_key",Or=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function zl(n,e){return n.transaction([jl],e?"readwrite":"readonly").objectStore(jl)}function LP(){let n=indexedDB.deleteDatabase(pw);return new Or(n).toPromise()}function hp(){let n=indexedDB.open(pw,MP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(jl,{keyPath:mw})}catch(r){t(r)}}),n.addEventListener("success",()=>C(this,null,function*(){let i=n.result;i.objectStoreNames.contains(jl)?e(i):(i.close(),yield LP(),e(yield hp()))}))})}function k0(n,e,t){return C(this,null,function*(){let i=zl(n,!0).put({[mw]:e,value:t});return new Or(i).toPromise()})}function VP(n,e){return C(this,null,function*(){let t=zl(n,!1).get(e),i=yield new Or(t).toPromise();return i===void 0?null:i.value})}function M0(n,e){let t=zl(n,!0).delete(e);return new Or(t).toPromise()}var FP=800,UP=3,BP=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return C(this,null,function*(){return this.db?this.db:(this.db=yield hp(),this.db)})}_withRetries(t){return C(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>UP)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return C(this,null,function*(){return fw()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return C(this,null,function*(){this.receiver=DP._getInstance(kP()),this.receiver._subscribe("keyChanged",(t,i)=>C(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>C(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return C(this,null,function*(){var t,i;if(this.activeServiceWorker=yield OP(),!this.activeServiceWorker)return;this.sender=new up(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return C(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||NP()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return C(this,null,function*(){try{if(!indexedDB)return!1;let t=yield hp();return yield k0(t,Ul,"1"),yield M0(t,Ul),!0}catch{}return!1})}_withPendingWrite(t){return C(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(r=>k0(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return C(this,null,function*(){let i=yield this._withRetries(r=>VP(r,t));return this.localCache[t]=i,i})}_remove(t){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(i=>M0(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return C(this,null,function*(){let t=yield this._withRetries(s=>{let o=zl(s,!1).getAll();return new Or(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>C(this,null,function*(){return this._poll()}),FP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),gw=BP;var vL=sw("rcb"),wL=new xr(3e4,6e4);function jP(n,e){return e?yi(e):(G(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Aa=class extends ba{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jf(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function $P(n){return lw(n.auth,new Aa(n),n.bypassAuthState)}function qP(n){let{auth:e,user:t}=n;return G(t,e,"internal-error"),CP(t,new Aa(n),n.bypassAuthState)}function WP(n){return C(this,null,function*(){let{auth:e,user:t}=n;return G(t,e,"internal-error"),IP(t,new Aa(n),n.bypassAuthState)})}var dp=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>C(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return C(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $P;case"linkViaPopup":case"linkViaRedirect":return WP;case"reauthViaPopup":case"reauthViaRedirect":return qP;default:Jn(this.auth,"internal-error")}}resolve(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var IL=new xr(2e3,1e4);var HP="pendingRedirect",Pl=new Map,fp=class n extends dp{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return C(this,null,function*(){let e=Pl.get(this.auth._key());if(!e){try{let i=(yield zP(this.resolver,this.auth))?yield Oi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Pl.set(this.auth._key(),e)}return this.bypassAuthState||Pl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return C(this,null,function*(){if(e.type==="signInViaRedirect")return Oi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Oi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return C(this,null,function*(){})}cleanUp(){}};function zP(n,e){return C(this,null,function*(){let t=QP(e),i=KP(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function GP(n,e){Pl.set(n._key(),e)}function KP(n){return yi(n._redirectPersistence)}function QP(n){return Rl(HP,n.config.apiKey,n.name)}function YP(n,e,t=!1){return C(this,null,function*(){if(Dn(n.app))return Promise.reject(vi(n));let i=Ji(n),r=jP(i,e),o=yield new fp(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var JP=10*60*1e3,pp=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!_w(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Dr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JP&&this.cachedEventUids.clear(),this.cachedEventUids.has(L0(e))}saveEventToCache(e){this.cachedEventUids.add(L0(e)),this.lastProcessedEventTime=Date.now()}};function L0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _w({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function XP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _w(n);default:return!1}}function ZP(t){return C(this,arguments,function*(n,e={}){return Ii(n,"GET","/v1/projects",e)})}var eD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tD=/^https?/;function nD(n){return C(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield ZP(n);for(let t of e)try{if(iD(t))return}catch{}Jn(n,"unauthorized-domain")})}function iD(n){let e=Zf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!tD.test(t))return!1;if(eD.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var rD=new xr(3e4,6e4);function V0(){let n=Yn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function sD(n){return new Promise((e,t)=>{var i,r,s;function o(){V0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{V0(),t(Dr(n,"network-request-failed"))},timeout:rD.get()})}if(!((r=(i=Yn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Yn().gapi)===null||s===void 0)&&s.load)o();else{let c=sw("iframefcb");return Yn()[c]=()=>{gapi.load?o():t(Dr(n,"network-request-failed"))},rw(`${oP()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw Dl=null,e})}var Dl=null;function oD(n){return Dl=Dl||sD(n),Dl}var aD=new xr(5e3,15e3),cD="__/auth/iframe",lD="emulator/auth/iframe",uD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dD(n){let e=n.config;G(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?yp(e,lD):`https://${n.config.authDomain}/${cD}`,i={apiKey:e.apiKey,appName:n.name,v:ln},r=hD.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${_r(i).slice(1)}`}function fD(n){return C(this,null,function*(){let e=yield oD(n),t=Yn().gapi;return G(t,n,"internal-error"),e.open({where:document.body,url:dD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uD,dontclear:!0},i=>new Promise((r,s)=>C(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Dr(n,"network-request-failed"),c=Yn().setTimeout(()=>{s(o)},aD.get());function u(){Yn().clearTimeout(c),r(i)}i.ping(u).then(u,()=>{s(o)})})))})}var pD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mD=500,gD=600,_D="_blank",yD="http://localhost",$l=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function vD(n,e,t,i=mD,r=gD){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",u=Object.assign(Object.assign({},pD),{width:i.toString(),height:r.toString(),top:s,left:o}),h=ot().toLowerCase();t&&(c=J0(h)?_D:t),Y0(h)&&(e=e||yD,u.scrollbars="yes");let p=Object.entries(u).reduce((g,[x,N])=>`${g}${x}=${N},`,"");if(ZR(h)&&c!=="_self")return wD(e||"",c),new $l(null);let m=window.open(e||"",c,p);G(m,n,"popup-blocked");try{m.focus()}catch{}return new $l(m)}function wD(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var ID="__/auth/handler",CD="emulator/auth/handler",ED=encodeURIComponent("fac");function F0(n,e,t,i,r,s){return C(this,null,function*(){G(n.config.authDomain,n,"auth-domain-config-required"),G(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ln,eventId:r};if(e instanceof Fl){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",jo(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,m]of Object.entries(s||{}))o[p]=m}if(e instanceof cp){let p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let p of Object.keys(c))c[p]===void 0&&delete c[p];let u=yield n._getAppCheckToken(),h=u?`#${ED}=${encodeURIComponent(u)}`:"";return`${TD(n)}?${_r(c).slice(1)}${h}`})}function TD({config:n}){return n.emulator?yp(n,CD):`https://${n.authDomain}/${ID}`}var Xf="webStorageSupport",mp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dp,this._completeRedirectFn=YP,this._overrideRedirectResult=GP}_openPopup(e,t,i,r){return C(this,null,function*(){var s;Yi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield F0(e,t,i,Zf(),r);return vD(e,o,dw())})}_openRedirect(e,t,i,r){return C(this,null,function*(){yield this._originValidation(e);let s=yield F0(e,t,i,Zf(),r);return xP(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Yi(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return C(this,null,function*(){let t=yield fD(e),i=new pp(e);return t.register("authEvent",r=>(G(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xf,{type:Xf},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Xf];o!==void 0&&t(!!o),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nw()||Cp()||ql()}},yw=mp;var U0="@firebase/auth",B0="1.7.5";var gp=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function bD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SD(n){cn(new Ct("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iw(n)},h=new op(i,r,s,u);return lP(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),cn(new Ct("auth-internal",e=>{let t=Ji(e.getProvider("auth").getImmediate());return(i=>new gp(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ge(U0,B0,bD(n)),ge(U0,B0,"esm2017")}var AD=5*60,RD=id("authIdTokenMaxAge")||AD,j0=null,PD=n=>e=>C(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>RD)return;let r=t?.token;j0!==r&&(j0=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function xp(n=Wn()){let e=pi(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ep(n,{popupRedirectResolver:yw,persistence:[gw,hw,Dp]}),i=id("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=PD(s.toString());Pp(t,o,()=>o(t.currentUser)),Pa(t,c=>o(c))}}let r=td("auth");return r&&Tp(t,`http://${r}`),t}function DD(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}rP({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=Dr("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",DD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SD("Browser");function ww(n){return new ro(function(e){var t=Pa(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var Iw="auth",Mn=class{constructor(e){return e}},Ci=class{constructor(){return gi(Iw)}};var Op=new Ce("angularfire2.auth-instances");function _x(n,e){let t=Ki(Iw,n,e);return t&&new Mn(t)}function yx(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Mn(i)}}var vx={provide:Ci,deps:[[new Fe,Op]]},wx={provide:Mn,useFactory:_x,deps:[[new Fe,Op],Xt]};function Cw(n,...e){return ge("angularfire",Nn.full,"auth"),Pt([wx,vx,{provide:Op,useFactory:yx(n),multi:!0,deps:[xe,zt,Qn,kn,[new Fe,Kn],...e]}])}var Ew=at(ww,!0);var Tw=at(Ap,!0);var bw=at(xp,!0);var Sw=at(Sp,!0);var Aw=at(Rp,!0);var Te=class{constructor(e){return e}},Rw="database",kp=class{constructor(){return gi(Rw)}};var Mp=new Ce("angularfire2.database-instances");function Ix(n,e){let t=Ki(Rw,n,e);return t&&new Te(t)}function Cx(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Te(i)}}var Ex={provide:kp,deps:[[new Fe,Mp]]},Tx={provide:Te,useFactory:Ix,deps:[[new Fe,Mp],Xt]};function Pw(n,...e){return ge("angularfire",Nn.full,"rtdb"),Pt([Tx,Ex,{provide:Mp,useFactory:Cx(n),multi:!0,deps:[xe,zt,Qn,kn,[new Fe,Ci],[new Fe,Kn],...e]}])}var Ei=at(Rr,!0),Dw=at(C0,!0);var Gl=at(fn,!0);var Lt=at(Ne,!0);var xa=at(El,!0);var xw=n=>{if(n.title.length<=4)throw new Error("Title must be more than 4 characters!");if(n.description.length<=7)throw new Error("Description must be more than 7 characters!");if(n.shortDescription.length<=7)throw new Error("Short description must be more than 7 characters!");if(!n.image)throw new Error("Please provide an image!")},Ow=(n,e,t)=>{if(n.length<1)throw new Error("Please provide an email!");if(!n.includes("@"))throw new Error("Please provide a valid email!");if(t.includes(e))throw new Error("Username is already in use!");if(e.length<3)throw new Error("Username must be more than 3 characters!")},Nw=(n,e)=>{if(n.length<1)throw new Error("Please provide an email!");if(e.length<1)throw new Error("Please provide a password!")},kw=n=>{if(!n)throw new Error("Comment must be more than 3 characters!");if(n.length<3)throw new Error("Comment must be more than 3 characters!")},Mw=n=>{if(!n)throw new Error("Please provide an image!")},Lw=n=>{if(n.length<6)throw new Error("New password must be more than 6 characters!")};var ke=(()=>{class n{fireauth;router;db;userInfo="";user$=new Ft(null);currentUser=null;constructor(t,i,r){this.fireauth=t,this.router=i,this.db=r,Da(this.fireauth,s=>{this.user$.next(s)})}login(t,i){return C(this,null,function*(){try{Nw(t,i);let r=yield Aw(this.fireauth,t,i);return this.router.navigate(["/home"]),r.user}catch(r){throw r.message.includes("(auth/invalid-credential)")?new Error("Wrong email or password!"):r}})}register(t,i,r){return C(this,null,function*(){try{let s=Object.keys((yield Ei(Ne(this.db,"users"))).val());s&&Ow(t,r,s);let o=yield Tw(this.fireauth,t,i);return this.userInfo=o.user,this.router.navigate(["/home"]),o.user}catch(s){throw s.message.includes("auth/email-already-in-use")?new Error("Email is already in use!"):s.message.includes("auth/weak-password")?new Error("Weak password! Password should be at least 6 characters!"):s}})}createUser(t,i){return C(this,null,function*(){try{let r=Ne(this.db,`users/${t}`);yield wa(r,{username:t,email:this.userInfo.email,uid:this.userInfo.uid,avatar:i,myPosts:{uid:""}})}catch(r){throw r}})}logout(){return C(this,null,function*(){try{this.router.navigate([this.router.url]).then(()=>{window.location.reload()}),yield Hl(this.fireauth)}catch(t){throw t}})}static \u0275fac=function(i){return new(i||n)(re(Mn),re(jt),re(Te))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Vw=(()=>{class n{auth;db;router;userSubject=null;userCredentials$=null;constructor(t,i,r){this.auth=t,this.db=i,this.router=r}ngOnInit(){this.auth.user$.subscribe(i=>this.userSubject=i);let t=Ne(this.db,"users");fn(t,i=>{let r=i.val();if(r){let s=Object.values(r).filter(o=>o.email===this.userSubject.email);this.userCredentials$=s[0]}})}toggleProfileView(){this.router.navigate([`/profile/${this.userCredentials$.username}`])}logout(){return C(this,null,function*(){yield this.auth.logout()})}static \u0275fac=function(i){return new(i||n)(k(ke),k(Te),k(jt))};static \u0275cmp=F({type:n,selectors:[["avatar"]],standalone:!0,features:[j],decls:12,vars:2,consts:[[1,"avatar"],[1,"image-fit"],["alt","profile picture",3,"src"],[1,"dropdown__menu"],[3,"click"],[1,"pi","pi-wrench"],[1,"pi","pi-power-off"]],template:function(i,r){i&1&&(y(0,"div",0)(1,"div",1),O(2,"img",2),_(),y(3,"p"),M(4),_(),y(5,"div",3)(6,"a",4),z("click",function(){return r.toggleProfileView()}),M(7,"Profile "),O(8,"span",5),_(),y(9,"a",4),z("click",function(){return r.logout()}),M(10,"Logout "),O(11,"span",6),_()()()),i&2&&(E(2),R("src",r.userCredentials$==null?null:r.userCredentials$.avatar,En),E(2),uo("Hello ",r.userCredentials$==null?null:r.userCredentials$.username,""))},styles:[".avatar[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.avatar[_ngcontent-%COMP%]:hover{cursor:pointer}.avatar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:1rem;margin-top:.7rem;color:var(--c-primary)}.avatar[_ngcontent-%COMP%]   .image-fit[_ngcontent-%COMP%]{padding-bottom:80px;width:80px;border-radius:50%;overflow:hidden}.avatar[_ngcontent-%COMP%]   .dropdown__menu[_ngcontent-%COMP%]{display:none;position:absolute;top:100%;left:-13%;background-color:#fff;box-shadow:0 8px 16px #0003;z-index:1;min-width:160px}.avatar[_ngcontent-%COMP%]   .dropdown__menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;padding:12px 16px;text-decoration:none;display:block}.avatar[_ngcontent-%COMP%]   .dropdown__menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;color:var(--c-primary);background-color:#f5f5f5}.avatar[_ngcontent-%COMP%]:hover   .dropdown__menu[_ngcontent-%COMP%]{display:block;animation:fade__down ease-out .5s}@media (max-width: 768px){.avatar[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:7px}.avatar[_ngcontent-%COMP%]   .dropdown__menu[_ngcontent-%COMP%]{display:none;position:absolute;left:20%;top:100%}}"]})}return n})();var Fw=(()=>{class n{auth;user=null;constructor(t){this.auth=t}ngOnInit(){this.auth.user$.subscribe(t=>this.user=t)}static \u0275fac=function(i){return new(i||n)(k(ke))};static \u0275cmp=F({type:n,selectors:[["app-navbar"]],standalone:!0,features:[j],decls:16,vars:0,consts:[[1,"navbar"],[1,"flex-1"],[1,"nav__list"],[1,"nav__item"],["routerLink","/home","routerLinkActive","active__button","ariaCurrentWhenActive","page",1,"nav__link"],["routerLink","/createPost","routerLinkActive","active__button","ariaCurrentWhenActive","page",1,"nav__link"],["routerLink","/allPosts","routerLinkActive","active__button","ariaCurrentWhenActive","page",1,"nav__link"],["routerLink","/about","routerLinkActive","active__button","ariaCurrentWhenActive","page",1,"nav__link"]],template:function(i,r){i&1&&(y(0,"nav",0)(1,"div",1),O(2,"avatar"),_(),y(3,"ul",2)(4,"li",3)(5,"a",4),M(6,"Home"),_()(),y(7,"li",3)(8,"a",5),M(9,"Create Post"),_()(),y(10,"li",3)(11,"a",6),M(12,"All Posts"),_()(),y(13,"li",3)(14,"a",7),M(15,"About"),_()()()())},dependencies:[Oc,ly,Vw],styles:[".navbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 2rem;background-color:#fff;box-shadow:0 4px 6px #0000001a;border-bottom:2px solid white;margin-bottom:20px}.flex-1[_ngcontent-%COMP%]{flex:1}.nav__list[_ngcontent-%COMP%]{display:flex;align-items:center;list-style:none}.nav__link[_ngcontent-%COMP%]{font-size:large;color:#333;text-decoration:none;padding:.5rem 1rem;border-radius:.25rem;transition:background-color .3s,color .3s;width:3cm}.nav__link[_ngcontent-%COMP%]:hover{background-color:#fff;color:var(--c-primary);cursor:pointer}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{flex-wrap:wrap;flex-direction:column-reverse}.nav__list[_ngcontent-%COMP%]{flex-direction:column;width:100%;padding-top:1rem;border-top:1px solid white}.nav__item[_ngcontent-%COMP%]{margin-left:0;margin-bottom:1rem}.nav__link[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})}return n})();function bx(n,e){n&1&&O(0,"app-navbar")}var Uw=(()=>{class n{auth;user=null;constructor(t){this.auth=t}ngOnInit(){this.auth.user$?.subscribe(t=>{this.user=t})}static \u0275fac=function(i){return new(i||n)(k(ke))};static \u0275cmp=F({type:n,selectors:[["app-root"]],standalone:!0,features:[j],decls:3,vars:1,consts:[[1,"main"],[4,"ngIf"]],template:function(i,r){i&1&&(y(0,"main",0),B(1,bx,1,0,"app-navbar",1),_(),O(2,"router-outlet")),i&2&&(E(),R("ngIf",r.user))},dependencies:[$h,de,Fw],styles:[".main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.main[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{animation:popIn 1s ease-out}.main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:auto}"]})}return n})();var Cs=class n{static isArray(e,t=!0){return Array.isArray(e)&&(t||e.length!==0)}static isObject(e,t=!0){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&(t||Object.keys(e).length!==0)}static equals(e,t,i){return i?this.resolveFieldData(e,i)===this.resolveFieldData(t,i):this.equalsByValue(e,t)}static equalsByValue(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var i=Array.isArray(e),r=Array.isArray(t),s,o,c;if(i&&r){if(o=e.length,o!=t.length)return!1;for(s=o;s--!==0;)if(!this.equalsByValue(e[s],t[s]))return!1;return!0}if(i!=r)return!1;var u=this.isDate(e),h=this.isDate(t);if(u!=h)return!1;if(u&&h)return e.getTime()==t.getTime();var p=e instanceof RegExp,m=t instanceof RegExp;if(p!=m)return!1;if(p&&m)return e.toString()==t.toString();var g=Object.keys(e);if(o=g.length,o!==Object.keys(t).length)return!1;for(s=o;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,g[s]))return!1;for(s=o;s--!==0;)if(c=g[s],!this.equalsByValue(e[c],t[c]))return!1;return!0}return e!==e&&t!==t}static resolveFieldData(e,t){if(e&&t){if(this.isFunction(t))return t(e);if(t.indexOf(".")==-1)return e[t];{let i=t.split("."),r=e;for(let s=0,o=i.length;s<o;++s){if(r==null)return null;r=r[i[s]]}return r}}else return null}static isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}static reorderArray(e,t,i){let r;e&&t!==i&&(i>=e.length&&(i%=e.length,t%=e.length),e.splice(i,0,e.splice(t,1)[0]))}static insertIntoOrderedArray(e,t,i,r){if(i.length>0){let s=!1;for(let o=0;o<i.length;o++)if(this.findIndexInList(i[o],r)>t){i.splice(o,0,e),s=!0;break}s||i.push(e)}else i.push(e)}static findIndexInList(e,t){let i=-1;if(t){for(let r=0;r<t.length;r++)if(t[r]==e){i=r;break}}return i}static contains(e,t){if(e!=null&&t&&t.length){for(let i of t)if(this.equals(e,i))return!0}return!1}static removeAccents(e){return e&&(e=e.normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"")),e}static isDate(e){return Object.prototype.toString.call(e)==="[object Date]"}static isEmpty(e){return e==null||e===""||Array.isArray(e)&&e.length===0||!this.isDate(e)&&typeof e=="object"&&Object.keys(e).length===0}static isNotEmpty(e){return!this.isEmpty(e)}static compare(e,t,i,r=1){let s=-1,o=this.isEmpty(e),c=this.isEmpty(t);return o&&c?s=0:o?s=r:c?s=-r:typeof e=="string"&&typeof t=="string"?s=e.localeCompare(t,i,{numeric:!0}):s=e<t?-1:e>t?1:0,s}static sort(e,t,i=1,r,s=1){let o=n.compare(e,t,r,i),c=i;return(n.isEmpty(e)||n.isEmpty(t))&&(c=s===1?i:s),c*o}static merge(e,t){if(!(e==null&&t==null)){{if((e==null||typeof e=="object")&&(t==null||typeof t=="object"))return q(q({},e||{}),t||{});if((e==null||typeof e=="string")&&(t==null||typeof t=="string"))return[e||"",t||""].join(" ")}return t||e}}static isPrintableCharacter(e=""){return this.isNotEmpty(e)&&e.length===1&&e.match(/\S| /)}static getItemValue(e,...t){return this.isFunction(e)?e(...t):e}static findLastIndex(e,t){let i=-1;if(this.isNotEmpty(e))try{i=e.findLastIndex(t)}catch{i=e.lastIndexOf([...e].reverse().find(t))}return i}static findLast(e,t){let i;if(this.isNotEmpty(e))try{i=e.findLast(t)}catch{i=[...e].reverse().find(t)}return i}static deepEquals(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var i=Array.isArray(e),r=Array.isArray(t),s,o,c;if(i&&r){if(o=e.length,o!=t.length)return!1;for(s=o;s--!==0;)if(!this.deepEquals(e[s],t[s]))return!1;return!0}if(i!=r)return!1;var u=e instanceof Date,h=t instanceof Date;if(u!=h)return!1;if(u&&h)return e.getTime()==t.getTime();var p=e instanceof RegExp,m=t instanceof RegExp;if(p!=m)return!1;if(p&&m)return e.toString()==t.toString();var g=Object.keys(e);if(o=g.length,o!==Object.keys(t).length)return!1;for(s=o;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,g[s]))return!1;for(s=o;s--!==0;)if(c=g[s],!this.deepEquals(e[c],t[c]))return!1;return!0}return e!==e&&t!==t}},Bw=0;function gn(n="pn_id_"){return Bw++,`${n}${Bw}`}function Sx(){let n=[],e=(s,o)=>{let c=n.length>0?n[n.length-1]:{key:s,value:o},u=c.value+(c.key===s?0:o)+2;return n.push({key:s,value:u}),u},t=s=>{n=n.filter(o=>o.value!==s)},i=()=>n.length>0?n[n.length-1].value:0,r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,o,c)=>{o&&(o.style.zIndex=String(e(s,c)))},clear:s=>{s&&(t(r(s)),s.style.zIndex="")},getCurrent:()=>i()}}var Xi=Sx();var jw=["*"];var Et=(()=>{class n{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static IN="in";static LESS_THAN="lt";static LESS_THAN_OR_EQUAL_TO="lte";static GREATER_THAN="gt";static GREATER_THAN_OR_EQUAL_TO="gte";static BETWEEN="between";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static DATE_IS="dateIs";static DATE_IS_NOT="dateIsNot";static DATE_BEFORE="dateBefore";static DATE_AFTER="dateAfter"}return n})();var ye=(()=>{class n{messageSource=new Vt;clearSource=new Vt;messageObserver=this.messageSource.asObservable();clearObserver=this.clearSource.asObservable();add(t){t&&this.messageSource.next(t)}addAll(t){t&&t.length&&this.messageSource.next(t)}clear(t){this.clearSource.next(t||null)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();var Ti=(()=>{class n{ripple=!1;inputStyle=Vi("outlined");overlayOptions={};csp=Vi({nonce:void 0});filterMatchModeOptions={text:[Et.STARTS_WITH,Et.CONTAINS,Et.NOT_CONTAINS,Et.ENDS_WITH,Et.EQUALS,Et.NOT_EQUALS],numeric:[Et.EQUALS,Et.NOT_EQUALS,Et.LESS_THAN,Et.LESS_THAN_OR_EQUAL_TO,Et.GREATER_THAN,Et.GREATER_THAN_OR_EQUAL_TO],date:[Et.DATE_IS,Et.DATE_IS_NOT,Et.DATE_BEFORE,Et.DATE_AFTER]};translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List",selectColor:"Select a color",removeLabel:"Remove",browseFiles:"Browse Files",maximizeLabel:"Maximize"}};zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100};translationSource=new Vt;translationObserver=this.translationSource.asObservable();getTranslation(t){return this.translation[t]}setTranslation(t){this.translation=q(q({},this.translation),t),this.translationSource.next(this.translation)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$w=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=F({type:n,selectors:[["p-header"]],standalone:!0,features:[j],ngContentSelectors:jw,decls:1,vars:0,template:function(i,r){i&1&&(ci(),Vn(0))},encapsulation:2})}return n})(),qw=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=F({type:n,selectors:[["p-footer"]],standalone:!0,features:[j],ngContentSelectors:jw,decls:1,vars:0,template:function(i,r){i&1&&(ci(),Vn(0))},encapsulation:2})}return n})(),Xn=(()=>{class n{template;type;name;constructor(t){this.template=t}getType(){return this.name}static \u0275fac=function(i){return new(i||n)(k(Zg))};static \u0275dir=je({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:[0,"pTemplate","name"]},standalone:!0})}return n})(),Zn=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ze({type:n});static \u0275inj=Xe({})}return n})();var ve=(()=>{class n{static zindex=1e3;static calculatedScrollbarWidth=null;static calculatedScrollbarHeight=null;static browser;static addClass(t,i){t&&i&&(t.classList?t.classList.add(i):t.className+=" "+i)}static addMultipleClasses(t,i){if(t&&i)if(t.classList){let r=i.trim().split(" ");for(let s=0;s<r.length;s++)t.classList.add(r[s])}else{let r=i.split(" ");for(let s=0;s<r.length;s++)t.className+=" "+r[s]}}static removeClass(t,i){t&&i&&(t.classList?t.classList.remove(i):t.className=t.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))}static removeMultipleClasses(t,i){t&&i&&[i].flat().filter(Boolean).forEach(r=>r.split(" ").forEach(s=>this.removeClass(t,s)))}static hasClass(t,i){return t&&i?t.classList?t.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(t.className):!1}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(i){return i!==t})}static find(t,i){return Array.from(t.querySelectorAll(i))}static findSingle(t,i){return this.isElement(t)?t.querySelector(i):null}static index(t){let i=t.parentNode.childNodes,r=0;for(var s=0;s<i.length;s++){if(i[s]==t)return r;i[s].nodeType==1&&r++}return-1}static indexWithinGroup(t,i){let r=t.parentNode?t.parentNode.childNodes:[],s=0;for(var o=0;o<r.length;o++){if(r[o]==t)return s;r[o].attributes&&r[o].attributes[i]&&r[o].nodeType==1&&s++}return-1}static appendOverlay(t,i,r="self"){r!=="self"&&t&&i&&this.appendChild(t,i)}static alignOverlay(t,i,r="self",s=!0){t&&i&&(s&&(t.style.minWidth=`${n.getOuterWidth(i)}px`),r==="self"?this.relativePosition(t,i):this.absolutePosition(t,i))}static relativePosition(t,i,r=!0){let s=Ie=>{if(Ie)return getComputedStyle(Ie).getPropertyValue("position")==="relative"?Ie:s(Ie.parentElement)},o=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),c=i.offsetHeight??i.getBoundingClientRect().height,u=i.getBoundingClientRect(),h=this.getWindowScrollTop(),p=this.getWindowScrollLeft(),m=this.getViewport(),x=s(t)?.getBoundingClientRect()||{top:-1*h,left:-1*p},N,$;u.top+c+o.height>m.height?(N=u.top-x.top-o.height,t.style.transformOrigin="bottom",u.top+N<0&&(N=-1*u.top)):(N=c+u.top-x.top,t.style.transformOrigin="top");let W=u.left+o.width-m.width,we=u.left-x.left;o.width>m.width?$=(u.left-x.left)*-1:W>0?$=we-W:$=u.left-x.left,t.style.top=N+"px",t.style.left=$+"px",r&&(t.style.marginTop=origin==="bottom"?"calc(var(--p-anchor-gutter) * -1)":"calc(var(--p-anchor-gutter))")}static absolutePosition(t,i,r=!0){let s=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),o=s.height,c=s.width,u=i.offsetHeight??i.getBoundingClientRect().height,h=i.offsetWidth??i.getBoundingClientRect().width,p=i.getBoundingClientRect(),m=this.getWindowScrollTop(),g=this.getWindowScrollLeft(),x=this.getViewport(),N,$;p.top+u+o>x.height?(N=p.top+m-o,t.style.transformOrigin="bottom",N<0&&(N=m)):(N=u+p.top+m,t.style.transformOrigin="top"),p.left+c>x.width?$=Math.max(0,p.left+g+h-c):$=p.left+g,t.style.top=N+"px",t.style.left=$+"px",r&&(t.style.marginTop=origin==="bottom"?"calc(var(--p-anchor-gutter) * -1)":"calc(var(--p-anchor-gutter))")}static getParents(t,i=[]){return t.parentNode===null?i:this.getParents(t.parentNode,i.concat([t.parentNode]))}static getScrollableParents(t){let i=[];if(t){let r=this.getParents(t),s=/(auto|scroll)/,o=c=>{let u=window.getComputedStyle(c,null);return s.test(u.getPropertyValue("overflow"))||s.test(u.getPropertyValue("overflowX"))||s.test(u.getPropertyValue("overflowY"))};for(let c of r){let u=c.nodeType===1&&c.dataset.scrollselectors;if(u){let h=u.split(",");for(let p of h){let m=this.findSingle(c,p);m&&o(m)&&i.push(m)}}c.nodeType!==9&&o(c)&&i.push(c)}}return i}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let i=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",i}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let i=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",i}static getHiddenElementDimensions(t){let i={};return t.style.visibility="hidden",t.style.display="block",i.width=t.offsetWidth,i.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",i}static scrollInView(t,i){let r=getComputedStyle(t).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,o=getComputedStyle(t).getPropertyValue("paddingTop"),c=o?parseFloat(o):0,u=t.getBoundingClientRect(),p=i.getBoundingClientRect().top+document.body.scrollTop-(u.top+document.body.scrollTop)-s-c,m=t.scrollTop,g=t.clientHeight,x=this.getOuterHeight(i);p<0?t.scrollTop=m+p:p+x>g&&(t.scrollTop=m+p-g+x)}static fadeIn(t,i){t.style.opacity=0;let r=+new Date,s=0,o=function(){s=+t.style.opacity.replace(",",".")+(new Date().getTime()-r)/i,t.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16))};o()}static fadeOut(t,i){var r=1,s=50,o=i,c=s/o;let u=setInterval(()=>{r=r-c,r<=0&&(r=0,clearInterval(u)),t.style.opacity=r},s)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,i){var r=Element.prototype,s=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(o){return[].indexOf.call(document.querySelectorAll(o),this)!==-1};return s.call(t,i)}static getOuterWidth(t,i){let r=t.offsetWidth;if(i){let s=getComputedStyle(t);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(t){let i=getComputedStyle(t);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(t){let i=getComputedStyle(t);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(t){let i=t.offsetWidth,r=getComputedStyle(t);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(t){let i=t.offsetWidth,r=getComputedStyle(t);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(t){let i=t.offsetHeight,r=getComputedStyle(t);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(t,i){let r=t.offsetHeight;if(i){let s=getComputedStyle(t);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(t){let i=t.offsetHeight,r=getComputedStyle(t);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(t){let i=t.offsetWidth,r=getComputedStyle(t);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let t=window,i=document,r=i.documentElement,s=i.getElementsByTagName("body")[0],o=t.innerWidth||r.clientWidth||s.clientWidth,c=t.innerHeight||r.clientHeight||s.clientHeight;return{width:o,height:c}}static getOffset(t){var i=t.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,i){let r=t.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,t)}static getUserAgent(){if(navigator&&this.isClient())return navigator.userAgent}static isIE(){var t=window.navigator.userAgent,i=t.indexOf("MSIE ");if(i>0)return!0;var r=t.indexOf("Trident/");if(r>0){var s=t.indexOf("rv:");return!0}var o=t.indexOf("Edge/");return o>0}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,i){if(this.isElement(i))i.appendChild(t);else if(i&&i.el&&i.el.nativeElement)i.el.nativeElement.appendChild(t);else throw"Cannot append "+i+" to "+t}static removeChild(t,i){if(this.isElement(i))i.removeChild(t);else if(i.el&&i.el.nativeElement)i.el.nativeElement.removeChild(t);else throw"Cannot remove "+t+" from "+i}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return typeof HTMLElement=="object"?t instanceof HTMLElement:t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"}static calculateScrollbarWidth(t){if(t){let i=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}else{if(this.calculatedScrollbarWidth!==null)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(this.calculatedScrollbarHeight!==null)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let i=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(t,i,r){t[i].apply(t,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return!t||t.offsetParent===null}static isVisible(t){return t&&t.offsetParent!=null}static isExist(t){return t!==null&&typeof t<"u"&&t.nodeName&&t.parentNode}static focus(t,i){t&&document.activeElement!==t&&t.focus(i)}static getFocusableSelectorString(t=""){return`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        .p-inputtext:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        .p-button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t}`}static getFocusableElements(t,i=""){let r=this.find(t,this.getFocusableSelectorString(i)),s=[];for(let o of r){let c=getComputedStyle(o);this.isVisible(o)&&c.display!="none"&&c.visibility!="hidden"&&s.push(o)}return s}static getFocusableElement(t,i=""){let r=this.findSingle(t,this.getFocusableSelectorString(i));if(r){let s=getComputedStyle(r);if(this.isVisible(r)&&s.display!="none"&&s.visibility!="hidden")return r}return null}static getFirstFocusableElement(t,i=""){let r=this.getFocusableElements(t,i);return r.length>0?r[0]:null}static getLastFocusableElement(t,i){let r=this.getFocusableElements(t,i);return r.length>0?r[r.length-1]:null}static getNextFocusableElement(t,i=!1){let r=n.getFocusableElements(t),s=0;if(r&&r.length>0){let o=r.indexOf(r[0].ownerDocument.activeElement);i?o==-1||o===0?s=r.length-1:s=o-1:o!=-1&&o!==r.length-1&&(s=o+1)}return r[s]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(t,i){if(!t)return null;switch(t){case"document":return document;case"window":return window;case"@next":return i?.nextElementSibling;case"@prev":return i?.previousElementSibling;case"@parent":return i?.parentElement;case"@grandparent":return i?.parentElement.parentElement;default:let r=typeof t;if(r==="string")return document.querySelector(t);if(r==="object"&&t.hasOwnProperty("nativeElement"))return this.isExist(t.nativeElement)?t.nativeElement:void 0;let o=(c=>!!(c&&c.constructor&&c.call&&c.apply))(t)?t():t;return o&&o.nodeType===9||this.isExist(o)?o:null}}static isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}static getAttribute(t,i){if(t){let r=t.getAttribute(i);return isNaN(r)?r==="true"||r==="false"?r==="true":r:+r}}static calculateBodyScrollbarWidth(){return window.innerWidth-document.documentElement.offsetWidth}static blockBodyScroll(t="p-overflow-hidden"){document.body.style.setProperty("--scrollbar-width",this.calculateBodyScrollbarWidth()+"px"),this.addClass(document.body,t)}static unblockBodyScroll(t="p-overflow-hidden"){document.body.style.removeProperty("--scrollbar-width"),this.removeClass(document.body,t)}static createElement(t,i={},...r){if(t){let s=document.createElement(t);return this.setAttributes(s,i),s.append(...r),s}}static setAttribute(t,i="",r){this.isElement(t)&&r!==null&&r!==void 0&&t.setAttribute(i,r)}static setAttributes(t,i={}){if(this.isElement(t)){let r=(s,o)=>{let c=t?.$attrs?.[s]?[t?.$attrs?.[s]]:[];return[o].flat().reduce((u,h)=>{if(h!=null){let p=typeof h;if(p==="string"||p==="number")u.push(h);else if(p==="object"){let m=Array.isArray(h)?r(s,h):Object.entries(h).map(([g,x])=>s==="style"&&(x||x===0)?`${g.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${x}`:x?g:void 0);u=m.length?u.concat(m.filter(g=>!!g)):u}}return u},c)};Object.entries(i).forEach(([s,o])=>{if(o!=null){let c=s.match(/^on(.+)/);c?t.addEventListener(c[1].toLowerCase(),o):s==="pBind"?this.setAttributes(t,o):(o=s==="class"?[...new Set(r("class",o))].join(" ").trim():s==="style"?r("style",o).join(";").trim():o,(t.$attrs=t.$attrs||{})&&(t.$attrs[s]=o),t.setAttribute(s,o))}})}}static isFocusableElement(t,i=""){return this.isElement(t)?t.matches(`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${i},
                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${i},
                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${i},
                select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${i},
                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${i},
                [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${i},
                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${i}`):!1}}return n})();var Ww=(()=>{class n{autofocus=!1;focused=!1;platformId=Q(Dt);document=Q(Ue);host=Q(vt);ngAfterContentChecked(){this.autofocus===!1?this.host.nativeElement.removeAttribute("autofocus"):this.host.nativeElement.setAttribute("autofocus",!0),this.focused||this.autoFocus()}ngAfterViewChecked(){this.focused||this.autoFocus()}autoFocus(){Qt(this.platformId)&&this.autofocus&&setTimeout(()=>{let t=ve.getFocusableElements(this.host?.nativeElement);t.length===0&&this.host.nativeElement.focus(),t.length>0&&t[0].focus(),this.focused=!0})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=je({type:n,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:[2,"autofocus","autofocus",Ee]},standalone:!0,features:[xt]})}return n})();var Ax=["*"],Je=(()=>{class n{label;spin=!1;styleClass;role;ariaLabel;ariaHidden;ngOnInit(){this.getAttributes()}getAttributes(){let t=Cs.isEmpty(this.label);this.role=t?void 0:"img",this.ariaLabel=t?void 0:this.label,this.ariaHidden=t}getClassNames(){return`p-icon ${this.styleClass?this.styleClass+" ":""}${this.spin?"p-icon-spin":""}`}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=F({type:n,selectors:[["ng-component"]],hostAttrs:[1,"p-element","p-icon-wrapper"],inputs:{label:"label",spin:[2,"spin","spin",Ee],styleClass:"styleClass"},standalone:!0,features:[xt,j],ngContentSelectors:Ax,decls:1,vars:0,template:function(i,r){i&1&&(ci(),Vn(0))},encapsulation:2,changeDetection:0})}return n})();var Hw=(()=>{class n extends Je{pathId;ngOnInit(){this.pathId="url(#"+gn()+")"}static \u0275fac=(()=>{let t;return function(r){return(t||(t=De(n)))(r||n)}})();static \u0275cmp=F({type:n,selectors:[["SpinnerIcon"]],standalone:!0,features:[be,j],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(Pe(),y(0,"svg",0)(1,"g"),O(2,"path",1),_(),y(3,"defs")(4,"clipPath",2),O(5,"rect",3),_()()()),i&2&&(se(r.getClassNames()),H("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),E(),H("clip-path",r.pathId),E(3),R("id",r.pathId))},encapsulation:2})}return n})();var Es=(()=>{class n{document;platformId;renderer;el;zone;config;constructor(t,i,r,s,o,c){this.document=t,this.platformId=i,this.renderer=r,this.el=s,this.zone=o,this.config=c}animationListener;mouseDownListener;timeout;ngAfterViewInit(){Qt(this.platformId)&&this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.renderer.listen(this.el.nativeElement,"mousedown",this.onMouseDown.bind(this))})}onMouseDown(t){let i=this.getInk();if(!i||this.document.defaultView?.getComputedStyle(i,null).display==="none")return;if(ve.removeClass(i,"p-ink-active"),!ve.getHeight(i)&&!ve.getWidth(i)){let c=Math.max(ve.getOuterWidth(this.el.nativeElement),ve.getOuterHeight(this.el.nativeElement));i.style.height=c+"px",i.style.width=c+"px"}let r=ve.getOffset(this.el.nativeElement),s=t.pageX-r.left+this.document.body.scrollTop-ve.getWidth(i)/2,o=t.pageY-r.top+this.document.body.scrollLeft-ve.getHeight(i)/2;this.renderer.setStyle(i,"top",o+"px"),this.renderer.setStyle(i,"left",s+"px"),ve.addClass(i,"p-ink-active"),this.timeout=setTimeout(()=>{let c=this.getInk();c&&ve.removeClass(c,"p-ink-active")},401)}getInk(){let t=this.el.nativeElement.children;for(let i=0;i<t.length;i++)if(typeof t[i].className=="string"&&t[i].className.indexOf("p-ink")!==-1)return t[i];return null}resetInk(){let t=this.getInk();t&&ve.removeClass(t,"p-ink-active")}onAnimationEnd(t){this.timeout&&clearTimeout(this.timeout),ve.removeClass(t.currentTarget,"p-ink-active")}create(){let t=this.renderer.createElement("span");this.renderer.addClass(t,"p-ink"),this.renderer.appendChild(this.el.nativeElement,t),this.renderer.setAttribute(t,"aria-hidden","true"),this.renderer.setAttribute(t,"role","presentation"),this.animationListener||(this.animationListener=this.renderer.listen(t,"animationend",this.onAnimationEnd.bind(this)))}remove(){let t=this.getInk();t&&(this.mouseDownListener&&this.mouseDownListener(),this.animationListener&&this.animationListener(),this.mouseDownListener=null,this.animationListener=null,ve.removeElement(t))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}static \u0275fac=function(i){return new(i||n)(k(Ue),k(Dt),k(Ut),k(vt),k(xe),k(Ti,8))};static \u0275dir=je({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"],standalone:!0})}return n})(),Kl=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ze({type:n});static \u0275inj=Xe({})}return n})();var Rx=["*"],Gw=n=>({class:n});function Px(n,e){n&1&&Tn(0)}function Dx(n,e){if(n&1&&O(0,"span",8),n&2){let t=L(3);R("ngClass",t.iconClass()),H("aria-hidden",!0)("data-pc-section","loadingicon")}}function xx(n,e){if(n&1&&O(0,"SpinnerIcon",9),n&2){let t=L(3);R("styleClass",t.spinnerIconClass())("spin",!0),H("aria-hidden",!0)("data-pc-section","loadingicon")}}function Ox(n,e){if(n&1&&(Gt(0),B(1,Dx,1,3,"span",6)(2,xx,1,4,"SpinnerIcon",7),Kt()),n&2){let t=L(2);E(),R("ngIf",t.loadingIcon),E(),R("ngIf",!t.loadingIcon)}}function Nx(n,e){}function kx(n,e){if(n&1&&B(0,Nx,0,0,"ng-template",10),n&2){let t=L(2);R("ngIf",t.loadingIconTemplate)}}function Mx(n,e){if(n&1&&(Gt(0),B(1,Ox,3,2,"ng-container",2)(2,kx,1,1,null,5),Kt()),n&2){let t=L();E(),R("ngIf",!t.loadingIconTemplate),E(),R("ngTemplateOutlet",t.loadingIconTemplate)("ngTemplateOutletContext",ut(3,Gw,t.iconClass()))}}function Lx(n,e){if(n&1&&O(0,"span",8),n&2){let t=L(2);R("ngClass",t.iconClass()),H("data-pc-section","icon")}}function Vx(n,e){}function Fx(n,e){if(n&1&&B(0,Vx,0,0,"ng-template",10),n&2){let t=L(2);R("ngIf",!t.icon&&t.iconTemplate)}}function Ux(n,e){if(n&1&&(Gt(0),B(1,Lx,1,2,"span",6)(2,Fx,1,1,null,5),Kt()),n&2){let t=L();E(),R("ngIf",t.icon&&!t.iconTemplate),E(),R("ngTemplateOutlet",t.iconTemplate)("ngTemplateOutletContext",ut(3,Gw,t.iconClass()))}}function Bx(n,e){if(n&1&&(y(0,"span",11),M(1),_()),n&2){let t=L();H("aria-hidden",t.icon&&!t.label)("data-pc-section","label"),E(),pe(t.label)}}function jx(n,e){if(n&1&&(y(0,"span",8),M(1),_()),n&2){let t=L();se(t.badgeClass),R("ngClass",t.badgeStyleClass()),H("data-pc-section","badge"),E(),pe(t.badge)}}var Oa=(()=>{class n{el;type="button";iconPos="left";icon;badge;label;disabled;loading=!1;loadingIcon;raised=!1;rounded=!1;text=!1;plain=!1;severity;outlined=!1;link=!1;tabindex;size;style;styleClass;badgeClass;ariaLabel;autofocus;onClick=new $e;onFocus=new $e;onBlur=new $e;contentTemplate;loadingIconTemplate;iconTemplate;templates;constructor(t){this.el=t}spinnerIconClass(){return Object.entries(this.iconClass()).filter(([,t])=>!!t).reduce((t,[i])=>t+` ${i}`,"p-button-loading-icon")}iconClass(){let t={"p-button-icon":!0,"p-button-icon-left":this.iconPos==="left"&&this.label,"p-button-icon-right":this.iconPos==="right"&&this.label,"p-button-icon-top":this.iconPos==="top"&&this.label,"p-button-icon-bottom":this.iconPos==="bottom"&&this.label};return this.loading?t[`p-button-loading-icon pi-spin ${this.loadingIcon??""}`]=!0:this.icon&&(t[this.icon]=!0),t}get buttonClass(){return{"p-button p-component":!0,"p-button-icon-only":(this.icon||this.iconTemplate||this.loadingIcon||this.loadingIconTemplate)&&!this.label,"p-button-vertical":(this.iconPos==="top"||this.iconPos==="bottom")&&this.label,"p-button-loading":this.loading,"p-button-loading-label-only":this.loading&&!this.icon&&this.label&&!this.loadingIcon&&this.iconPos==="left","p-button-link":this.link,[`p-button-${this.severity}`]:this.severity,"p-button-raised":this.raised,"p-button-rounded":this.rounded,"p-button-text":this.text,"p-button-outlined":this.outlined,"p-button-sm":this.size==="small","p-button-lg":this.size==="large","p-button-plain":this.plain,[`${this.styleClass}`]:this.styleClass}}ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"content":this.contentTemplate=t.template;break;case"icon":this.iconTemplate=t.template;break;case"loadingicon":this.loadingIconTemplate=t.template;break;default:this.contentTemplate=t.template;break}})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&String(this.badge).length===1}}focus(){this.el.nativeElement.firstChild.focus()}static \u0275fac=function(i){return new(i||n)(k(vt))};static \u0275cmp=F({type:n,selectors:[["p-button"]],contentQueries:function(i,r,s){if(i&1&&sn(s,Xn,4),i&2){let o;wt(o=It())&&(r.templates=o)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(i,r){i&2&&Bt("p-disabled",r.disabled)},inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:[2,"disabled","disabled",Ee],loading:[2,"loading","loading",Ee],loadingIcon:"loadingIcon",raised:[2,"raised","raised",Ee],rounded:[2,"rounded","rounded",Ee],text:[2,"text","text",Ee],plain:[2,"plain","plain",Ee],severity:"severity",outlined:[2,"outlined","outlined",Ee],link:[2,"link","link",Ee],tabindex:[2,"tabindex","tabindex",bn],size:"size",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel",autofocus:[2,"autofocus","autofocus",Ee]},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},standalone:!0,features:[xt,j],ngContentSelectors:Rx,decls:7,vars:14,consts:[["pRipple","","pAutoFocus","",3,"click","focus","blur","ngStyle","disabled","ngClass","autofocus"],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass","class",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass",4,"ngIf"],[3,"styleClass","spin",4,"ngIf"],[3,"ngClass"],[3,"styleClass","spin"],[3,"ngIf"],[1,"p-button-label"]],template:function(i,r){i&1&&(ci(),y(0,"button",0),z("click",function(o){return r.onClick.emit(o)})("focus",function(o){return r.onFocus.emit(o)})("blur",function(o){return r.onBlur.emit(o)}),Vn(1),B(2,Px,1,0,"ng-container",1)(3,Mx,3,5,"ng-container",2)(4,Ux,3,5,"ng-container",2)(5,Bx,2,3,"span",3)(6,jx,2,5,"span",4),_()),i&2&&(R("ngStyle",r.style)("disabled",r.disabled||r.loading)("ngClass",r.buttonClass)("autofocus",r.autofocus),H("type",r.type)("aria-label",r.ariaLabel)("data-pc-name","button")("data-pc-section","root")("tabindex",r.tabindex),E(2),R("ngTemplateOutlet",r.contentTemplate),E(),R("ngIf",r.loading),E(),R("ngIf",!r.loading),E(),R("ngIf",!r.contentTemplate&&r.label),E(),R("ngIf",!r.contentTemplate&&r.badge))},dependencies:[de,Bi,Ui,li,Es,Ww,Hw],encapsulation:2,changeDetection:0})}return n})(),Ql=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ze({type:n});static \u0275inj=Xe({imports:[Oa,Zn]})}return n})();var _n=(()=>{class n{db;constructor(t){this.db=t}deletePost(t){return C(this,null,function*(){try{let i=Ne(this.db,`posts/${t.id}`);yield va(i)}catch(i){throw i}})}uploadPost(t){return C(this,null,function*(){try{xw(t);let i=Ne(this.db,"posts");yield Cl(i,t)}catch(i){throw i}})}fetchPost(t){return C(this,null,function*(){try{let i=(yield Rr(Ne(this.db,`posts/${t}`))).val();return{id:t,post:i}}catch(i){throw i}})}likePost(t,i){return C(this,null,function*(){try{let r=yield Rr(Ne(this.db,"users")),s={},o=Object.values(r.val()).filter(u=>u.uid===i);o=o[0];let c=o?.username;s[`users/${c}/likedPosts/${t.id}`]=!0,s[`posts/${t.id}/likedBy/${i}`]=!0,yield El(Ne(this.db),s)}catch(r){throw r}})}dislikePost(t,i){return C(this,null,function*(){try{let r=Ne(this.db,`posts/${t.id}/likedBy/${i}`),s=(yield Rr(Ne(this.db,"users"))).val(),c=Object.values(s).filter(h=>h.uid===i)[0].username,u=Ne(this.db,`users/${c}/likedPosts`);yield va(r),yield va(u)}catch(r){throw r}})}uploadComment(t,i,r){return C(this,null,function*(){try{kw(t);let s=Ne(this.db,`posts/${i}/comments`),c=(yield Rr(Ne(this.db,"users"))).val(),u=Object.values(c).filter(g=>g.uid===r),h=u[0].username,p=u[0].avatar,m={createdOn:Date.now(),likes:0,createdBy:h,comment:t,avatar:p};yield Cl(s,m)}catch(s){throw s}})}static \u0275fac=function(i){return new(i||n)(re(Te))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $x(n,e){if(n&1){let t=Se();y(0,"div",2)(1,"p-button",3),z("click",function(){Z(t);let r=L();return ee(r.likePost())}),_()()}n&2&&(E(),R("rounded",!0)("outlined",!0))}function qx(n,e){if(n&1){let t=Se();y(0,"div",2)(1,"p-button",4),z("click",function(){Z(t);let r=L();return ee(r.dislikePost())}),_()()}n&2&&(E(),R("rounded",!0))}var Qw=(()=>{class n{postService;isLiked;post;userId;constructor(t){this.postService=t}likePost(){return C(this,null,function*(){yield this.postService.likePost(this.post,this.userId)})}dislikePost(){return C(this,null,function*(){yield this.postService.dislikePost(this.post,this.userId)})}static \u0275fac=function(i){return new(i||n)(k(_n))};static \u0275cmp=F({type:n,selectors:[["like"]],inputs:{isLiked:"isLiked",post:"post",userId:"userId"},standalone:!0,features:[j],decls:3,vars:2,consts:[["dislike",""],["class","like__heart",4,"ngIf","ngIfElse"],[1,"like__heart"],["icon","pi pi-heart","severity","danger",1,"heart",3,"click","rounded","outlined"],["icon","pi pi-heart","severity","danger",1,"heart",3,"click","rounded"]],template:function(i,r){if(i&1&&B(0,$x,2,2,"div",1)(1,qx,2,1,"ng-template",null,0,st),i&2){let s=rt(2);R("ngIf",!r.isLiked)("ngIfElse",s)}},dependencies:[de,Ql,Oa],styles:[".heart[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();var Yw=(()=>{class n{post;isPostByUser;countOfComments;ngOnInit(){let t=[this.post?.post].filter(i=>i?.comments);t.length>0&&(this.countOfComments=t[0],this.countOfComments=Object.values(this.countOfComments?.comments).length)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=F({type:n,selectors:[["comment"]],inputs:{post:"post",isPostByUser:"isPostByUser"},standalone:!0,features:[j],decls:6,vars:3,consts:[[1,"comment"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","grey","viewBox","0 0 16 16"],["d","M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2"],["d","m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9 9 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.4 10.4 0 0 1-.524 2.318l-.003.011a11 11 0 0 1-.244.637c-.079.186.074.394.273.362a22 22 0 0 0 .693-.125m.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6-3.004 6-7 6a8 8 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a11 11 0 0 0 .398-2"],[1,"badge"]],template:function(i,r){i&1&&(y(0,"span",0),Pe(),y(1,"svg",1),O(2,"path",2)(3,"path",3),_(),lc(),y(4,"span",4),M(5),_()()),i&2&&(E(),Bt("comment__by__user",!r.isPostByUser),E(4),pe(r.countOfComments))},styles:[".comment__by__user[_ngcontent-%COMP%]:hover{fill:#d38a65;cursor:pointer}span[_ngcontent-%COMP%]{color:#666}"]})}return n})();var sI=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(k(Ut),k(vt))},e.\u0275dir=je({type:e});let n=e;return n})(),Wx=(()=>{let e=class e extends sI{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=De(e)))(s||e)}})(),e.\u0275dir=je({type:e,features:[be]});let n=e;return n})(),oI=new Ce("");var Hx={provide:oI,useExisting:ao(()=>$t),multi:!0};function zx(){let n=$r()?$r().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Gx=new Ce(""),$t=(()=>{let e=class e extends sI{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!zx())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(k(Ut),k(vt),k(Gx,8))},e.\u0275dir=je({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&z("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[He([Hx]),be]});let n=e;return n})();function Kx(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Vp=new Ce(""),aI=new Ce("");function Qx(n){return Kx(n.value)?{required:!0}:null}function Jw(n){return null}function cI(n){return n!=null}function lI(n){return fc(n)?Rt(n):n}function uI(n){let e={};return n.forEach(t=>{e=t!=null?q(q({},e),t):e}),Object.keys(e).length===0?null:e}function hI(n,e){return e.map(t=>t(n))}function Yx(n){return!n.validate}function dI(n){return n.map(e=>Yx(e)?e:t=>e.validate(t))}function Jx(n){if(!n)return null;let e=n.filter(cI);return e.length==0?null:function(t){return uI(hI(t,e))}}function Fp(n){return n!=null?Jx(dI(n)):null}function Xx(n){if(!n)return null;let e=n.filter(cI);return e.length==0?null:function(t){let i=hI(t,e).map(lI);return Ug(i).pipe(ce(uI))}}function Up(n){return n!=null?Xx(dI(n)):null}function Xw(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Zx(n){return n._rawValidators}function eO(n){return n._rawAsyncValidators}function Lp(n){return n?Array.isArray(n)?n:[n]:[]}function Jl(n,e){return Array.isArray(n)?n.includes(e):n===e}function Zw(n,e){let t=Lp(e);return Lp(n).forEach(r=>{Jl(t,r)||t.push(r)}),t}function eI(n,e){return Lp(e).filter(t=>!Jl(n,t))}var Xl=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Fp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Up(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ss=class extends Xl{get formDirective(){return null}get path(){return null}},Ua=class extends Xl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Zl=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},tO={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},OU=Re(q({},tO),{"[class.ng-submitted]":"isSubmitted"}),yn=(()=>{let e=class e extends Zl{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(k(Ua,2))},e.\u0275dir=je({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Bt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[be]});let n=e;return n})(),vn=(()=>{let e=class e extends Zl{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(k(Ss,10))},e.\u0275dir=je({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Bt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[be]});let n=e;return n})();var ka="VALID",Yl="INVALID",Ts="PENDING",Ma="DISABLED",As=class{},eu=class extends As{constructor(e,t){super(),this.value=e,this.source=t}},Va=class extends As{constructor(e,t){super(),this.pristine=e,this.source=t}},Fa=class extends As{constructor(e,t){super(),this.touched=e,this.source=t}},bs=class extends As{constructor(e,t){super(),this.status=e,this.source=t}};function fI(n){return(iu(n)?n.validators:n)||null}function nO(n){return Array.isArray(n)?Fp(n):n||null}function pI(n,e){return(iu(e)?e.asyncValidators:n)||null}function iO(n){return Array.isArray(n)?Up(n):n||null}function iu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function rO(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Ve(1e3,"");if(!i[t])throw new Ve(1001,"")}function sO(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Ve(1002,"")})}var tu=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=fo(()=>this.statusReactive()),this.statusReactive=Vi(void 0),this._pristine=fo(()=>this.pristineReactive()),this.pristineReactive=Vi(!0),this._touched=fo(()=>this.touchedReactive()),this.touchedReactive=Vi(!1),this._events=new Vt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Fi(this.statusReactive)}set status(e){Fi(()=>this.statusReactive.set(e))}get valid(){return this.status===ka}get invalid(){return this.status===Yl}get pending(){return this.status==Ts}get disabled(){return this.status===Ma}get enabled(){return this.status!==Ma}get pristine(){return Fi(this.pristineReactive)}set pristine(e){Fi(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Fi(this.touchedReactive)}set touched(e){Fi(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Zw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Zw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(eI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(eI(e,this._rawAsyncValidators))}hasValidator(e){return Jl(this._rawValidators,e)}hasAsyncValidator(e){return Jl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Re(q({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Fa(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Fa(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Re(q({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Va(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Va(!0,i))}markAsPending(e={}){this.status=Ts;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Re(q({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ma,this.errors=null,this._forEachChild(r=>{r.disable(Re(q({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new eu(this.value,i)),this._events.next(new bs(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Re(q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ka,this._forEachChild(i=>{i.enable(Re(q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Re(q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ka||this.status===Ts)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new eu(this.value,t)),this._events.next(new bs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Re(q({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ma:ka}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ts,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=lI(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new bs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new $e,this.statusChanges=new $e}_calculateStatus(){return this._allControlsDisabled()?Ma:this.errors?Yl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ts)?Ts:this._anyControlsHaveStatus(Yl)?Yl:ka}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Va(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Fa(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){iu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=nO(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=iO(this._rawAsyncValidators)}},nu=class extends tu{constructor(e,t,i){super(fI(t),pI(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){sO(this,!0,e),Object.keys(e).forEach(i=>{rO(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Bp=new Ce("CallSetDisabledState",{providedIn:"root",factory:()=>jp}),jp="always";function oO(n,e){return[...e.path,n]}function mI(n,e,t=jp){gI(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),cO(n,e),uO(n,e),lO(n,e),aO(n,e)}function tI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function aO(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function gI(n,e){let t=Zx(n);e.validator!==null?n.setValidators(Xw(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=eO(n);e.asyncValidator!==null?n.setAsyncValidators(Xw(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();tI(e._rawValidators,r),tI(e._rawAsyncValidators,r)}function cO(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&_I(n,e)})}function lO(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&_I(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function _I(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function uO(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function hO(n,e){n==null,gI(n,e)}function dO(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function fO(n){return Object.getPrototypeOf(n.constructor)===Wx}function pO(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function mO(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===$t?t=s:fO(s)?i=s:r=s}),r||i||t||null}var gO={provide:Ss,useExisting:ao(()=>Zt)},La=Promise.resolve(),Zt=(()=>{let e=class e extends Ss{get submitted(){return Fi(this.submittedReactive)}constructor(i,r,s){super(),this.callSetDisabledState=s,this._submitted=fo(()=>this.submittedReactive()),this.submittedReactive=Vi(!1),this._directives=new Set,this.ngSubmit=new $e,this.form=new nu({},Fp(i),Up(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){La.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),mI(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){La.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){La.then(()=>{let r=this._findContainer(i.path),s=new nu({});hO(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){La.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){La.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submittedReactive.set(!0),pO(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(k(Vp,10),k(aI,10),k(Bp,8))},e.\u0275dir=je({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&z("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[He([gO]),be]});let n=e;return n})();function nI(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function iI(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var _O=class extends tu{constructor(e=null,t,i){super(fI(t),pI(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(iI(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){nI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){nI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){iI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yO={provide:Ua,useExisting:ao(()=>en)},rI=Promise.resolve(),en=(()=>{let e=class e extends Ua{constructor(i,r,s,o,c,u){super(),this._changeDetectorRef=c,this.callSetDisabledState=u,this.control=new _O,this._registered=!1,this.name="",this.update=new $e,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=mO(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),dO(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){rI.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&Ee(r);rI.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?oO(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(k(Ss,9),k(Vp,10),k(aI,10),k(oI,10),k(on,8),k(Bp,8))},e.\u0275dir=je({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[He([yO]),be,ai]});let n=e;return n})(),wn=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=je({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var vO=(()=>{let e=class e{constructor(){this._validator=Jw}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Jw,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=je({type:e,features:[ai]});let n=e;return n})();var wO={provide:Vp,useExisting:ao(()=>Nr),multi:!0};var Nr=(()=>{let e=class e extends vO{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ee,this.createValidator=i=>Qx}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=De(e)))(s||e)}})(),e.\u0275dir=je({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){r&2&&H("required",s._enabled?"":null)},inputs:{required:"required"},features:[He([wO]),be]});let n=e;return n})();var IO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ze({type:e}),e.\u0275inj=Xe({});let n=e;return n})();var qt=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Bp,useValue:i.callSetDisabledState??jp}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ze({type:e}),e.\u0275inj=Xe({imports:[IO]});let n=e;return n})();var yI=(()=>{class n{db;likes;postId;constructor(t){this.db=t}ngOnInit(){Gl(Lt(this.db,`posts/${this.postId}/likedBy`),t=>{let i=t.val();if(i){let r=Object.keys(i).length;this.likes=r}})}static \u0275fac=function(i){return new(i||n)(k(Te))};static \u0275cmp=F({type:n,selectors:[["bookmarkHeart"]],inputs:{postId:"postId"},standalone:!0,features:[j],decls:6,vars:1,consts:[[1,"bookmark"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","#a31431","viewBox","0 0 16 16"],["fill-rule","evenodd","d","M8 4.41c1.387-1.425 4.854 1.07 0 4.277C3.146 5.48 6.613 2.986 8 4.412z"],["d","M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1z"],[1,"badge"]],template:function(i,r){i&1&&(y(0,"div",0),Pe(),y(1,"svg",1),O(2,"path",2)(3,"path",3),_(),lc(),y(4,"span",4),M(5),_()()),i&2&&(E(5),pe(r.likes||0))},encapsulation:2})}return n})();var vI={severity:"success",summary:"Success",detail:"Successfully uploaded post in your home page!",life:3e3},wI=n=>({severity:"error",summary:"Error",detail:`${n}`,life:3e3}),II={severity:"success",summary:"Success",detail:"Successfully logged in!",life:3e3},CI=n=>({severity:"error",summary:"Error",detail:`${n}`,life:3e3}),EI=n=>({severity:"error",summary:"Error",detail:`${n}`,life:3e3}),TI=n=>({severity:"error",summary:"Error",detail:`${n}`,life:3e3}),bI={severity:"success",summary:"Success",detail:"You can view your comment in the full view post!",life:3e3},SI={severity:"success",summary:"Success",detail:"You have successfully updated your profile picture!",life:3e3},AI=n=>({severity:"error",summary:"Error",detail:`${n}`,life:3e3}),RI={severity:"success",summary:"Success",detail:"A password reset email was sent to the given email address!",life:3e3},PI=n=>({severity:"error",summary:"Error",detail:`${n}`,life:3e3});var $p=(()=>{class n extends Je{static \u0275fac=(()=>{let t;return function(r){return(t||(t=De(n)))(r||n)}})();static \u0275cmp=F({type:n,selectors:[["CheckIcon"]],standalone:!0,features:[be,j],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z","fill","currentColor"]],template:function(i,r){i&1&&(Pe(),y(0,"svg",0),O(1,"path",1),_()),i&2&&(se(r.getClassNames()),H("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();var qp=(()=>{class n extends Je{pathId;ngOnInit(){this.pathId="url(#"+gn()+")"}static \u0275fac=(()=>{let t;return function(r){return(t||(t=De(n)))(r||n)}})();static \u0275cmp=F({type:n,selectors:[["ExclamationTriangleIcon"]],standalone:!0,features:[be,j],decls:8,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.4018 13.1893H0.598161C0.49329 13.189 0.390283 13.1615 0.299143 13.1097C0.208003 13.0578 0.131826 12.9832 0.0780112 12.8932C0.0268539 12.8015 0 12.6982 0 12.5931C0 12.4881 0.0268539 12.3848 0.0780112 12.293L6.47985 1.08982C6.53679 1.00399 6.61408 0.933574 6.70484 0.884867C6.7956 0.836159 6.897 0.810669 7 0.810669C7.103 0.810669 7.2044 0.836159 7.29516 0.884867C7.38592 0.933574 7.46321 1.00399 7.52015 1.08982L13.922 12.293C13.9731 12.3848 14 12.4881 14 12.5931C14 12.6982 13.9731 12.8015 13.922 12.8932C13.8682 12.9832 13.792 13.0578 13.7009 13.1097C13.6097 13.1615 13.5067 13.189 13.4018 13.1893ZM1.63046 11.989H12.3695L7 2.59425L1.63046 11.989Z","fill","currentColor"],["d","M6.99996 8.78801C6.84143 8.78594 6.68997 8.72204 6.57787 8.60993C6.46576 8.49782 6.40186 8.34637 6.39979 8.18784V5.38703C6.39979 5.22786 6.46302 5.0752 6.57557 4.96265C6.68813 4.85009 6.84078 4.78686 6.99996 4.78686C7.15914 4.78686 7.31179 4.85009 7.42435 4.96265C7.5369 5.0752 7.60013 5.22786 7.60013 5.38703V8.18784C7.59806 8.34637 7.53416 8.49782 7.42205 8.60993C7.30995 8.72204 7.15849 8.78594 6.99996 8.78801Z","fill","currentColor"],["d","M6.99996 11.1887C6.84143 11.1866 6.68997 11.1227 6.57787 11.0106C6.46576 10.8985 6.40186 10.7471 6.39979 10.5885V10.1884C6.39979 10.0292 6.46302 9.87658 6.57557 9.76403C6.68813 9.65147 6.84078 9.58824 6.99996 9.58824C7.15914 9.58824 7.31179 9.65147 7.42435 9.76403C7.5369 9.87658 7.60013 10.0292 7.60013 10.1884V10.5885C7.59806 10.7471 7.53416 10.8985 7.42205 11.0106C7.30995 11.1227 7.15849 11.1866 6.99996 11.1887Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(Pe(),y(0,"svg",0)(1,"g"),O(2,"path",1)(3,"path",2)(4,"path",3),_(),y(5,"defs")(6,"clipPath",4),O(7,"rect",5),_()()()),i&2&&(se(r.getClassNames()),H("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),E(),H("clip-path",r.pathId),E(5),R("id",r.pathId))},encapsulation:2})}return n})();var Wp=(()=>{class n extends Je{pathId;ngOnInit(){this.pathId="url(#"+gn()+")"}static \u0275fac=(()=>{let t;return function(r){return(t||(t=De(n)))(r||n)}})();static \u0275cmp=F({type:n,selectors:[["InfoCircleIcon"]],standalone:!0,features:[be,j],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M3.11101 12.8203C4.26215 13.5895 5.61553 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.61553 13.5895 4.26215 12.8203 3.11101C12.0511 1.95987 10.9579 1.06266 9.67879 0.532846C8.3997 0.00303296 6.99224 -0.13559 5.63437 0.134506C4.2765 0.404603 3.02922 1.07129 2.05026 2.05026C1.07129 3.02922 0.404603 4.2765 0.134506 5.63437C-0.13559 6.99224 0.00303296 8.3997 0.532846 9.67879C1.06266 10.9579 1.95987 12.0511 3.11101 12.8203ZM3.75918 2.14976C4.71846 1.50879 5.84628 1.16667 7 1.16667C8.5471 1.16667 10.0308 1.78125 11.1248 2.87521C12.2188 3.96918 12.8333 5.45291 12.8333 7C12.8333 8.15373 12.4912 9.28154 11.8502 10.2408C11.2093 11.2001 10.2982 11.9478 9.23232 12.3893C8.16642 12.8308 6.99353 12.9463 5.86198 12.7212C4.73042 12.4962 3.69102 11.9406 2.87521 11.1248C2.05941 10.309 1.50384 9.26958 1.27876 8.13803C1.05367 7.00647 1.16919 5.83358 1.61071 4.76768C2.05222 3.70178 2.79989 2.79074 3.75918 2.14976ZM7.00002 4.8611C6.84594 4.85908 6.69873 4.79698 6.58977 4.68801C6.48081 4.57905 6.4187 4.43185 6.41669 4.27776V3.88888C6.41669 3.73417 6.47815 3.58579 6.58754 3.4764C6.69694 3.367 6.84531 3.30554 7.00002 3.30554C7.15473 3.30554 7.3031 3.367 7.4125 3.4764C7.52189 3.58579 7.58335 3.73417 7.58335 3.88888V4.27776C7.58134 4.43185 7.51923 4.57905 7.41027 4.68801C7.30131 4.79698 7.1541 4.85908 7.00002 4.8611ZM7.00002 10.6945C6.84594 10.6925 6.69873 10.6304 6.58977 10.5214C6.48081 10.4124 6.4187 10.2652 6.41669 10.1111V6.22225C6.41669 6.06754 6.47815 5.91917 6.58754 5.80977C6.69694 5.70037 6.84531 5.63892 7.00002 5.63892C7.15473 5.63892 7.3031 5.70037 7.4125 5.80977C7.52189 5.91917 7.58335 6.06754 7.58335 6.22225V10.1111C7.58134 10.2652 7.51923 10.4124 7.41027 10.5214C7.30131 10.6304 7.1541 10.6925 7.00002 10.6945Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(Pe(),y(0,"svg",0)(1,"g"),O(2,"path",1),_(),y(3,"defs")(4,"clipPath",2),O(5,"rect",3),_()()()),i&2&&(se(r.getClassNames()),H("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),E(),H("clip-path",r.pathId),E(3),R("id",r.pathId))},encapsulation:2})}return n})();var Hp=(()=>{class n extends Je{static \u0275fac=(()=>{let t;return function(r){return(t||(t=De(n)))(r||n)}})();static \u0275cmp=F({type:n,selectors:[["TimesIcon"]],standalone:!0,features:[be,j],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z","fill","currentColor"]],template:function(i,r){i&1&&(Pe(),y(0,"svg",0),O(1,"path",1),_()),i&2&&(se(r.getClassNames()),H("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();var zp=(()=>{class n extends Je{pathId;ngOnInit(){this.pathId="url(#"+gn()+")"}static \u0275fac=(()=>{let t;return function(r){return(t||(t=De(n)))(r||n)}})();static \u0275cmp=F({type:n,selectors:[["TimesCircleIcon"]],standalone:!0,features:[be,j],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(Pe(),y(0,"svg",0)(1,"g"),O(2,"path",1),_(),y(3,"defs")(4,"clipPath",2),O(5,"rect",3),_()()()),i&2&&(se(r.getClassNames()),H("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),E(),H("clip-path",r.pathId),E(3),R("id",r.pathId))},encapsulation:2})}return n})();var DI=["container"],CO=n=>[n,"p-toast-message"],EO=(n,e,t,i)=>({showTransformParams:n,hideTransformParams:e,showTransitionParams:t,hideTransitionParams:i}),TO=n=>({value:"visible",params:n}),bO=(n,e)=>({$implicit:n,closeFn:e}),SO=n=>({$implicit:n});function AO(n,e){n&1&&Tn(0)}function RO(n,e){if(n&1&&(Gt(0),B(1,AO,1,0,"ng-container",4),Kt()),n&2){let t=L();E(),R("ngTemplateOutlet",t.headlessTemplate)("ngTemplateOutletContext",jr(2,bO,t.message,t.onCloseIconClick))}}function PO(n,e){if(n&1&&O(0,"span"),n&2){let t=L(3);se("p-toast-message-icon pi "+t.message.icon)}}function DO(n,e){n&1&&O(0,"CheckIcon"),n&2&&H("aria-hidden",!0)("data-pc-section","icon")}function xO(n,e){n&1&&O(0,"InfoCircleIcon"),n&2&&H("aria-hidden",!0)("data-pc-section","icon")}function OO(n,e){n&1&&O(0,"TimesCircleIcon"),n&2&&H("aria-hidden",!0)("data-pc-section","icon")}function NO(n,e){n&1&&O(0,"ExclamationTriangleIcon"),n&2&&H("aria-hidden",!0)("data-pc-section","icon")}function kO(n,e){if(n&1&&(y(0,"span",13),Gt(1),B(2,DO,1,2,"CheckIcon",6)(3,xO,1,2,"InfoCircleIcon",6)(4,OO,1,2,"TimesCircleIcon",6)(5,NO,1,2,"ExclamationTriangleIcon",6),Kt(),_()),n&2){let t=L(3);H("aria-hidden",!0)("data-pc-section","icon"),E(2),R("ngIf",t.message.severity==="success"),E(),R("ngIf",t.message.severity==="info"),E(),R("ngIf",t.message.severity==="error"),E(),R("ngIf",t.message.severity==="warn")}}function MO(n,e){if(n&1&&(Gt(0),B(1,PO,1,2,"span",8)(2,kO,6,6,"span",9),y(3,"div",10)(4,"div",11),M(5),_(),y(6,"div",12),M(7),_()(),Kt()),n&2){let t=L(2);E(),R("ngIf",t.message.icon),E(),R("ngIf",!t.message.icon),E(),H("data-pc-section","text"),E(),H("data-pc-section","summary"),E(),pe(t.message.summary),E(),H("data-pc-section","detail"),E(),pe(t.message.detail)}}function LO(n,e){n&1&&Tn(0)}function VO(n,e){if(n&1&&O(0,"span"),n&2){let t=L(3);se("pt-1 text-base p-toast-message-icon pi "+t.message.closeIcon)}}function FO(n,e){n&1&&O(0,"TimesIcon",16),n&2&&(R("styleClass","p-toast-icon-close-icon"),H("aria-hidden",!0)("data-pc-section","closeicon"))}function UO(n,e){if(n&1){let t=Se();y(0,"button",14),z("click",function(r){Z(t);let s=L(2);return ee(s.onCloseIconClick(r))})("keydown.enter",function(r){Z(t);let s=L(2);return ee(s.onCloseIconClick(r))}),B(1,VO,1,2,"span",8)(2,FO,1,3,"TimesIcon",15),_()}if(n&2){let t=L(2);H("aria-label",t.closeAriaLabel)("data-pc-section","closebutton"),E(),R("ngIf",t.message.closeIcon),E(),R("ngIf",!t.message.closeIcon)}}function BO(n,e){if(n&1&&(y(0,"div",5),B(1,MO,8,7,"ng-container",6)(2,LO,1,0,"ng-container",4)(3,UO,3,4,"button",7),_()),n&2){let t=L();R("ngClass",t.message==null?null:t.message.contentStyleClass),H("data-pc-section","content"),E(),R("ngIf",!t.template),E(),R("ngTemplateOutlet",t.template)("ngTemplateOutletContext",ut(6,SO,t.message)),E(),R("ngIf",(t.message==null?null:t.message.closable)!==!1)}}function jO(n,e){if(n&1){let t=Se();y(0,"p-toastItem",3),z("onClose",function(r){Z(t);let s=L();return ee(s.onMessageClose(r))})("@toastAnimation.start",function(r){Z(t);let s=L();return ee(s.onAnimationStart(r))})("@toastAnimation.done",function(r){Z(t);let s=L();return ee(s.onAnimationEnd(r))}),_()}if(n&2){let t=e.$implicit,i=e.index,r=L();R("message",t)("index",i)("life",r.life)("template",r.template)("headlessTemplate",r.headlessTemplate)("@toastAnimation",void 0)("showTransformOptions",r.showTransformOptions)("hideTransformOptions",r.hideTransformOptions)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}}var $O=(()=>{class n{zone;config;message;index;life;template;headlessTemplate;showTransformOptions;hideTransformOptions;showTransitionOptions;hideTransitionOptions;onClose=new $e;containerViewChild;timeout;constructor(t,i){this.zone=t,this.config=i}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message?.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message?.life||this.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick=t=>{this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),t.preventDefault()};get closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}ngOnDestroy(){this.clearTimeout()}static \u0275fac=function(i){return new(i||n)(k(xe),k(Ti))};static \u0275cmp=F({type:n,selectors:[["p-toastItem"]],viewQuery:function(i,r){if(i&1&&Br(DI,5),i&2){let s;wt(s=It())&&(r.containerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:[2,"index","index",bn],life:[2,"life","life",bn],template:"template",headlessTemplate:"headlessTemplate",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},features:[xt],decls:5,vars:18,consts:[["container",""],["notHeadless",""],["role","alert","aria-live","assertive","aria-atomic","true",3,"mouseenter","mouseleave","ngClass"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"class",4,"ngIf"],["class","p-toast-message-icon",4,"ngIf"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],[1,"p-toast-message-icon"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],[3,"styleClass"]],template:function(i,r){if(i&1){let s=Se();y(0,"div",2,0),z("mouseenter",function(){return Z(s),ee(r.onMouseEnter())})("mouseleave",function(){return Z(s),ee(r.onMouseLeave())}),B(2,RO,2,5,"ng-container",3)(3,BO,4,8,"ng-template",null,1,st),_()}if(i&2){let s=rt(4);se(r.message==null?null:r.message.styleClass),R("ngClass",ut(9,CO,"p-toast-message-"+(r.message==null?null:r.message.severity)))("@messageState",ut(16,TO,s_(11,EO,r.showTransformOptions,r.hideTransformOptions,r.showTransitionOptions,r.hideTransitionOptions))),H("id",r.message==null?null:r.message.id)("data-pc-name","toast")("data-pc-section","root"),E(2),R("ngIf",r.headlessTemplate)("ngIfElse",s)}},dependencies:()=>[li,de,Bi,Es,$p,Wp,zp,qp,Hp],encapsulation:2,data:{animation:[po("messageState",[mo("visible",ar({transform:"translateY(0)",opacity:1})),cr("void => *",[ar({transform:"{{showTransformParams}}",opacity:0}),qr("{{showTransitionParams}}")]),cr("* => void",[qr("{{hideTransitionParams}}",ar({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0})}return n})(),Tt=(()=>{class n{document;renderer;messageService;cd;config;key;autoZIndex=!0;baseZIndex=0;life=3e3;style;styleClass;get position(){return this._position}set position(t){this._position=t,this.cd.markForCheck()}preventOpenDuplicates=!1;preventDuplicates=!1;showTransformOptions="translateY(100%)";hideTransformOptions="translateY(-100%)";showTransitionOptions="300ms ease-out";hideTransitionOptions="250ms ease-in";breakpoints;onClose=new $e;containerViewChild;templates;messageSubscription;clearSubscription;messages;messagesArchieve;template;headlessTemplate;_position="top-right";constructor(t,i,r,s,o){this.document=t,this.renderer=i,this.messageService=r,this.cd=s,this.config=o}styleElement;id=gn();ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(t=>{if(t)if(Array.isArray(t)){let i=t.filter(r=>this.canAdd(r));this.add(i)}else this.canAdd(t)&&this.add([t])}),this.clearSubscription=this.messageService.clearObserver.subscribe(t=>{t?this.key===t&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(t){this.messages=this.messages?[...this.messages,...t]:[...t],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...t]:[...t]),this.cd.markForCheck()}canAdd(t){let i=this.key===t.key;return i&&this.preventOpenDuplicates&&(i=!this.containsMessage(this.messages,t)),i&&this.preventDuplicates&&(i=!this.containsMessage(this.messagesArchieve,t)),i}containsMessage(t,i){return t?t.find(r=>r.summary===i.summary&&r.detail==i.detail&&r.severity===i.severity)!=null:!1}ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"message":this.template=t.template;break;case"headless":this.headlessTemplate=t.template;break;default:this.template=t.template;break}})}onMessageClose(t){this.messages?.splice(t.index,1),this.onClose.emit({message:t.message}),this.cd.detectChanges()}onAnimationStart(t){t.fromState==="void"&&(this.renderer.setAttribute(this.containerViewChild?.nativeElement,this.id,""),this.autoZIndex&&this.containerViewChild?.nativeElement.style.zIndex===""&&Xi.set("modal",this.containerViewChild?.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(t){t.toState==="void"&&this.autoZIndex&&Cs.isEmpty(this.messages)&&Xi.clear(this.containerViewChild?.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=this.renderer.createElement("style"),this.styleElement.type="text/css",ve.setAttribute(this.styleElement,"nonce",this.config?.csp()?.nonce),this.renderer.appendChild(this.document.head,this.styleElement);let t="";for(let i in this.breakpoints){let r="";for(let s in this.breakpoints[i])r+=s+":"+this.breakpoints[i][s]+" !important;";t+=`
                    @media screen and (max-width: ${i}) {
                        .p-toast[${this.id}] {
                           ${r}
                        }
                    }
                `}this.renderer.setProperty(this.styleElement,"innerHTML",t)}}destroyStyle(){this.styleElement&&(this.renderer.removeChild(this.document.head,this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&Xi.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}static \u0275fac=function(i){return new(i||n)(k(Ue),k(Ut),k(ye),k(on),k(Ti))};static \u0275cmp=F({type:n,selectors:[["p-toast"]],contentQueries:function(i,r,s){if(i&1&&sn(s,Xn,4),i&2){let o;wt(o=It())&&(r.templates=o)}},viewQuery:function(i,r){if(i&1&&Br(DI,5),i&2){let s;wt(s=It())&&(r.containerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:[2,"autoZIndex","autoZIndex",Ee],baseZIndex:[2,"baseZIndex","baseZIndex",bn],life:[2,"life","life",bn],style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:[2,"preventOpenDuplicates","preventOpenDuplicates",Ee],preventDuplicates:[2,"preventDuplicates","preventDuplicates",Ee],showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},features:[xt],decls:3,vars:5,consts:[["container",""],[1,"p-toast","p-component",3,"ngClass","ngStyle"],[3,"message","index","life","template","headlessTemplate","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"onClose","message","index","life","template","headlessTemplate","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions"]],template:function(i,r){i&1&&(y(0,"div",1,0),B(2,jO,1,10,"p-toastItem",2),_()),i&2&&(se(r.styleClass),R("ngClass","p-toast-"+r._position)("ngStyle",r.style),E(2),R("ngForOf",r.messages))},dependencies:[li,Fn,Ui,$O],styles:[`@layer primeng{.p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;flex:none}.p-toast-icon-close.p-link{cursor:pointer}}
`],encapsulation:2,data:{animation:[po("toastAnimation",[cr(":enter, :leave",[w_("@*",v_())])])]},changeDetection:0})}return n})(),bt=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ze({type:n});static \u0275inj=Xe({imports:[Un,Kl,$p,Wp,zp,qp,Hp,Zn]})}return n})();var xI=(()=>{class n{postService;post;constructor(t){this.postService=t}toggleDelete(){return C(this,null,function*(){yield this.postService.deletePost(this.post)})}static \u0275fac=function(i){return new(i||n)(k(_n))};static \u0275cmp=F({type:n,selectors:[["delete"]],inputs:{post:"post"},standalone:!0,features:[j],decls:3,vars:0,consts:[["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","grey","viewBox","0 0 16 16",1,"delete",3,"click"],["d","M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"]],template:function(i,r){i&1&&(y(0,"div"),Pe(),y(1,"svg",0),z("click",function(){return r.toggleDelete()}),O(2,"path",1),_()())},styles:[".delete[_ngcontent-%COMP%]:hover{fill:var(--c-primary);cursor:pointer}"]})}return n})();var OI=(()=>{class n{router;previousRoute;currentRoute;constructor(t){this.router=t,this.currentRoute=t.url,this.router.events.pipe(ki(i=>i instanceof An)).subscribe(i=>{this.previousRoute=this.currentRoute,this.currentRoute=i.url})}static \u0275fac=function(i){return new(i||n)(re(jt))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WO(n,e){if(n&1){let t=Se();y(0,"div",11),M(1),y(2,"div",12)(3,"p"),M(4),_(),O(5,"img",13),_(),O(6,"br"),y(7,"button",14),z("click",function(){Z(t);let r=L(2);return ee(r.showFullPost(r.previousNavPath))}),M(8," Go back "),_()()}if(n&2){let t=L(2);E(),uo(" ",t.post.post.description," "),E(3),uo("Author: ",t.post.post.userEmail,""),E(),R("src",t.post.post==null?null:t.post.post.userAvatar,En)}}function HO(n,e){if(n&1){let t=Se();y(0,"div")(1,"comment",17),z("click",function(){Z(t);let r=L(3);return ee(r.toggleComment())}),_(),O(2,"like",18),_()}if(n&2){let t=L(3);E(),R("post",t.post),E(),R("isLiked",t.isLiked)("post",t.post)("userId",t.userId)}}function zO(n,e){if(n&1&&(y(0,"div"),O(1,"comment",19)(2,"delete",20)(3,"bookmarkHeart",21),_()),n&2){let t=L(3);E(),R("isPostByUser",!0)("post",t.post),E(),R("post",t.post),E(),R("postId",t.post.id)}}function GO(n,e){if(n&1){let t=Se();y(0,"div",15),B(1,HO,3,4,"div",16),y(2,"button",14),z("click",function(){Z(t);let r=L(2);return ee(r.showFullPost(r.post==null?null:r.post.id))}),M(3," Full view "),_(),B(4,zO,4,4,"ng-template",null,1,st),_()}if(n&2){let t=rt(5),i=L(2);E(),R("ngIf",i.post.post.userId!==i.userId)("ngIfElse",t)}}function KO(n,e){if(n&1){let t=Se();y(0,"form",22),z("ngSubmit",function(){Z(t);let r=L(2);return ee(r.submitComment())}),y(1,"input",23),Qe("ngModelChange",function(r){Z(t);let s=L(2);return Ke(s.comment,r)||(s.comment=r),ee(r)}),_(),y(2,"button",24),M(3,"Submit"),_(),y(4,"button",25),z("click",function(){Z(t);let r=L(2);return ee(r.toggleComment())}),M(5," Cancel "),_()()}if(n&2){let t=L(2);E(),Ge("ngModel",t.comment)}}function QO(n,e){if(n&1&&(y(0,"div",4)(1,"div",5),O(2,"img",6),_(),y(3,"div",7)(4,"h2",8),M(5),_(),y(6,"p"),M(7),_(),B(8,WO,9,3,"div",9)(9,GO,6,2,"ng-template",null,0,st)(11,KO,6,1,"form",10),_()()),n&2){let t=rt(10),i=L();E(2),R("src",i.post.post==null?null:i.post.post.image,En),E(3),pe(i.post.post==null?null:i.post.post.title),E(2),pe(i.post.post==null?null:i.post.post.shortDescription),E(),R("ngIf",i.showFullView)("ngIfElse",t),E(3),R("ngIf",i.showComment)}}var Ps=(()=>{class n{postService;auth;route;routeService;db;messageService;post;userId;showFullView=!1;user=null;previousNavPath=null;showComment=!1;comment="";isLiked=!1;constructor(t,i,r,s,o,c){this.postService=t,this.auth=i,this.route=r,this.routeService=s,this.db=o,this.messageService=c}ngOnInit(){this.auth.user$.subscribe(t=>this.user=t),this.previousNavPath=this.routeService.previousRoute,fn(Ne(this.db,`posts/${this.post?.id}/likedBy`),t=>{let i=t.val();i&&(Object.keys(i).includes(this.userId)?this.isLiked=!0:this.isLiked=!1)})}showFullPost(t){t===this.previousNavPath?this.route.navigate([this.previousNavPath]):this.route.navigate([`/fullViewPost/${t}`])}submitComment(){return C(this,null,function*(){try{yield this.postService.uploadComment(this.comment,this.post.id,this.userId),this.messageService.add(bI)}catch(t){this.messageService.add(TI(t))}})}toggleComment(){this.showComment=!this.showComment}static \u0275fac=function(i){return new(i||n)(k(_n),k(ke),k(jt),k(OI),k(Te),k(ye))};static \u0275cmp=F({type:n,selectors:[["post"]],inputs:{post:"post",userId:"userId",showFullView:"showFullView"},standalone:!0,features:[He([ye]),j],decls:3,vars:1,consts:[["shortView",""],["postByUser",""],[1,"post"],["class","post__body",4,"ngIf"],[1,"post__body"],[1,"post__img","image-fit"],["alt","Post Image",3,"src"],[1,"post__content"],[1,"post__title"],["class","post__description",4,"ngIf","ngIfElse"],[3,"ngSubmit",4,"ngIf"],[1,"post__description"],[1,"author"],["alt","user avatar",3,"src"],[1,"btn",3,"click"],[1,"icons"],[4,"ngIf","ngIfElse"],[3,"click","post"],[3,"isLiked","post","userId"],[3,"isPostByUser","post"],[3,"post"],[3,"postId"],[3,"ngSubmit"],["type","text","placeholder","Leave a comment","name","comment",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],["type","reset",1,"btn",3,"click"]],template:function(i,r){i&1&&(y(0,"div",2),B(1,QO,12,6,"div",3),O(2,"p-toast"),_()),i&2&&(E(),R("ngIf",r.post))},dependencies:[de,Qw,Yw,qt,wn,$t,yn,vn,en,Zt,yI,bt,Tt,xI],styles:[".post[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;border-radius:8px;box-shadow:1px 2px 4px #00000080;overflow:hidden;min-height:500px;height:100%;position:relative}.post[_ngcontent-%COMP%]   .post__body[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.post[_ngcontent-%COMP%]   .post__img[_ngcontent-%COMP%]{padding-bottom:50%}.post[_ngcontent-%COMP%]   .post__content[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:space-between;height:100%}.post[_ngcontent-%COMP%]   .post__content[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:.9em;color:#888}.post[_ngcontent-%COMP%]   .post__title[_ngcontent-%COMP%]{font-size:1.5em;margin:0;color:#333;text-align:center}.post[_ngcontent-%COMP%]   .post__description[_ngcontent-%COMP%]{font-size:medium;color:#666;overflow:hidden;display:flex;flex-direction:column;gap:20px}.post[_ngcontent-%COMP%]   .post__description[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{display:flex;flex:row;align-items:flex-end;justify-content:center;text-decoration:overline}.post[_ngcontent-%COMP%]   .post__description[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:60%;width:5rem;height:5rem}.post[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;background-color:#fff;padding:50px 10px 20px;width:100%;animation:slideIn .2s}.post[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:6px}"]})}return n})();function YO(n,e){if(n&1&&(y(0,"div",5)(1,"div",6),O(2,"span",7),_(),y(3,"p"),M(4),_()()),n&2){let t=L();E(4),pe(t.info[1])}}function JO(n,e){if(n&1&&(y(0,"div",5)(1,"div",6),O(2,"span",8),_(),y(3,"p"),M(4),_()()),n&2){let t=L();E(4),pe(t.info[1])}}function XO(n,e){if(n&1&&(y(0,"div",5)(1,"div",6),O(2,"span",9),_(),y(3,"p"),M(4),_()()),n&2){let t=L();E(4),pe(t.info[3])}}function ZO(n,e){if(n&1&&(y(0,"div",5)(1,"div",6),O(2,"span",10),_(),y(3,"p"),M(4),_()()),n&2){let t=L();E(4),pe(t.info[3])}}var NI=(()=>{class n{info=[];static \u0275fac=function(i){return new(i||n)};static \u0275cmp=F({type:n,selectors:[["block"]],inputs:{info:"info"},standalone:!0,features:[j],decls:11,vars:5,consts:[["elseBlockNumber",""],["elseBlockHeart",""],[1,"block__container"],[1,"block__body"],["class","info__stats",4,"ngIf","ngIfElse"],[1,"info__stats"],[1,"icon"],[1,"pi","pi-calendar-clock",2,"font-size","var(--icon-size)","color","#90caf9"],[1,"pi","pi-cloud-upload",2,"font-size","var(--icon-size)","color","#abbdf6"],[1,"pi","pi-trophy",2,"color","#cfb280","font-size","var(--icon-size)"],[1,"pi","pi-heart",2,"font-size","var(--icon-size)","color","red"]],template:function(i,r){if(i&1&&(y(0,"div",2)(1,"div",3)(2,"h2"),M(3),_(),y(4,"ul"),B(5,YO,5,1,"div",4)(6,JO,5,1,"ng-template",null,0,st)(8,XO,5,1,"div",4)(9,ZO,5,1,"ng-template",null,1,st),_()()()),i&2){let s=rt(7),o=rt(10);E(3),pe(r.info[0]),E(2),R("ngIf",r.info[2]==="calendar")("ngIfElse",s),E(3),R("ngIf",r.info[4]==="user")("ngIfElse",o)}},dependencies:[de],styles:[".block__container[_ngcontent-%COMP%]{display:flex;justify-content:center;border-radius:8px;box-shadow:1px 2px 4px #00000080;background-color:#fff;width:27rem;height:14.3rem;margin-left:35px;animation:popIn .6s ease-out forwards}.block__container[_ngcontent-%COMP%]   .block__body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;width:100%;padding:20px;gap:20px}.block__container[_ngcontent-%COMP%]   .info__stats[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin-bottom:10px}.block__container[_ngcontent-%COMP%]   .info__stats[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px}.block__container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:7px}"]})}return n})();var Gp=(()=>{class n extends Je{static \u0275fac=(()=>{let t;return function(r){return(t||(t=De(n)))(r||n)}})();static \u0275cmp=F({type:n,selectors:[["ChevronDownIcon"]],standalone:!0,features:[be,j],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z","fill","currentColor"]],template:function(i,r){i&1&&(Pe(),y(0,"svg",0),O(1,"path",1),_()),i&2&&(se(r.getClassNames()),H("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();var Kp=(()=>{class n extends Je{static \u0275fac=(()=>{let t;return function(r){return(t||(t=De(n)))(r||n)}})();static \u0275cmp=F({type:n,selectors:[["ChevronLeftIcon"]],standalone:!0,features:[be,j],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z","fill","currentColor"]],template:function(i,r){i&1&&(Pe(),y(0,"svg",0),O(1,"path",1),_()),i&2&&(se(r.getClassNames()),H("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();var Qp=(()=>{class n extends Je{static \u0275fac=(()=>{let t;return function(r){return(t||(t=De(n)))(r||n)}})();static \u0275cmp=F({type:n,selectors:[["ChevronRightIcon"]],standalone:!0,features:[be,j],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(i,r){i&1&&(Pe(),y(0,"svg",0),O(1,"path",1),_()),i&2&&(se(r.getClassNames()),H("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();var Ds=(()=>{class n extends Je{static \u0275fac=(()=>{let t;return function(r){return(t||(t=De(n)))(r||n)}})();static \u0275cmp=F({type:n,selectors:[["ChevronUpIcon"]],standalone:!0,features:[be,j],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12.2097 10.4113C12.1057 10.4118 12.0027 10.3915 11.9067 10.3516C11.8107 10.3118 11.7237 10.2532 11.6506 10.1792L6.93602 5.46461L2.22139 10.1476C2.07272 10.244 1.89599 10.2877 1.71953 10.2717C1.54307 10.2556 1.3771 10.1808 1.24822 10.0593C1.11933 9.93766 1.035 9.77633 1.00874 9.6011C0.982477 9.42587 1.0158 9.2469 1.10338 9.09287L6.37701 3.81923C6.52533 3.6711 6.72639 3.58789 6.93602 3.58789C7.14565 3.58789 7.3467 3.6711 7.49502 3.81923L12.7687 9.09287C12.9168 9.24119 13 9.44225 13 9.65187C13 9.8615 12.9168 10.0626 12.7687 10.2109C12.616 10.3487 12.4151 10.4207 12.2097 10.4113Z","fill","currentColor"]],template:function(i,r){i&1&&(Pe(),y(0,"svg",0),O(1,"path",1),_()),i&2&&(se(r.getClassNames()),H("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();var eN=["itemsContainer"],tN=["indicatorContent"],nN=[[["p-header"]],[["p-footer"]]],iN=["p-header","p-footer"],rN=(n,e)=>({"p-carousel p-component":!0,"p-carousel-vertical":n,"p-carousel-horizontal":e}),sN=n=>({height:n}),oN=n=>({"p-carousel-prev p-link":!0,"p-disabled":n}),kI=(n,e,t)=>({"p-carousel-item p-carousel-item-cloned":!0,"p-carousel-item-active":n,"p-carousel-item-start":e,"p-carousel-item-end":t}),Yp=n=>({$implicit:n}),aN=(n,e,t)=>({"p-carousel-item":!0,"p-carousel-item-active":n,"p-carousel-item-start":e,"p-carousel-item-end":t}),cN=n=>({"p-carousel-next p-link":!0,"p-disabled":n}),lN=n=>({"p-carousel-indicator":!0,"p-highlight":n});function uN(n,e){n&1&&Tn(0)}function hN(n,e){if(n&1&&(y(0,"div",12),Vn(1),B(2,uN,1,0,"ng-container",13),_()),n&2){let t=L();E(2),R("ngTemplateOutlet",t.headerTemplate)}}function dN(n,e){n&1&&O(0,"ChevronLeftIcon",18),n&2&&R("styleClass","carousel-prev-icon")}function fN(n,e){n&1&&O(0,"ChevronUpIcon",18),n&2&&R("styleClass","carousel-prev-icon")}function pN(n,e){if(n&1&&(Gt(0),B(1,dN,1,1,"ChevronLeftIcon",17)(2,fN,1,1,"ChevronUpIcon",17),Kt()),n&2){let t=L(2);E(),R("ngIf",!t.isVertical()),E(),R("ngIf",t.isVertical())}}function mN(n,e){}function gN(n,e){n&1&&B(0,mN,0,0,"ng-template")}function _N(n,e){if(n&1&&(y(0,"span",19),B(1,gN,1,0,null,13),_()),n&2){let t=L(2);E(),R("ngTemplateOutlet",t.previousIconTemplate)}}function yN(n,e){if(n&1){let t=Se();y(0,"button",14),z("click",function(r){Z(t);let s=L();return ee(s.navBackward(r))}),B(1,pN,3,2,"ng-container",15)(2,_N,2,1,"span",16),_()}if(n&2){let t=L();R("ngClass",ut(5,oN,t.isBackwardNavDisabled()))("disabled",t.isBackwardNavDisabled()),H("aria-label",t.ariaPrevButtonLabel()),E(),R("ngIf",!t.previousIconTemplate),E(),R("ngIf",t.previousIconTemplate)}}function vN(n,e){n&1&&Tn(0)}function wN(n,e){if(n&1&&(y(0,"div",4),B(1,vN,1,0,"ng-container",20),_()),n&2){let t=e.$implicit,i=e.index,r=L();R("ngClass",hc(6,kI,r.totalShiftedItems*-1===r.value.length,i===0,r.clonedItemsForStarting.length-1===i)),H("aria-hidden",r.totalShiftedItems*-1!==r.value.length)("aria-label",r.ariaSlideNumber(i))("aria-roledescription",r.ariaSlideLabel()),E(),R("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",ut(10,Yp,t))}}function IN(n,e){n&1&&Tn(0)}function CN(n,e){if(n&1&&(y(0,"div",4),B(1,IN,1,0,"ng-container",20),_()),n&2){let t=e.$implicit,i=e.index,r=L();R("ngClass",hc(6,aN,r.firstIndex()<=i&&r.lastIndex()>=i,r.firstIndex()===i,r.lastIndex()===i)),H("aria-hidden",r.totalShiftedItems*-1!==r.value.length)("aria-label",r.ariaSlideNumber(i))("aria-roledescription",r.ariaSlideLabel()),E(),R("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",ut(10,Yp,t))}}function EN(n,e){n&1&&Tn(0)}function TN(n,e){if(n&1&&(y(0,"div",4),B(1,EN,1,0,"ng-container",20),_()),n&2){let t=e.$implicit,i=e.index,r=L();R("ngClass",hc(3,kI,r.totalShiftedItems*-1===r.numVisible,i===0,r.clonedItemsForFinishing.length-1===i)),E(),R("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",ut(7,Yp,t))}}function bN(n,e){n&1&&O(0,"ChevronRightIcon",18),n&2&&R("styleClass","carousel-prev-icon")}function SN(n,e){n&1&&O(0,"ChevronDownIcon",18),n&2&&R("styleClass","carousel-prev-icon")}function AN(n,e){if(n&1&&(Gt(0),B(1,bN,1,1,"ChevronRightIcon",17)(2,SN,1,1,"ChevronDownIcon",17),Kt()),n&2){let t=L(2);E(),R("ngIf",!t.isVertical()),E(),R("ngIf",t.isVertical())}}function RN(n,e){}function PN(n,e){n&1&&B(0,RN,0,0,"ng-template")}function DN(n,e){if(n&1&&(y(0,"span",19),B(1,PN,1,0,null,13),_()),n&2){let t=L(2);E(),R("ngTemplateOutlet",t.nextIconTemplate)}}function xN(n,e){if(n&1){let t=Se();y(0,"button",14),z("click",function(r){Z(t);let s=L();return ee(s.navForward(r))}),B(1,AN,3,2,"ng-container",15)(2,DN,2,1,"span",16),_()}if(n&2){let t=L();R("ngClass",ut(5,cN,t.isForwardNavDisabled()))("disabled",t.isForwardNavDisabled()),H("aria-label",t.ariaNextButtonLabel()),E(),R("ngIf",!t.nextIconTemplate),E(),R("ngIf",t.nextIconTemplate)}}function ON(n,e){if(n&1){let t=Se();y(0,"li",4)(1,"button",22),z("click",function(r){let s=Z(t).index,o=L(2);return ee(o.onDotClick(r,s))}),_()()}if(n&2){let t=e.index,i=L(2);R("ngClass",ut(9,lN,i._page===t)),H("data-pc-section","indicator"),E(),se(i.indicatorStyleClass),R("ngClass","p-link")("ngStyle",i.indicatorStyle)("tabindex",i._page===t?0:-1),H("aria-label",i.ariaPageLabel(t+1))("aria-current",i._page===t?"page":void 0)}}function NN(n,e){if(n&1){let t=Se();y(0,"ul",21,1),z("keydown",function(r){Z(t);let s=L();return ee(s.onIndicatorKeydown(r))}),B(2,ON,2,11,"li",9),_()}if(n&2){let t=L();se(t.indicatorsContentClass),R("ngClass","p-carousel-indicators p-reset")("ngStyle",t.indicatorsContentStyle),E(2),R("ngForOf",t.totalDotsArray())}}function kN(n,e){n&1&&Tn(0)}function MN(n,e){if(n&1&&(y(0,"div",23),Vn(1,1),B(2,kN,1,0,"ng-container",13),_()),n&2){let t=L();E(2),R("ngTemplateOutlet",t.footerTemplate)}}var MI=(()=>{class n{el;zone;cd;renderer;document;platformId;config;get page(){return this._page}set page(t){this.isCreated&&t!==this._page&&(this.autoplayInterval&&this.stopAutoplay(),t>this._page&&t<=this.totalDots()-1?this.step(-1,t):t<this._page&&this.step(1,t)),this._page=t}get numVisible(){return this._numVisible}set numVisible(t){this._numVisible=t}get numScroll(){return this._numVisible}set numScroll(t){this._numScroll=t}responsiveOptions;orientation="horizontal";verticalViewPortHeight="300px";contentClass="";indicatorsContentClass="";indicatorsContentStyle;indicatorStyleClass="";indicatorStyle;get value(){return this._value}set value(t){this._value=t}circular=!1;showIndicators=!0;showNavigators=!0;autoplayInterval=0;style;styleClass;onPage=new $e;itemsContainer;indicatorContent;headerFacet;footerFacet;templates;_numVisible=1;_numScroll=1;_oldNumScroll=0;prevState={numScroll:0,numVisible:0,value:[]};defaultNumScroll=1;defaultNumVisible=1;_page=0;_value;carouselStyle;id;totalShiftedItems;isRemainingItemsAdded=!1;animationTimeout;translateTimeout;remainingItems=0;_items;startPos;documentResizeListener;clonedItemsForStarting;clonedItemsForFinishing;allowAutoplay;interval;isCreated;swipeThreshold=20;itemTemplate;headerTemplate;footerTemplate;previousIconTemplate;nextIconTemplate;window;constructor(t,i,r,s,o,c,u){this.el=t,this.zone=i,this.cd=r,this.renderer=s,this.document=o,this.platformId=c,this.config=u,this.totalShiftedItems=this.page*this.numScroll*-1,this.window=this.document.defaultView}ngOnChanges(t){Qt(this.platformId)&&(t.value&&this.circular&&this._value&&this.setCloneItems(),this.isCreated&&(t.numVisible&&(this.responsiveOptions&&(this.defaultNumVisible=this.numVisible),this.isCircular()&&this.setCloneItems(),this.createStyle(),this.calculatePosition()),t.numScroll&&this.responsiveOptions&&(this.defaultNumScroll=this.numScroll))),this.cd.markForCheck()}ngAfterContentInit(){this.id=gn(),Qt(this.platformId)&&(this.allowAutoplay=!!this.autoplayInterval,this.circular&&this.setCloneItems(),this.responsiveOptions&&(this.defaultNumScroll=this._numScroll,this.defaultNumVisible=this._numVisible),this.createStyle(),this.calculatePosition(),this.responsiveOptions&&this.bindDocumentListeners()),this.templates?.forEach(t=>{switch(t.getType()){case"item":this.itemTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"previousicon":this.previousIconTemplate=t.template;break;case"nexticon":this.nextIconTemplate=t.template;break;default:this.itemTemplate=t.template;break}}),this.cd.detectChanges()}ngAfterContentChecked(){if(Qt(this.platformId)){let t=this.isCircular(),i=this.totalShiftedItems;if(this.value&&this.itemsContainer&&(this.prevState.numScroll!==this._numScroll||this.prevState.numVisible!==this._numVisible||this.prevState.value.length!==this.value.length)){this.autoplayInterval&&this.stopAutoplay(!1),this.remainingItems=(this.value.length-this._numVisible)%this._numScroll;let r=this._page;this.totalDots()!==0&&r>=this.totalDots()&&(r=this.totalDots()-1,this._page=r,this.onPage.emit({page:this.page})),i=r*this._numScroll*-1,t&&(i-=this._numVisible),r===this.totalDots()-1&&this.remainingItems>0?(i+=-1*this.remainingItems+this._numScroll,this.isRemainingItemsAdded=!0):this.isRemainingItemsAdded=!1,i!==this.totalShiftedItems&&(this.totalShiftedItems=i),this._oldNumScroll=this._numScroll,this.prevState.numScroll=this._numScroll,this.prevState.numVisible=this._numVisible,this.prevState.value=[...this._value],this.totalDots()>0&&this.itemsContainer.nativeElement&&(this.itemsContainer.nativeElement.style.transform=this.isVertical()?`translate3d(0, ${i*(100/this._numVisible)}%, 0)`:`translate3d(${i*(100/this._numVisible)}%, 0, 0)`),this.isCreated=!0,this.autoplayInterval&&this.isAutoplay()&&this.startAutoplay()}t&&(this.page===0?i=-1*this._numVisible:i===0&&(i=-1*this.value.length,this.remainingItems>0&&(this.isRemainingItemsAdded=!0)),i!==this.totalShiftedItems&&(this.totalShiftedItems=i))}}createStyle(){this.carouselStyle||(this.carouselStyle=this.renderer.createElement("style"),this.carouselStyle.type="text/css",ve.setAttribute(this.carouselStyle,"nonce",this.config?.csp()?.nonce),this.renderer.appendChild(this.document.head,this.carouselStyle));let t=`
            #${this.id} .p-carousel-item {
				flex: 1 0 ${100/this.numVisible}%
			}
        `;if(this.responsiveOptions){this.responsiveOptions.sort((i,r)=>{let s=i.breakpoint,o=r.breakpoint,c=null;return s==null&&o!=null?c=-1:s!=null&&o==null?c=1:s==null&&o==null?c=0:typeof s=="string"&&typeof o=="string"?c=s.localeCompare(o,void 0,{numeric:!0}):c=s<o?-1:s>o?1:0,-1*c});for(let i=0;i<this.responsiveOptions.length;i++){let r=this.responsiveOptions[i];t+=`
                    @media screen and (max-width: ${r.breakpoint}) {
                        #${this.id} .p-carousel-item {
                            flex: 1 0 ${100/r.numVisible}%
                        }
                    }
                `}}this.carouselStyle.innerHTML=t}calculatePosition(){if(this.responsiveOptions){let t={numVisible:this.defaultNumVisible,numScroll:this.defaultNumScroll};if(typeof window<"u"){let i=window.innerWidth;for(let r=0;r<this.responsiveOptions.length;r++){let s=this.responsiveOptions[r];parseInt(s.breakpoint,10)>=i&&(t=s)}}if(this._numScroll!==t.numScroll){let i=this._page;i=Math.floor(i*this._numScroll/t.numScroll);let r=t.numScroll*this.page*-1;this.isCircular()&&(r-=t.numVisible),this.totalShiftedItems=r,this._numScroll=t.numScroll,this._page=i,this.onPage.emit({page:this.page})}this._numVisible!==t.numVisible&&(this._numVisible=t.numVisible,this.setCloneItems()),this.cd.markForCheck()}}setCloneItems(){this.clonedItemsForStarting=[],this.clonedItemsForFinishing=[],this.isCircular()&&(this.clonedItemsForStarting.push(...this.value.slice(-1*this._numVisible)),this.clonedItemsForFinishing.push(...this.value.slice(0,this._numVisible)))}firstIndex(){return this.isCircular()?-1*(this.totalShiftedItems+this.numVisible):this.totalShiftedItems*-1}lastIndex(){return this.firstIndex()+this.numVisible-1}totalDots(){return this.value?.length?Math.ceil((this.value.length-this._numVisible)/this._numScroll)+1:0}totalDotsArray(){let t=this.totalDots();return t<=0?[]:Array(t).fill(0)}isVertical(){return this.orientation==="vertical"}isCircular(){return this.circular&&this.value&&this.value.length>=this.numVisible}isAutoplay(){return this.autoplayInterval&&this.allowAutoplay}isForwardNavDisabled(){return this.isEmpty()||this._page>=this.totalDots()-1&&!this.isCircular()}isBackwardNavDisabled(){return this.isEmpty()||this._page<=0&&!this.isCircular()}isEmpty(){return!this.value||this.value.length===0}navForward(t,i){(this.isCircular()||this._page<this.totalDots()-1)&&this.step(-1,i),this.autoplayInterval&&this.stopAutoplay(),t&&t.cancelable&&t.preventDefault()}navBackward(t,i){(this.isCircular()||this._page!==0)&&this.step(1,i),this.autoplayInterval&&this.stopAutoplay(),t&&t.cancelable&&t.preventDefault()}onDotClick(t,i){let r=this._page;this.autoplayInterval&&this.stopAutoplay(),i>r?this.navForward(t,i):i<r&&this.navBackward(t,i)}onIndicatorKeydown(t){switch(t.code){case"ArrowRight":this.onRightKey();break;case"ArrowLeft":this.onLeftKey();break}}onRightKey(){let t=[...ve.find(this.indicatorContent.nativeElement,'[data-pc-section="indicator"]')],i=this.findFocusedIndicatorIndex();this.changedFocusedIndicator(i,i+1===t.length?t.length-1:i+1)}onLeftKey(){let t=this.findFocusedIndicatorIndex();this.changedFocusedIndicator(t,t-1<=0?0:t-1)}onHomeKey(){let t=this.findFocusedIndicatorIndex();this.changedFocusedIndicator(t,0)}onEndKey(){let t=[...ve.find(this.indicatorContent.nativeElement,'[data-pc-section="indicator"]r')],i=this.findFocusedIndicatorIndex();this.changedFocusedIndicator(i,t.length-1)}onTabKey(){let t=[...ve.find(this.indicatorContent.nativeElement,'[data-pc-section="indicator"]')],i=t.findIndex(o=>ve.getAttribute(o,"data-p-highlight")===!0),r=ve.findSingle(this.indicatorContent.nativeElement,'[data-pc-section="indicator"] > button[tabindex="0"]'),s=t.findIndex(o=>o===r.parentElement);t[s].children[0].tabIndex="-1",t[i].children[0].tabIndex="0"}findFocusedIndicatorIndex(){let t=[...ve.find(this.indicatorContent.nativeElement,'[data-pc-section="indicator"]')],i=ve.findSingle(this.indicatorContent.nativeElement,'[data-pc-section="indicator"] > button[tabindex="0"]');return t.findIndex(r=>r===i.parentElement)}changedFocusedIndicator(t,i){let r=[...ve.find(this.indicatorContent.nativeElement,'[data-pc-section="indicator"]')];r[t].children[0].tabIndex="-1",r[i].children[0].tabIndex="0",r[i].children[0].focus()}step(t,i){let r=this.totalShiftedItems,s=this.isCircular();if(i!=null)r=this._numScroll*i*-1,s&&(r-=this._numVisible),this.isRemainingItemsAdded=!1;else{r+=this._numScroll*t,this.isRemainingItemsAdded&&(r+=this.remainingItems-this._numScroll*t,this.isRemainingItemsAdded=!1);let o=s?r+this._numVisible:r;i=Math.abs(Math.floor(o/this._numScroll))}s&&this.page===this.totalDots()-1&&t===-1?(r=-1*(this.value.length+this._numVisible),i=0):s&&this.page===0&&t===1?(r=0,i=this.totalDots()-1):i===this.totalDots()-1&&this.remainingItems>0&&(r+=this.remainingItems*-1-this._numScroll*t,this.isRemainingItemsAdded=!0),this.itemsContainer&&(this.itemsContainer.nativeElement.style.transform=this.isVertical()?`translate3d(0, ${r*(100/this._numVisible)}%, 0)`:`translate3d(${r*(100/this._numVisible)}%, 0, 0)`,this.itemsContainer.nativeElement.style.transition="transform 500ms ease 0s"),this.totalShiftedItems=r,this._page=i,this.onPage.emit({page:this.page}),this.cd.markForCheck()}startAutoplay(){this.interval=setInterval(()=>{this.totalDots()>0&&(this.page===this.totalDots()-1?this.step(-1,0):this.step(-1,this.page+1))},this.autoplayInterval),this.allowAutoplay=!0,this.cd.markForCheck()}stopAutoplay(t=!0){this.interval&&(clearInterval(this.interval),this.interval=void 0,t&&(this.allowAutoplay=!1)),this.cd.markForCheck()}isPlaying(){return!!this.interval}onTransitionEnd(){this.itemsContainer&&(this.itemsContainer.nativeElement.style.transition="",(this.page===0||this.page===this.totalDots()-1)&&this.isCircular()&&(this.itemsContainer.nativeElement.style.transform=this.isVertical()?`translate3d(0, ${this.totalShiftedItems*(100/this._numVisible)}%, 0)`:`translate3d(${this.totalShiftedItems*(100/this._numVisible)}%, 0, 0)`))}onTouchStart(t){let i=t.changedTouches[0];this.startPos={x:i.pageX,y:i.pageY}}onTouchMove(t){t.cancelable&&t.preventDefault()}onTouchEnd(t){let i=t.changedTouches[0];this.isVertical()?this.changePageOnTouch(t,i.pageY-this.startPos.y):this.changePageOnTouch(t,i.pageX-this.startPos.x)}changePageOnTouch(t,i){Math.abs(i)>this.swipeThreshold&&(i<0?this.navForward(t):this.navBackward(t))}ariaPrevButtonLabel(){return this.config.translation.aria?this.config.translation.aria.prevPageLabel:void 0}ariaSlideLabel(){return this.config.translation.aria?this.config.translation.aria.slide:void 0}ariaNextButtonLabel(){return this.config.translation.aria?this.config.translation.aria.nextPageLabel:void 0}ariaSlideNumber(t){return this.config.translation.aria?this.config.translation.aria.slideNumber.replace(/{slideNumber}/g,t):void 0}ariaPageLabel(t){return this.config.translation.aria?this.config.translation.aria.pageLabel.replace(/{page}/g,t):void 0}bindDocumentListeners(){Qt(this.platformId)&&(this.documentResizeListener||(this.documentResizeListener=this.renderer.listen(this.window,"resize",t=>{this.calculatePosition()})))}unbindDocumentListeners(){Qt(this.platformId)&&this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}ngOnDestroy(){this.responsiveOptions&&this.unbindDocumentListeners(),this.autoplayInterval&&this.stopAutoplay()}static \u0275fac=function(i){return new(i||n)(k(vt),k(xe),k(on),k(Ut),k(Ue),k(Dt),k(Ti))};static \u0275cmp=F({type:n,selectors:[["p-carousel"]],contentQueries:function(i,r,s){if(i&1&&(sn(s,$w,5),sn(s,qw,5),sn(s,Xn,4)),i&2){let o;wt(o=It())&&(r.headerFacet=o.first),wt(o=It())&&(r.footerFacet=o.first),wt(o=It())&&(r.templates=o)}},viewQuery:function(i,r){if(i&1&&(Br(eN,5),Br(tN,5)),i&2){let s;wt(s=It())&&(r.itemsContainer=s.first),wt(s=It())&&(r.indicatorContent=s.first)}},hostAttrs:[1,"p-element"],inputs:{page:"page",numVisible:"numVisible",numScroll:"numScroll",responsiveOptions:"responsiveOptions",orientation:"orientation",verticalViewPortHeight:"verticalViewPortHeight",contentClass:"contentClass",indicatorsContentClass:"indicatorsContentClass",indicatorsContentStyle:"indicatorsContentStyle",indicatorStyleClass:"indicatorStyleClass",indicatorStyle:"indicatorStyle",value:"value",circular:[2,"circular","circular",Ee],showIndicators:[2,"showIndicators","showIndicators",Ee],showNavigators:[2,"showNavigators","showNavigators",Ee],autoplayInterval:[2,"autoplayInterval","autoplayInterval",bn],style:"style",styleClass:"styleClass"},outputs:{onPage:"onPage"},features:[xt,ai],ngContentSelectors:iN,decls:14,vars:23,consts:[["itemsContainer",""],["indicatorContent",""],["role","region",3,"ngClass","ngStyle"],["class","p-carousel-header",4,"ngIf"],[3,"ngClass"],[1,"p-carousel-container"],["type","button","pRipple","",3,"ngClass","disabled","click",4,"ngIf"],[1,"p-carousel-items-content",3,"touchend","touchstart","touchmove","ngStyle"],[1,"p-carousel-items-container",3,"transitionend"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass","class","ngStyle","keydown",4,"ngIf"],["class","p-carousel-footer",4,"ngIf"],[1,"p-carousel-header"],[4,"ngTemplateOutlet"],["type","button","pRipple","",3,"click","ngClass","disabled"],[4,"ngIf"],["class","p-carousel-prev-icon",4,"ngIf"],[3,"styleClass",4,"ngIf"],[3,"styleClass"],[1,"p-carousel-prev-icon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"keydown","ngClass","ngStyle"],["type","button",3,"click","ngClass","ngStyle","tabindex"],[1,"p-carousel-footer"]],template:function(i,r){if(i&1){let s=Se();ci(nN),y(0,"div",2),B(1,hN,3,1,"div",3),y(2,"div",4)(3,"div",5),B(4,yN,3,7,"button",6),y(5,"div",7),z("touchend",function(c){return Z(s),ee(r.onTouchEnd(c))})("touchstart",function(c){return Z(s),ee(r.onTouchStart(c))})("touchmove",function(c){return Z(s),ee(r.onTouchMove(c))}),y(6,"div",8,0),z("transitionend",function(){return Z(s),ee(r.onTransitionEnd())}),B(8,wN,2,12,"div",9)(9,CN,2,12,"div",9)(10,TN,2,9,"div",9),_()(),B(11,xN,3,7,"button",6),_(),B(12,NN,3,5,"ul",10),_(),B(13,MN,3,1,"div",11),_()}i&2&&(se(r.styleClass),R("ngClass",jr(18,rN,r.isVertical(),!r.isVertical()))("ngStyle",r.style),H("id",r.id),E(),R("ngIf",r.headerFacet||r.headerTemplate),E(),se(r.contentClass),R("ngClass","p-carousel-content"),E(),H("aria-live",r.allowAutoplay?"polite":"off"),E(),R("ngIf",r.showNavigators),E(),R("ngStyle",ut(21,sN,r.isVertical()?r.verticalViewPortHeight:"auto")),E(3),R("ngForOf",r.clonedItemsForStarting),E(),R("ngForOf",r.value),E(),R("ngForOf",r.clonedItemsForFinishing),E(),R("ngIf",r.showNavigators),E(),R("ngIf",r.showIndicators),E(),R("ngIf",r.footerFacet||r.footerTemplate))},dependencies:()=>[li,Fn,de,Bi,Ui,Es,Qp,Kp,Gp,Ds],styles:[`@layer primeng{.p-carousel{display:flex;flex-direction:column}.p-carousel-content{display:flex;flex-direction:column;overflow:auto}.p-carousel-prev,.p-carousel-next{align-self:center;flex-grow:0;flex-shrink:0;display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-carousel-container{display:flex;flex-direction:row}.p-carousel-items-content{overflow:hidden;width:100%}.p-carousel-items-container{display:flex;flex-direction:row}.p-carousel-indicators{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap}.p-carousel-indicator>button{display:flex;align-items:center;justify-content:center}.p-carousel-vertical .p-carousel-container{flex-direction:column}.p-carousel-vertical .p-carousel-items-container{flex-direction:column;height:100%}.p-items-hidden .p-carousel-item{visibility:hidden}.p-items-hidden .p-carousel-item.p-carousel-item-active{visibility:visible}}
`],encapsulation:2,changeDetection:0})}return n})(),LI=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ze({type:n});static \u0275inj=Xe({imports:[Un,Zn,Kl,Qp,Kp,Gp,Ds,Un,Zn]})}return n})();var xs=(()=>{class n{db;constructor(t){this.db=t}changeUserAvatar(t,i){return C(this,null,function*(){try{Mw(i);let r=yield(yield Ei(Lt(this.db,"posts"))).val(),s=[];Object.entries(r).forEach(([o,c])=>{c.comments&&Object.entries(c.comments).forEach(([u,h])=>{h.createdBy===t&&s.push({post:o,comment:u,avatar:i,user:t})})});for(let o of s)yield xa(Lt(this.db,`posts/${o.post}/comments/${o.comment}`),{avatar:i});yield xa(Lt(this.db,`users/${t}`),{avatar:i})}catch(r){throw r}})}fetchTrendingUsers(){return C(this,null,function*(){try{let t=new Map,i=(yield Ei(Lt(this.db,"posts"))).val(),r=(yield Ei(Lt(this.db,"users"))).val();if(i){Object.entries(i).map(([p,m])=>({id:p,post:m})).map(p=>{let m=p.post.userId,g=Object.keys(p.post.likedBy).length||0,x=Object.keys(p.post.comments).length||0,N=Object.values(r).filter($=>$.uid===m);t.has(m)?t.set(m,{likes:t.get(m).likes+g,comments:t.get(m).comments+x,user:N[0]}):t.set(m,{likes:g,comments:x,user:N[0]})});let o=[...t.values()].sort((p,m)=>m.likes-p.likes),[c,u,h]=o;return{first:c,second:u,third:h}}else return[]}catch(t){throw t}})}isUserTrendy(t){return C(this,null,function*(){return Object.values((yield Ei(Lt(this.db,"users"))).val()).filter(s=>s.uid===t)[0].trendyUser?"You are currently a trendy user!":"Be more active!"})}static \u0275fac=function(i){return new(i||n)(re(Te))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VN(n,e){if(n&1&&(y(0,"div",6)(1,"div",7)(2,"div",8)(3,"p"),M(4),_(),y(5,"div",9),O(6,"img",10),_(),y(7,"div",11)(8,"div",12)(9,"span"),M(10,"Likes:"),_(),O(11,"span",13),y(12,"span",14),M(13),_()(),y(14,"div",15)(15,"span"),M(16,"Comments: "),_(),O(17,"span",16),y(18,"span",14),M(19),_()()()()()()),n&2){let t=e.$implicit;E(4),pe(t.user.username),E(2),R("src",t.user.avatar,En),E(7),pe(t.likes),E(6),pe(t.comments)}}function FN(n,e){if(n&1&&(y(0,"div",4),B(1,VN,20,4,"div",5),_()),n&2){let t=L();E(),R("ngForOf",t.trendingUsers)}}function UN(n,e){n&1&&M(0," There are currently no posts! ")}var VI=(()=>{class n{userService;db;trendingUsers=[];constructor(t,i){this.userService=t,this.db=i}ngOnInit(){return C(this,null,function*(){let t=yield this.userService.fetchTrendingUsers();Object.values(t).map(i=>{if(!i)this.trendingUsers=[];else{this.trendingUsers=Object.values(t);let r={};r.trendyUser=!0,this.trendingUsers.map(s=>C(this,null,function*(){return yield xa(Lt(this.db,`users/${s.user.username}`),r)}))}})})}static \u0275fac=function(i){return new(i||n)(k(xs),k(Te))};static \u0275cmp=F({type:n,selectors:[["trending-users"]],standalone:!0,features:[j],decls:8,vars:2,consts:[["noTrendyUsers",""],[1,"heading"],[1,"pi","pi-chart-line",2,"font-size","var(--icon-size)","color","black"],["class","container",4,"ngIf","ngIfElse"],[1,"container"],["class","trendy__users",4,"ngFor","ngForOf"],[1,"trendy__users"],[1,"user"],[1,"content"],[1,"image-fit"],["alt","user",3,"src"],[1,"stats"],[1,"likes"],[1,"pi","pi-heart",2,"font-size","var(--icon-size)","color","red"],[1,"count"],[1,"comments"],[1,"pi","pi-comments",2,"font-size","var(--icon-size)","color","grey"]],template:function(i,r){if(i&1&&(y(0,"div")(1,"div",1)(2,"h2"),M(3," Here are the most trendy users: "),O(4,"span",2),_()(),B(5,FN,2,1,"div",3),_(),B(6,UN,1,0,"ng-template",null,0,st)),i&2){let s=rt(7);E(5),R("ngIf",r.trendingUsers)("ngIfElse",s)}},dependencies:[Fn,de],styles:[".heading[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.container[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:20rem;height:20rem;margin:20px;background-image:url(https://fancywalls.eu/wp-content/uploads/minimalist-travel-pattern-repeat-removable-wallpaper-design.jpg);background-size:70%;background-position:center;background-color:#ffffffb3;box-shadow:1px 2px 4px #00000080;background-blend-mode:overlay;border-radius:8px}.container[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{margin-left:1rem;display:flex;align-items:flex-start;flex-direction:column}.container[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .likes[_ngcontent-%COMP%]{margin-left:10px}.container[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .image-fit[_ngcontent-%COMP%]{padding-bottom:100%;border-radius:50%;overflow:hidden;margin-bottom:10px}@media (max-width: 1000px){.container[_ngcontent-%COMP%]{display:flex;flex-direction:column}}"]})}return n})();function BN(n,e){n&1&&(y(0,"h2"),M(1," Create your own posts to see them here! You may be the next trendy user, so what are you waiting for ? "),_())}function jN(n,e){if(n&1&&O(0,"post",11),n&2){let t=e.$implicit,i=L(2);R("post",t)("userId",i.currentUser.uid)}}function $N(n,e){if(n&1&&(y(0,"div",8)(1,"p-carousel",9),B(2,jN,1,2,"ng-template",10),_()()),n&2){let t=L();E(),R("value",t.posts$)("numVisible",1)("numScroll",1)}}function qN(n,e){n&1&&(y(0,"div",12),O(1,"trending-users"),_())}var FI=(()=>{class n{auth;db;userService;currentUser=null;posts$=null;UserInfo=[];PostsInfo=[];likes=0;status="";constructor(t,i,r){this.auth=t,this.db=i,this.userService=r}ngOnInit(){return C(this,null,function*(){this.auth.user$.subscribe(s=>this.currentUser=s);let t=Number(this.currentUser?.metadata?.createdAt),i=new Date(t).toLocaleDateString();this.status=yield this.userService.isUserTrendy(this.currentUser.uid);let r=Ne(this.db,"posts");fn(r,s=>{let o=s.val();o&&(this.posts$=Object.entries(o).map(([c,u])=>({id:c,post:u})).filter(c=>c.post.userId===this.currentUser.uid),this.likes=this.posts$.filter(c=>c.post.likedBy).map(c=>Object.keys(c.post.likedBy)).flat().length),this.UserInfo.push("Your profile info",`Date of register : ${i||0}`,"calendar",`Status: ${this.status}`,"user"),this.PostsInfo.push("Statistics for posts",`Number of uploaded posts : ${this.posts$?.length||0}`,"number",`Likes : ${this.likes||0}`,"heart")})})}static \u0275fac=function(i){return new(i||n)(k(ke),k(Te),k(xs))};static \u0275cmp=F({type:n,selectors:[["home"]],standalone:!0,features:[j],decls:11,vars:7,consts:[["emptyHome",""],[1,"home__container","container"],[4,"ngIf"],[1,"posts__side__info"],[1,"side__info"],[3,"info"],["class","home__posts",4,"ngIf","ngIfElse"],[1,"trending__users"],[1,"home__posts"],["orientation","horizontal","verticalViewPortHeight","360px",3,"value","numVisible","numScroll"],["pTemplate","item"],[3,"post","userId"],[1,"empty__home"]],template:function(i,r){if(i&1&&(y(0,"div",1),B(1,BN,2,0,"h2",2),y(2,"div",3)(3,"div",4),O(4,"block",5)(5,"block",5),_(),B(6,$N,3,3,"div",6),_(),y(7,"div",7),O(8,"trending-users"),_(),B(9,qN,2,0,"ng-template",null,0,st),_()),i&2){let s=rt(10);Bt("empty__home__container",(r.posts$==null?null:r.posts$.length)===0),E(),R("ngIf",(r.posts$==null?null:r.posts$.length)===0),E(3),R("info",r.UserInfo),E(),R("info",r.PostsInfo),E(),R("ngIf",(r.posts$==null?null:r.posts$.length)>0)("ngIfElse",s)}},dependencies:[de,Ps,NI,LI,MI,Xn,VI],styles:[".home__container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;padding-top:3rem}.home__container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.home__container[_ngcontent-%COMP%]   .posts__side__info[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;gap:4rem}.home__container[_ngcontent-%COMP%]   .posts__side__info[_ngcontent-%COMP%]   .home__posts[_ngcontent-%COMP%]{width:43rem;height:46rem}.home__container[_ngcontent-%COMP%]   .posts__side__info[_ngcontent-%COMP%]   .home__posts[_ngcontent-%COMP%]   .trending__users[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.home__container[_ngcontent-%COMP%]   .posts__side__info[_ngcontent-%COMP%]   .side__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.6rem}.empty__home__container[_ngcontent-%COMP%]{animation:popIn .6s ease-out forwards;display:flex;flex-direction:column;align-items:center;justify-content:center}.empty__home__container[_ngcontent-%COMP%]   .side__info[_ngcontent-%COMP%]{display:flex;flex-direction:row}@media (max-width: 1123px){.posts__side__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}}"]})}return n})();var UI=(()=>{class n{auth;postService;messageService;db;user=null;post={title:"",description:"",shortDescription:"",userEmail:"",image:"",likedBy:0,userId:"",comments:""};constructor(t,i,r,s){this.auth=t,this.postService=i,this.messageService=r,this.db=s}ngOnInit(){return C(this,null,function*(){this.auth.user$.subscribe(r=>this.user=r);let t=(yield Ei(Lt(this.db,"users"))).val(),i=Object.values(t).filter(r=>r.uid===this.user.uid)[0];this.post.userAvatar=i.avatar,this.post.userEmail=i.email,this.post.userId=i.uid})}submitPost(){return C(this,null,function*(){try{yield this.postService.uploadPost(this.post),this.messageService.add(vI),this.post={}}catch(t){this.messageService.add(wI(t))}})}static \u0275fac=function(i){return new(i||n)(k(ke),k(_n),k(ye),k(Te))};static \u0275cmp=F({type:n,selectors:[["app-my-posts"]],standalone:!0,features:[He([ye]),j],decls:34,vars:4,consts:[[1,"form"],[1,"form__content"],[1,"form__text"],[1,"py-6"],[1,"form__body"],[1,"form__input",3,"ngSubmit"],[1,"form__control"],[1,"label"],[1,"label__text"],["type","text","placeholder","For example the name of the country","required","","name","title",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","For example the name of the town","required","","name","short description",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","Share your thoughts ","required","","name","description",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","Provide an image by URL","required","","name","image",1,"input",3,"ngModelChange","ngModel"],[1,"form__buttons"],["type","submit",1,"btn"]],template:function(i,r){i&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),M(4,"Create your personal post!"),_(),y(5,"p",3),M(6," Upload a picture from your favorite travel destination and a description. "),_()(),y(7,"div",4)(8,"form",5),z("ngSubmit",function(){return r.submitPost()}),y(9,"div",6)(10,"label",7)(11,"span",8),M(12,"Title"),_()(),y(13,"input",9),Qe("ngModelChange",function(o){return Ke(r.post.title,o)||(r.post.title=o),o}),_()(),y(14,"div",6)(15,"label",7)(16,"span",8),M(17,"Short Description"),_()(),y(18,"input",10),Qe("ngModelChange",function(o){return Ke(r.post.shortDescription,o)||(r.post.shortDescription=o),o}),_()(),y(19,"div",6)(20,"label",7)(21,"span",8),M(22,"Description"),_()(),y(23,"textarea",11),Qe("ngModelChange",function(o){return Ke(r.post.description,o)||(r.post.description=o),o}),M(24,"          "),_()(),y(25,"div",6)(26,"label",7)(27,"span",8),M(28,"Image"),_()(),y(29,"input",12),Qe("ngModelChange",function(o){return Ke(r.post.image,o)||(r.post.image=o),o}),_()(),y(30,"div",13)(31,"button",14),M(32,"Upload post"),_()()()()(),O(33,"p-toast"),_()),i&2&&(E(13),Ge("ngModel",r.post.title),E(5),Ge("ngModel",r.post.shortDescription),E(5),Ge("ngModel",r.post.description),E(6),Ge("ngModel",r.post.image))},dependencies:[qt,wn,$t,yn,vn,Nr,en,Zt,bt,Tt]})}return n})();function WN(n,e){if(n&1&&(y(0,"div",9)(1,"div",10),O(2,"img",11),y(3,"h4"),M(4),_()(),y(5,"h1"),M(6),_(),y(7,"p"),M(8),o_(9,"date"),_()()),n&2){let t=e.$implicit;E(2),R("src",t.avatar,En),E(2),pe(t.createdBy),E(2),pe(t.comment),E(2),pe(a_(9,4,t.createdOn,"short"))}}function HN(n,e){if(n&1&&(y(0,"div"),B(1,WN,10,7,"div",8),_()),n&2){let t=L();E(),R("ngForOf",t.comments$)}}function zN(n,e){n&1&&(y(0,"p"),M(1,"No comments yet."),_())}var BI=(()=>{class n{auth;route;postService;db;currentUser;post$;postId;isCommentSectionOpen=!1;comments$;userId;constructor(t,i,r,s){this.auth=t,this.route=i,this.postService=r,this.db=s}ngOnInit(){return C(this,null,function*(){this.auth.user$.subscribe(i=>this.currentUser=i),this.userId=this.currentUser.uid,this.postId=this.route.snapshot.paramMap.get("id"),this.post$=yield this.postService.fetchPost(this.postId);let t=Ne(this.db,`posts/${this.post$.id}/comments`);fn(t,i=>{let r=i.val();r&&(this.comments$=Object.values(r))})})}toggleCommentSection(){this.isCommentSectionOpen=!this.isCommentSectionOpen}static \u0275fac=function(i){return new(i||n)(k(ke),k(Rn),k(_n),k(Te))};static \u0275cmp=F({type:n,selectors:[["fullViewPost"]],standalone:!0,features:[j],decls:13,vars:10,consts:[["noComments",""],[1,"body"],["icon","pi pi-chevron-right","severity","warning",3,"click","rounded","outlined"],[1,"post"],[3,"post","showFullView"],[1,"comment__section"],["icon","pi pi-times","severity","warning",3,"click","rounded","outlined"],[4,"ngIf","ngIfElse"],["class","comment",4,"ngFor","ngForOf"],[1,"comment"],[1,"avatar"],["alt","avatar ",3,"src"]],template:function(i,r){if(i&1){let s=Se();y(0,"div",1)(1,"h1"),M(2," View all comments "),y(3,"p-button",2),z("click",function(){return Z(s),ee(r.toggleCommentSection())}),_()(),y(4,"div",3),O(5,"post",4),_(),y(6,"div",5)(7,"h3"),M(8," Comments "),y(9,"p-button",6),z("click",function(){return Z(s),ee(r.toggleCommentSection())}),_()(),B(10,HN,2,1,"div",7)(11,zN,2,0,"ng-template",null,0,st),_()()}if(i&2){let s=rt(12);E(3),R("rounded",!0)("outlined",!0),E(2),R("post",r.post$)("showFullView",!0),E(),Bt("open",r.isCommentSectionOpen),E(3),R("rounded",!0)("outlined",!0),E(),R("ngIf",(r.comments$==null?null:r.comments$.length)>0)("ngIfElse",s)}},dependencies:[Ps,Fn,de,Un,g_,Ql,Oa],styles:[".body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.body[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]{width:50rem;height:50rem;margin-bottom:20px}.comment__section[_ngcontent-%COMP%]{text-align:center;position:fixed;right:-500px;top:0;width:400px;height:100%;background-color:#f9f9f9;box-shadow:-2px 0 10px #0003;transition:right .8s ease;padding:20px;z-index:1000;overflow-y:auto}.comment__section[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px;margin-right:40px;padding:15px;background-color:#fff;border-radius:8px;box-shadow:0 2px 5px #0000001a}.comment__section[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1em;color:#555;margin:10px 0;word-wrap:break-word}.comment__section[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1em;color:#333;margin-top:10px}.comment__section[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8em;color:#999;margin-top:auto;text-align:right}.comment__section[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:flex;border-radius:60%;width:50px;height:50px}.comment__section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;border-bottom:2px solid var(--c-primary);padding-bottom:10px}.comment__section.open[_ngcontent-%COMP%]{right:0}"]})}return n})();var GN=(n,e)=>({showTransitionParams:n,hideTransitionParams:e}),KN=n=>({value:"open",params:n}),QN=()=>({styleClass:"p-scrolltop-icon"}),YN=()=>({"font-size":"1rem",scale:"1.5"});function JN(n,e){if(n&1&&O(0,"span",6),n&2){let t=L(3);se(t.icon),R("ngClass","p-scrolltop-icon")}}function XN(n,e){n&1&&O(0,"ChevronUpIcon",7),n&2&&R("styleClass","p-scrolltop-icon")("ngStyle",Xu(2,YN))}function ZN(n,e){if(n&1&&(Gt(0),B(1,JN,1,3,"span",4)(2,XN,1,3,"ChevronUpIcon",5),Kt()),n&2){let t=L(2);E(),R("ngIf",t.icon),E(),R("ngIf",!t.icon)}}function ek(n,e){}function tk(n,e){if(n&1&&B(0,ek,0,0,"ng-template",8),n&2){let t=L(2);R("ngIf",!t.icon)}}function nk(n,e){if(n&1){let t=Se();y(0,"button",1),z("@animation.start",function(r){Z(t);let s=L();return ee(s.onEnter(r))})("@animation.done",function(r){Z(t);let s=L();return ee(s.onLeave(r))})("click",function(){Z(t);let r=L();return ee(r.onClick())}),B(1,ZN,3,2,"ng-container",2)(2,tk,1,1,null,3),_()}if(n&2){let t=L();se(t.styleClass),R("@animation",ut(12,KN,jr(9,GN,t.showTransitionOptions,t.hideTransitionOptions)))("ngClass",t.containerClass())("ngStyle",t.style),H("aria-label",t.buttonAriaLabel),E(),R("ngIf",!t.iconTemplate),E(),R("ngTemplateOutlet",t.iconTemplate)("ngTemplateOutletContext",Xu(14,QN))}}var jI=(()=>{class n{document;platformId;renderer;el;cd;config;styleClass;style;target="window";threshold=400;icon;behavior="smooth";showTransitionOptions=".15s";hideTransitionOptions=".15s";buttonAriaLabel;templates;iconTemplate;documentScrollListener;parentScrollListener;visible=!1;overlay;window;constructor(t,i,r,s,o,c){this.document=t,this.platformId=i,this.renderer=r,this.el=s,this.cd=o,this.config=c,this.window=this.document.defaultView}ngOnInit(){this.target==="window"?this.bindDocumentScrollListener():this.target==="parent"&&this.bindParentScrollListener()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"icon":this.iconTemplate=t.template;break}})}onClick(){(this.target==="window"?this.window:this.el.nativeElement.parentElement).scroll({top:0,behavior:this.behavior})}onEnter(t){switch(t.toState){case"open":this.overlay=t.element,Xi.set("overlay",this.overlay,this.config.zIndex.overlay);break;case"void":this.overlay=null;break}}onLeave(t){switch(t.toState){case"void":Xi.clear(t.element);break}}checkVisibility(t){t>this.threshold?this.visible=!0:this.visible=!1,this.cd.markForCheck()}bindParentScrollListener(){Qt(this.platformId)&&(this.parentScrollListener=this.renderer.listen(this.el.nativeElement.parentElement,"scroll",()=>{this.checkVisibility(this.el.nativeElement.parentElement.scrollTop)}))}bindDocumentScrollListener(){Qt(this.platformId)&&(this.documentScrollListener=this.renderer.listen(this.window,"scroll",()=>{this.checkVisibility(ve.getWindowScrollTop())}))}unbindParentScrollListener(){this.parentScrollListener&&(this.parentScrollListener(),this.parentScrollListener=null)}unbindDocumentScrollListener(){this.documentScrollListener&&(this.documentScrollListener(),this.documentScrollListener=null)}containerClass(){return{"p-scrolltop p-link p-component":!0,"p-scrolltop-sticky":this.target!=="window"}}ngOnDestroy(){this.target==="window"?this.unbindDocumentScrollListener():this.target==="parent"&&this.unbindParentScrollListener(),this.overlay&&(Xi.clear(this.overlay),this.overlay=null)}static \u0275fac=function(i){return new(i||n)(k(Ue),k(Dt),k(Ut),k(vt),k(on),k(Ti))};static \u0275cmp=F({type:n,selectors:[["p-scrollTop"]],contentQueries:function(i,r,s){if(i&1&&sn(s,Xn,4),i&2){let o;wt(o=It())&&(r.templates=o)}},hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",target:"target",threshold:[2,"threshold","threshold",bn],icon:"icon",behavior:"behavior",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",buttonAriaLabel:"buttonAriaLabel"},features:[xt],decls:1,vars:1,consts:[["type","button",3,"ngClass","class","ngStyle","click",4,"ngIf"],["type","button",3,"click","ngClass","ngStyle"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"class","ngClass",4,"ngIf"],[3,"styleClass","ngStyle",4,"ngIf"],[3,"ngClass"],[3,"styleClass","ngStyle"],[3,"ngIf"]],template:function(i,r){i&1&&B(0,nk,3,15,"button",0),i&2&&R("ngIf",r.visible)},dependencies:()=>[li,de,Bi,Ui,Ds],styles:[`@layer primeng{.p-scrolltop{position:fixed;bottom:20px;right:20px;display:flex;align-items:center;justify-content:center}.p-scrolltop-sticky{position:sticky}.p-scrolltop-sticky.p-link{margin-left:auto}}
`],encapsulation:2,data:{animation:[po("animation",[mo("void",ar({opacity:0})),mo("open",ar({opacity:1})),cr("void => open",qr("{{showTransitionParams}}")),cr("open => void",qr("{{hideTransitionParams}}"))])]},changeDetection:0})}return n})(),$I=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ze({type:n});static \u0275inj=Xe({imports:[Un,Ds,Zn,Zn]})}return n})();function rk(n,e){if(n&1&&(y(0,"div",9),O(1,"post",10),_()),n&2){let t=e.$implicit,i=L(2);E(),R("post",t)("userId",i.currentUser.uid)}}function sk(n,e){if(n&1&&(y(0,"div",7),B(1,rk,2,2,"div",8),_()),n&2){let t=L();E(),R("ngForOf",t.posts$)}}function ok(n,e){n&1&&(y(0,"h1"),M(1,"No posts yet"),_())}var qI=(()=>{class n{auth;db;currentUser;posts$;constructor(t,i){this.auth=t,this.db=i}ngOnInit(){this.auth.user$.subscribe(i=>this.currentUser=i);let t=Ne(this.db,"posts");fn(t,i=>{this.posts$=i.val(),this.posts$&&(this.posts$=Object.entries(this.posts$).map(([r,s])=>({id:r,post:s})))})}static \u0275fac=function(i){return new(i||n)(k(ke),k(Te))};static \u0275cmp=F({type:n,selectors:[["allPosts"]],standalone:!0,features:[He([ye]),j],decls:12,vars:3,consts:[["emptyPosts",""],[1,"all__posts"],[1,"container"],[1,"posts__heading"],["class","cards__container",4,"ngIf","ngIfElse"],[1,"emptyHome"],["target","window","styleClass","custom-scrolltop","icon","pi pi-arrow-up","behavior","smooth",3,"threshold"],[1,"cards__container"],["class","post",4,"ngFor","ngForOf"],[1,"post"],[3,"post","userId"]],template:function(i,r){if(i&1&&(y(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1"),M(4,"Here you can browse through all travel buddies posts."),_(),y(5,"p"),M(6," Be open to share your thoughts by leaving a comment or just press like! "),_()(),B(7,sk,2,1,"div",4)(8,ok,2,0,"ng-template",5,0,st),_(),O(10,"p-scrollTop",6)(11,"p-toast"),_()),i&2){let s=rt(9);E(7),R("ngIf",(r.posts$==null?null:r.posts$.length)>0)("ngIfElse",s),E(3),R("threshold",5)}},dependencies:[Ps,Fn,de,$I,jI,bt,Tt],styles:[".posts__heading[_ngcontent-%COMP%]{text-align:center}p[_ngcontent-%COMP%]{font-size:larger;margin-bottom:30px}"]})}return n})();function ak(n,e){n&1&&(y(0,"div",5),O(1,"span",6),y(2,"p"),M(3,"Like posts"),_()())}function ck(n,e){n&1&&(y(0,"div",5)(1,"p"),M(2,"Upload posts by sharing experience on your last trip"),_(),O(3,"span",7),_())}function lk(n,e){n&1&&(y(0,"div",5)(1,"p"),M(2,"Leave your thoughts on posts by commenting"),_(),O(3,"span",8),_())}function uk(n,e){n&1&&(y(0,"div",9)(1,"p"),M(2," All beautiful images and example content for posts are provided by "),y(3,"a",10),M(4,"TripAdvisor"),_(),M(5,". "),_(),O(6,"img",11),_())}var WI=(()=>{class n{likeFunctionality=!1;uploadFunctionality=!1;commentFunctionality=!1;creditFunctionality=!1;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=F({type:n,selectors:[["infoByte"]],inputs:{likeFunctionality:"likeFunctionality",uploadFunctionality:"uploadFunctionality",commentFunctionality:"commentFunctionality",creditFunctionality:"creditFunctionality"},standalone:!0,features:[j],decls:7,vars:4,consts:[[1,"container"],[1,"content"],[1,"blocks"],["class","block__content",4,"ngIf"],["class","credits__block",4,"ngIf"],[1,"block__content"],[1,"pi","pi-heart-fill",2,"font-size","var(--icon-size)","color","red"],[1,"pi","pi-camera",2,"font-size","var(--icon-size)","color","#774342"],[1,"pi","pi-comments",2,"font-size","var(--icon-size)","color","grey"],[1,"credits__block"],["href","https://www.tripadvisor.com/","target","_blank"],["src","https://media-cdn.tripadvisor.com/media/attractions-splice-spp-720x480/0f/3d/64/7e.jpg","alt","people"]],template:function(i,r){i&1&&(y(0,"div",0)(1,"div",1)(2,"div",2),B(3,ak,4,0,"div",3)(4,ck,4,0,"div",3)(5,lk,4,0,"div",3),_(),B(6,uk,7,0,"div",4),_()()),i&2&&(E(3),R("ngIf",r.likeFunctionality),E(),R("ngIf",r.uploadFunctionality),E(),R("ngIf",r.commentFunctionality),E(),R("ngIf",r.creditFunctionality))},dependencies:[de],styles:[".container[_ngcontent-%COMP%]   .block__content[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center;flex-direction:row;gap:10px}.container[_ngcontent-%COMP%]   .block__content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:5px}.container[_ngcontent-%COMP%]   .block__content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:2px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:40rem;height:auto;background-color:#ffffff94;border-radius:15px;box-shadow:0 4px 8px #0000001a;margin:35px;overflow:hidden;transition:transform .3s ease}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]:hover{transform:translateY(-10px)}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .credits__block[_ngcontent-%COMP%]{width:38rem;margin:2rem auto;padding:1.5rem;background:linear-gradient(135deg,var(--c-primary) 0%,var(--c-dark) 100%);border-radius:10px;box-shadow:0 4px 8px #0003;text-align:center;color:#fff}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .credits__block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:30rem;height:auto;border-radius:8px;border:2px solid #fff;box-shadow:0 4px 8px #0000001a}"]})}return n})();var HI=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=F({type:n,selectors:[["about"]],standalone:!0,features:[j],decls:21,vars:4,consts:[[1,"body"],[1,"heading"],[1,"byte__one"],[3,"likeFunctionality"],[1,"byte__two"],[3,"uploadFunctionality"],[1,"byte__three"],[3,"commentFunctionality"],[1,"byte__four"],[3,"creditFunctionality"]],template:function(i,r){i&1&&(y(0,"div",0)(1,"div",1)(2,"h2"),M(3," The platform is created by the love for traveling and adventures. "),O(4,"br"),M(5," We encourage people to share their favorite places to visit, or share their personal trips "),O(6,"br"),M(7," passing on the emotions during that trip. "),_(),O(8,"br"),y(9,"h2"),M(10,"Here are the functionalities provided for travel buddies:"),_()(),y(11,"div",2),O(12,"infoByte",3),_(),y(13,"div",4),O(14,"infoByte",5),_(),y(15,"div",6),O(16,"infoByte",7),_(),y(17,"div",8)(18,"p"),M(19,"Credits:"),_(),O(20,"infoByte",9),_()()),i&2&&(E(12),R("likeFunctionality",!0),E(2),R("uploadFunctionality",!0),E(2),R("commentFunctionality",!0),E(4),R("creditFunctionality",!0))},dependencies:[WI],styles:[".body[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.body[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;animation:popIn 1s ease-in-out forwards;margin:20px}.body[_ngcontent-%COMP%]   .byte__one[_ngcontent-%COMP%]{animation:fade__right 2s ease-out forwards;animation-delay:2s;visibility:hidden;display:flex;justify-content:flex-start}.body[_ngcontent-%COMP%]   .byte__two[_ngcontent-%COMP%]{animation:fade__left 2s ease-out forwards;animation-delay:4s;visibility:hidden;display:flex;justify-content:flex-end}.body[_ngcontent-%COMP%]   .byte__three[_ngcontent-%COMP%]{animation:fade__right 2s ease-out forwards;animation-delay:6s;visibility:hidden;display:flex;justify-content:flex-start}.body[_ngcontent-%COMP%]   .byte__four[_ngcontent-%COMP%]{animation:popInSlow 2s ease-in-out forwards;animation-delay:8s;visibility:hidden}"]})}return n})();function hk(n,e){n&1&&(y(0,"button",13),M(1,"Submit"),_())}function dk(n,e){if(n&1){let t=Se();y(0,"button",14),z("click",function(){Z(t);let r=L(2);return ee(r.showInput=!1)}),M(1," Cancel "),_()}}function fk(n,e){if(n&1){let t=Se();y(0,"form",9),z("ngSubmit",function(){Z(t);let r=L();return ee(r.changeAvatar())}),y(1,"input",10),Qe("ngModelChange",function(r){Z(t);let s=L();return Ke(s.image,r)||(s.image=r),ee(r)}),_(),B(2,hk,2,0,"button",11)(3,dk,2,0,"button",12),_()}if(n&2){let t=L();E(),Ge("ngModel",t.image),E(),R("ngIf",t.showInput),E(),R("ngIf",t.showInput)}}var zI=(()=>{class n{userService;messageService;showInput=!1;image="";currentSection="overview";userCredentials;constructor(t,i){this.userService=t,this.messageService=i}changeAvatar(){return C(this,null,function*(){try{yield this.userService.changeUserAvatar(this.userCredentials.username,this.image),this.messageService.add(SI),this.image="",this.showInput=!1}catch(t){this.messageService.add(AI(t))}})}static \u0275fac=function(i){return new(i||n)(k(xs),k(ye))};static \u0275cmp=F({type:n,selectors:[["overview"]],inputs:{userCredentials:"userCredentials"},standalone:!0,features:[He([ye]),j],decls:18,vars:4,consts:[[1,"container"],[1,"profile__card"],["alt","User Avatar",3,"src"],[1,"user__credentials"],[1,"credential__item"],[1,"pi","pi-envelope",2,"color","grey","font-size","var(--icon-size)"],[1,"pi","pi-user",2,"color","#90caf9","font-size","var(--icon-size)"],[1,"btn",3,"click"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["type","text","name","avatar","placeholder","Provide an image by URL",1,"input",3,"ngModelChange","ngModel"],["class","btn","type","submit",4,"ngIf"],["class","btn","type","reset",3,"click",4,"ngIf"],["type","submit",1,"btn"],["type","reset",1,"btn",3,"click"]],template:function(i,r){i&1&&(y(0,"div",0)(1,"h2"),M(2,"Overview"),_(),y(3,"div",1),O(4,"img",2),y(5,"div",3)(6,"div",4),O(7,"span",5),y(8,"p"),M(9),_()(),y(10,"div",4),O(11,"span",6),y(12,"p"),M(13),_()()()(),y(14,"button",7),z("click",function(){return r.showInput=!r.showInput}),M(15," Change profile picture "),_(),B(16,fk,4,3,"form",8),O(17,"p-toast"),_()),i&2&&(E(4),R("src",r.userCredentials==null?null:r.userCredentials.avatar,En),E(5),pe(r.userCredentials==null?null:r.userCredentials.email),E(4),pe(r.userCredentials==null?null:r.userCredentials.username),E(3),R("ngIf",r.showInput))},dependencies:[qt,wn,$t,yn,vn,en,Zt,de,bt,Tt],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .profile__card[_ngcontent-%COMP%]{background-color:#ffffffd9;border-radius:10px;padding:20px;width:40rem;max-width:400px;box-shadow:0 4px 12px #0000001a;text-align:center;margin-bottom:10px}.container[_ngcontent-%COMP%]   .profile__card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:10rem;height:10rem;margin-bottom:1rem;box-shadow:0 4px 8px #00000080}.container[_ngcontent-%COMP%]   .profile__card[_ngcontent-%COMP%]   .user__credentials[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.container[_ngcontent-%COMP%]   .profile__card[_ngcontent-%COMP%]   .user__credentials[_ngcontent-%COMP%]   .credential__item[_ngcontent-%COMP%]{display:flex;align-items:flex-end;margin-bottom:10px;width:10rem}.container[_ngcontent-%COMP%]   .profile__card[_ngcontent-%COMP%]   .user__credentials[_ngcontent-%COMP%]   .credential__item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-decoration:underline;margin-left:8px;font-size:16px;color:var(--c-dark)}form[_ngcontent-%COMP%]{width:100%;max-width:400px;margin-top:20px;animation:fade__down ease-in .3s;display:flex;gap:10px}form[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:14.5rem;height:3.1rem}"]})}return n})();var GI=(()=>{class n{auth;messageService;authService;inputEmail="";newPassword="";constructor(t,i,r){this.auth=t,this.messageService=i,this.authService=r}changeCurrentPassword(){return C(this,null,function*(){try{Lw(this.newPassword),yield Sw(this.auth,this.inputEmail),this.messageService.add(RI),setTimeout(()=>C(this,null,function*(){yield this.authService.logout()}),3e3)}catch(t){this.messageService.add(PI(t))}})}static \u0275fac=function(i){return new(i||n)(k(Mn),k(ye),k(ke))};static \u0275cmp=F({type:n,selectors:[["change-password"]],standalone:!0,features:[He([ye]),j],decls:21,vars:2,consts:[[1,"container"],[3,"ngSubmit"],[1,"form__input"],["for","email"],["type","text","name","email",1,"input",3,"ngModelChange","ngModel"],["for","newPassword"],["type","password","name","password",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],[1,"instructions"]],template:function(i,r){i&1&&(y(0,"div",0)(1,"h2"),M(2,"Change Password"),_(),y(3,"form",1),z("ngSubmit",function(){return r.changeCurrentPassword()}),y(4,"div",2)(5,"div")(6,"label",3),M(7,"Email:"),_(),y(8,"input",4),Qe("ngModelChange",function(o){return Ke(r.inputEmail,o)||(r.inputEmail=o),o}),_()(),y(9,"div")(10,"label",5),M(11,"New Password:"),_(),y(12,"input",6),Qe("ngModelChange",function(o){return Ke(r.newPassword,o)||(r.newPassword=o),o}),_()()(),y(13,"button",7),M(14,"Change Password"),_()(),y(15,"div",8)(16,"h1"),M(17,"Instructions:"),_(),y(18,"p"),M(19," A password reset email will be sent to the given email address and you will be logged out. The email includes a link which would lead you to a secure browser for creating your new password. After successfully changing your password you can log in. "),_()(),O(20,"p-toast"),_()),i&2&&(E(8),Ge("ngModel",r.inputEmail),E(4),Ge("ngModel",r.newPassword))},dependencies:[qt,wn,$t,yn,vn,en,Zt,bt,Tt],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;background-color:#ffffffd9;border-radius:10px;padding:20px;width:25rem;box-shadow:0 4px 12px #0000001a;margin-top:20px;margin-bottom:30px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{margin-bottom:17px}.container[_ngcontent-%COMP%]   .instructions[_ngcontent-%COMP%]{background-color:#ffffffd9;border-radius:10px;padding:20px;width:35rem;box-shadow:0 4px 12px #0000001a}"]})}return n})();function pk(n,e){if(n&1&&(y(0,"div",7),O(1,"overview",8),_()),n&2){let t=L();E(),R("userCredentials",t.userCredentials$)}}function mk(n,e){n&1&&(y(0,"div",9)(1,"h2"),M(2,"Account Settings"),_()())}function gk(n,e){n&1&&(y(0,"div",10),O(1,"change-password"),_())}var KI=(()=>{class n{db;route;currentSection="overview";userCredentials$;constructor(t,i){this.db=t,this.route=i}ngOnInit(){let t=this.route.snapshot.paramMap.get("id"),i=Lt(this.db,`users/${t}`);Gl(i,r=>{this.userCredentials$=r.val()})}showSection(t){this.currentSection=t}static \u0275fac=function(i){return new(i||n)(k(Te),k(Rn))};static \u0275cmp=F({type:n,selectors:[["profile"]],standalone:!0,features:[He([ye]),j],decls:12,vars:7,consts:[[1,"profile__container","container"],[1,"sidebar"],[3,"click"],[1,"content"],["class","section__overview",4,"ngIf"],["class","section__settings",4,"ngIf"],["class","section__password",4,"ngIf"],[1,"section__overview"],[3,"userCredentials"],[1,"section__settings"],[1,"section__password"]],template:function(i,r){i&1&&(y(0,"div",0)(1,"div",1)(2,"ul")(3,"li",2),z("click",function(){return r.showSection("overview")}),M(4," Overview "),_(),y(5,"li",2),z("click",function(){return r.showSection("changePassword")}),M(6," Change Password "),_()()(),y(7,"div",3),B(8,pk,2,1,"div",4)(9,mk,3,0,"div",5)(10,gk,2,0,"div",6),_(),O(11,"p-toast"),_()),i&2&&(E(3),Bt("active__section",r.currentSection==="overview"),E(2),Bt("active__section",r.currentSection==="changePassword"),E(3),R("ngIf",r.currentSection==="overview"),E(),R("ngIf",r.currentSection==="accountSettings"),E(),R("ngIf",r.currentSection==="changePassword"))},dependencies:[de,zI,qt,bt,Tt,GI],styles:[".profile__container[_ngcontent-%COMP%]{background-image:url(https://fancywalls.eu/wp-content/uploads/minimalist-travel-pattern-repeat-removable-wallpaper-design.jpg);background-size:70%;background-position:center;background-color:#ffffffb3;background-blend-mode:overlay;display:flex;box-shadow:0 4px 16px #00000080;height:50rem;padding:20px}.profile__container[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{width:20rem;background:linear-gradient(135deg,#d38a65e6,#62453de6);color:#fff;padding:20px;box-shadow:2px 0 5px #0000001a}.profile__container[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:15px;cursor:pointer;list-style-type:none;border-bottom:1px solid white}.profile__container[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#62453de6;transition:background-color .7s ease}.profile__container[_ngcontent-%COMP%]   li.active__section[_ngcontent-%COMP%]{background-color:#62453de6}.profile__container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;display:flex;flex-direction:column;align-items:center}"]})}return n})();var Xp=ce(n=>!!n),er=(()=>{class n{router;auth;constructor(t,i){this.router=t,this.auth=i}canActivate=(t,i)=>{let r=t.data.authGuardPipe||(()=>Xp);return Ew(this.auth).pipe(Mi(1),r(t,i),ce(s=>typeof s=="boolean"?s:Array.isArray(s)?this.router.createUrlTree(s):this.router.parseUrl(s)))};static \u0275fac=function(i){return new(i||n)(re(jt),re(Mn))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var QI=n=>io(Xp,ce(e=>e||n)),YI=n=>io(Xp,ce(e=>e&&n||!0));var JI=(()=>{class n{authService;messageService;email="";password="";showPassword=!1;buttonValue=new $e;constructor(t,i){this.authService=t,this.messageService=i}login(){return C(this,null,function*(){try{yield this.authService.login(this.email,this.password),this.messageService.add(II),this.email="",this.password=""}catch(t){this.messageService.add(CI(t))}})}takeButtonValue(t){this.buttonValue.emit(t)}togglePasswordVisibility(){this.showPassword=!this.showPassword}static \u0275fac=function(i){return new(i||n)(k(ke),k(ye))};static \u0275cmp=F({type:n,selectors:[["login"]],outputs:{buttonValue:"buttonValue"},standalone:!0,features:[He([ye]),j],decls:26,vars:5,consts:[[1,"form"],[1,"form__content"],[1,"form__text"],[1,"py-6"],[1,"form__body"],[1,"form__input",3,"ngSubmit"],[1,"form__control"],[1,"label"],[1,"label__text"],["type","email","placeholder","email","required","","name","email",1,"input",3,"ngModelChange","ngModel"],["placeholder","password","required","","name","password",1,"input",3,"ngModelChange","type","ngModel"],[2,"font-size","1.2rem","color","grey",3,"click"],[1,"form__buttons"],["type","submit",1,"btn",3,"click"],["type","button",1,"btn",3,"click"]],template:function(i,r){i&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),M(4,"Login now!"),_(),y(5,"p",3),M(6,"Your travel buddies are waiting for you!"),_()(),y(7,"div",4)(8,"form",5),z("ngSubmit",function(){return r.login()}),y(9,"div",6)(10,"label",7)(11,"span",8),M(12,"Email"),_()(),y(13,"input",9),Qe("ngModelChange",function(o){return Ke(r.email,o)||(r.email=o),o}),_()(),y(14,"div",6)(15,"label",7)(16,"span",8),M(17,"Password"),_()(),y(18,"input",10),Qe("ngModelChange",function(o){return Ke(r.password,o)||(r.password=o),o}),_(),y(19,"span",11),z("click",function(){return r.togglePasswordVisibility()}),_()(),y(20,"div",12)(21,"button",13),z("click",function(){return r.takeButtonValue("Login")}),M(22," Login "),_(),y(23,"button",14),z("click",function(){return r.takeButtonValue("Register")}),M(24," Register "),_()()(),O(25,"p-toast"),_()()()),i&2&&(E(13),Ge("ngModel",r.email),E(5),R("type",r.showPassword?"text":"password"),Ge("ngModel",r.password),E(),se(r.showPassword?"pi pi-eye-slash toggle__password":"pi pi-eye toggle__password"))},dependencies:[qt,wn,$t,yn,vn,Nr,en,Zt,bt,Tt],styles:[".form__control[_ngcontent-%COMP%]{position:relative}.form__control[_ngcontent-%COMP%]   .toggle__password[_ngcontent-%COMP%]{position:absolute;z-index:1;left:88%;bottom:27%;cursor:pointer}"]})}return n})();var XI=(()=>{class n{auth;messageService;email="";password="";username="";avatar="";constructor(t,i){this.auth=t,this.messageService=i}register(){return C(this,null,function*(){try{yield this.auth.register(this.email,this.password,this.username),yield this.auth.createUser(this.username,this.avatar),this.email="",this.password="",this.username="",this.avatar=""}catch(t){this.messageService.add(EI(t))}})}static \u0275fac=function(i){return new(i||n)(k(ke),k(ye))};static \u0275cmp=F({type:n,selectors:[["register"]],standalone:!0,features:[He([ye]),j],decls:33,vars:4,consts:[[1,"form"],[1,"form__content"],[1,"form__text"],[1,"py-6"],[1,"form__body"],[1,"form__input",3,"ngSubmit"],[1,"form__control"],[1,"label"],[1,"label__text"],["type","email","placeholder","email","required","","name","email",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","username","required","","name","username",1,"input",3,"ngModelChange","ngModel"],["type","password","placeholder","password","required","","name","password",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","Provide an avatar with URL","required","","name","avatar",1,"input",3,"ngModelChange","ngModel"],[1,"form__buttons"],["type","submit",1,"btn"]],template:function(i,r){i&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),M(4,"Register now!"),_(),y(5,"p",3),M(6,"Your travel buddies are waiting for you!"),_()(),y(7,"div",4)(8,"form",5),z("ngSubmit",function(){return r.register()}),y(9,"div",6)(10,"label",7)(11,"span",8),M(12,"Email"),_()(),y(13,"input",9),Qe("ngModelChange",function(o){return Ke(r.email,o)||(r.email=o),o}),_()(),y(14,"div",6)(15,"label",7)(16,"span",8),M(17,"Username"),_()(),y(18,"input",10),Qe("ngModelChange",function(o){return Ke(r.username,o)||(r.username=o),o}),_()(),y(19,"div",6)(20,"label",7)(21,"span",8),M(22,"Password"),_()(),y(23,"input",11),Qe("ngModelChange",function(o){return Ke(r.password,o)||(r.password=o),o}),_()(),y(24,"div",6)(25,"label",7)(26,"span",8),M(27,"Avatar"),_()(),y(28,"input",12),Qe("ngModelChange",function(o){return Ke(r.avatar,o)||(r.avatar=o),o}),_()(),y(29,"div",13)(30,"button",14),M(31,"Register"),_()()()()(),O(32,"p-toast"),_()),i&2&&(E(13),Ge("ngModel",r.email),E(5),Ge("ngModel",r.username),E(5),Ge("ngModel",r.password),E(5),Ge("ngModel",r.avatar))},dependencies:[qt,wn,$t,yn,vn,Nr,en,Zt,bt,Tt]})}return n})();var ZI=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=F({type:n,selectors:[["card"]],standalone:!0,features:[j],decls:6,vars:0,consts:[[1,"card"],[1,"card__image"],["src","https://i.pinimg.com/564x/7d/83/c5/7d83c5b60ee45f5949183aa587b665c4.jpg","alt","user"],[1,"card__body"]],template:function(i,r){i&1&&(y(0,"div",0)(1,"div",1),O(2,"img",2),_(),y(3,"div",3)(4,"h2"),M(5,"Ready to join our travel forum?"),_()()())},styles:[".card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-width:1px;border-radius:10px;width:16cm;padding:1cm;background-color:#f9f9f9;box-shadow:0 4px 8px #0000001a}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:5cm;width:auto;border-radius:10px}.card[_ngcontent-%COMP%]   .card__body[_ngcontent-%COMP%]{margin-left:1cm;text-align:center}.card[_ngcontent-%COMP%]   .card__body[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:.5em}"]})}return n})();function _k(n,e){if(n&1){let t=Se();y(0,"login",8),z("buttonValue",function(r){Z(t);let s=L();return ee(s.onButtonClicked(r))}),_()}}function yk(n,e){if(n&1){let t=Se();y(0,"register",8),z("buttonValue",function(r){Z(t);let s=L();return ee(s.onButtonClicked(r))}),_()}}var eC=(()=>{class n{auth;activeComponent="Login";user=null;constructor(t){this.auth=t}ngOnInit(){this.auth.user$?.subscribe(t=>{this.user=t})}onButtonClicked(t){this.activeComponent=t}static \u0275fac=function(i){return new(i||n)(k(ke))};static \u0275cmp=F({type:n,selectors:[["home-unauthenticated"]],standalone:!0,features:[j],decls:18,vars:2,consts:[[1,"body"],[1,"images"],[1,"image__wrapper"],["src","https://media-cdn.tripadvisor.com/media/attractions-splice-spp-720x480/0a/6d/9c/f5.jpg","alt","image"],["src","https://media-cdn.tripadvisor.com/media/attractions-splice-spp-720x480/12/59/00/3c.jpg","alt","image"],["src","https://www.travelandleisure.com/thmb/MriQxOVvVJ1MLNgWUXbGl8L2rGk=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/TAL-Backpacker-BUDGET0323-eeaf531276694f93966baa8fbcd2730d.jpg","alt","image"],[1,"login__register"],[3,"buttonValue",4,"ngIf"],[3,"buttonValue"]],template:function(i,r){i&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),M(4,"Explore"),_(),O(5,"img",3),_(),y(6,"div",2)(7,"h1"),M(8,"Create"),_(),O(9,"img",4),_(),y(10,"div",2)(11,"h1"),M(12,"Enjoy"),_(),O(13,"img",5),_()(),O(14,"card"),y(15,"div",6),B(16,_k,1,0,"login",7)(17,yk,1,0,"register",7),_()()),i&2&&(E(16),R("ngIf",!r.user&&r.activeComponent==="Login"),E(),R("ngIf",!r.user&&r.activeComponent==="Register"))},dependencies:[JI,XI,de,ZI],styles:[".body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4rem}.body[_ngcontent-%COMP%]   .login__register[_ngcontent-%COMP%]{margin-bottom:3rem}.body[_ngcontent-%COMP%]   .login__register[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:2rem;animation:popIn 1s ease-in-out}.body[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}.body[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:30px;transition:transform .2s ease-out,box-shadow .2s ease-out}.body[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{position:absolute;opacity:0;top:35%;left:37%;color:#fff;font-size:2rem;z-index:2;pointer-events:none}.body[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 12px #0000004d}.body[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover   h1[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:opacity .6s ease-in}.body[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26rem;height:auto;overflow-y:hidden;transition:filter .2s ease-out}.body[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{filter:brightness(.5)}"]})}return n})();var Os=()=>QI(["/home-unauthenticated"]),vk=()=>YI(["/home"]),tC=[{path:"home-unauthenticated",component:eC,canActivate:[er],data:{authGuardPipe:vk}},{path:"home",component:FI,canActivate:[er],data:{authGuardPipe:Os}},{path:"createPost",component:UI,canActivate:[er],data:{authGuardPipe:Os}},{path:"allPosts",component:qI,canActivate:[er],data:{authGuardPipe:Os}},{path:"fullViewPost/:id",component:BI,canActivate:[er],data:{authGuardPipe:Os}},{path:"about",component:HI,canActivate:[er],data:{authGuardPipe:Os}},{path:"profile/:id",component:KI,canActivate:[er],data:{authGuardPipe:Os}},{path:"",pathMatch:"full",redirectTo:"/home"}];var nC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iC={};var Zp,rC;(function(){var n;function e(S,v){function I(){}I.prototype=v.prototype,S.D=v.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(T,b,P){for(var w=Array(arguments.length-2),ii=2;ii<arguments.length;ii++)w[ii-2]=arguments[ii];return v.prototype[b].apply(T,w)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)T[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=S.g[0],I=S.g[1],b=S.g[2];var P=S.g[3],w=v+(P^I&(b^P))+T[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=P+(b^v&(I^b))+T[1]+3905402710&4294967295,P=v+(w<<12&4294967295|w>>>20),w=b+(I^P&(v^I))+T[2]+606105819&4294967295,b=P+(w<<17&4294967295|w>>>15),w=I+(v^b&(P^v))+T[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(P^I&(b^P))+T[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=P+(b^v&(I^b))+T[5]+1200080426&4294967295,P=v+(w<<12&4294967295|w>>>20),w=b+(I^P&(v^I))+T[6]+2821735955&4294967295,b=P+(w<<17&4294967295|w>>>15),w=I+(v^b&(P^v))+T[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(P^I&(b^P))+T[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=P+(b^v&(I^b))+T[9]+2336552879&4294967295,P=v+(w<<12&4294967295|w>>>20),w=b+(I^P&(v^I))+T[10]+4294925233&4294967295,b=P+(w<<17&4294967295|w>>>15),w=I+(v^b&(P^v))+T[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(P^I&(b^P))+T[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=P+(b^v&(I^b))+T[13]+4254626195&4294967295,P=v+(w<<12&4294967295|w>>>20),w=b+(I^P&(v^I))+T[14]+2792965006&4294967295,b=P+(w<<17&4294967295|w>>>15),w=I+(v^b&(P^v))+T[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(b^P&(I^b))+T[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=P+(I^b&(v^I))+T[6]+3225465664&4294967295,P=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(P^v))+T[11]+643717713&4294967295,b=P+(w<<14&4294967295|w>>>18),w=I+(P^v&(b^P))+T[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^P&(I^b))+T[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=P+(I^b&(v^I))+T[10]+38016083&4294967295,P=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(P^v))+T[15]+3634488961&4294967295,b=P+(w<<14&4294967295|w>>>18),w=I+(P^v&(b^P))+T[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^P&(I^b))+T[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=P+(I^b&(v^I))+T[14]+3275163606&4294967295,P=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(P^v))+T[3]+4107603335&4294967295,b=P+(w<<14&4294967295|w>>>18),w=I+(P^v&(b^P))+T[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^P&(I^b))+T[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=P+(I^b&(v^I))+T[2]+4243563512&4294967295,P=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(P^v))+T[7]+1735328473&4294967295,b=P+(w<<14&4294967295|w>>>18),w=I+(P^v&(b^P))+T[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(I^b^P)+T[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=P+(v^I^b)+T[8]+2272392833&4294967295,P=v+(w<<11&4294967295|w>>>21),w=b+(P^v^I)+T[11]+1839030562&4294967295,b=P+(w<<16&4294967295|w>>>16),w=I+(b^P^v)+T[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^P)+T[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=P+(v^I^b)+T[4]+1272893353&4294967295,P=v+(w<<11&4294967295|w>>>21),w=b+(P^v^I)+T[7]+4139469664&4294967295,b=P+(w<<16&4294967295|w>>>16),w=I+(b^P^v)+T[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^P)+T[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=P+(v^I^b)+T[0]+3936430074&4294967295,P=v+(w<<11&4294967295|w>>>21),w=b+(P^v^I)+T[3]+3572445317&4294967295,b=P+(w<<16&4294967295|w>>>16),w=I+(b^P^v)+T[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^P)+T[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=P+(v^I^b)+T[12]+3873151461&4294967295,P=v+(w<<11&4294967295|w>>>21),w=b+(P^v^I)+T[15]+530742520&4294967295,b=P+(w<<16&4294967295|w>>>16),w=I+(b^P^v)+T[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(b^(I|~P))+T[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=P+(I^(v|~b))+T[7]+1126891415&4294967295,P=v+(w<<10&4294967295|w>>>22),w=b+(v^(P|~I))+T[14]+2878612391&4294967295,b=P+(w<<15&4294967295|w>>>17),w=I+(P^(b|~v))+T[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~P))+T[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=P+(I^(v|~b))+T[3]+2399980690&4294967295,P=v+(w<<10&4294967295|w>>>22),w=b+(v^(P|~I))+T[10]+4293915773&4294967295,b=P+(w<<15&4294967295|w>>>17),w=I+(P^(b|~v))+T[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~P))+T[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=P+(I^(v|~b))+T[15]+4264355552&4294967295,P=v+(w<<10&4294967295|w>>>22),w=b+(v^(P|~I))+T[6]+2734768916&4294967295,b=P+(w<<15&4294967295|w>>>17),w=I+(P^(b|~v))+T[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~P))+T[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=P+(I^(v|~b))+T[11]+3174756917&4294967295,P=v+(w<<10&4294967295|w>>>22),w=b+(v^(P|~I))+T[2]+718787259&4294967295,b=P+(w<<15&4294967295|w>>>17),w=I+(P^(b|~v))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,S.g[2]=S.g[2]+b&4294967295,S.g[3]=S.g[3]+P&4294967295}i.prototype.u=function(S,v){v===void 0&&(v=S.length);for(var I=v-this.blockSize,T=this.B,b=this.h,P=0;P<v;){if(b==0)for(;P<=I;)r(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<v;)if(T[b++]=S.charCodeAt(P++),b==this.blockSize){r(this,T),b=0;break}}else for(;P<v;)if(T[b++]=S[P++],b==this.blockSize){r(this,T),b=0;break}}this.h=b,this.o+=v},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;var I=8*this.o;for(v=S.length-8;v<S.length;++v)S[v]=I&255,I/=256;for(this.u(S),S=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)S[I++]=this.g[v]>>>T&255;return S};function s(S,v){var I=c;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=v(S)}function o(S,v){this.h=v;for(var I=[],T=!0,b=S.length-1;0<=b;b--){var P=S[b]|0;T&&P==v||(I[b]=P,T=!1)}this.g=I}var c={};function u(S){return-128<=S&&128>S?s(S,function(v){return new o([v|0],0>v?-1:0)}):new o([S|0],0>S?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return W(h(-S));for(var v=[],I=1,T=0;S>=I;T++)v[T]=S/I|0,I*=4294967296;return new o(v,0)}function p(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return W(p(S.substring(1),v));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=h(Math.pow(v,8)),T=m,b=0;b<S.length;b+=8){var P=Math.min(8,S.length-b),w=parseInt(S.substring(b,b+P),v);8>P?(P=h(Math.pow(v,P)),T=T.j(P).add(h(w))):(T=T.j(I),T=T.add(h(w)))}return T}var m=u(0),g=u(1),x=u(16777216);n=o.prototype,n.m=function(){if($(this))return-W(this).m();for(var S=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);S+=(0<=T?T:4294967296+T)*v,v*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N(this))return"0";if($(this))return"-"+W(this).toString(S);for(var v=h(Math.pow(S,6)),I=this,T="";;){var b=Me(I,v).g;I=we(I,b.j(v));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=b,N(I))return P+T;for(;6>P.length;)P="0"+P;T=P+T}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function N(S){if(S.h!=0)return!1;for(var v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function $(S){return S.h==-1}n.l=function(S){return S=we(this,S),$(S)?-1:N(S)?0:1};function W(S){for(var v=S.g.length,I=[],T=0;T<v;T++)I[T]=~S.g[T];return new o(I,~S.h).add(g)}n.abs=function(){return $(this)?W(this):this},n.add=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],T=0,b=0;b<=v;b++){var P=T+(this.i(b)&65535)+(S.i(b)&65535),w=(P>>>16)+(this.i(b)>>>16)+(S.i(b)>>>16);T=w>>>16,P&=65535,w&=65535,I[b]=w<<16|P}return new o(I,I[I.length-1]&-2147483648?-1:0)};function we(S,v){return S.add(W(v))}n.j=function(S){if(N(this)||N(S))return m;if($(this))return $(S)?W(this).j(W(S)):W(W(this).j(S));if($(S))return W(this.j(W(S)));if(0>this.l(x)&&0>S.l(x))return h(this.m()*S.m());for(var v=this.g.length+S.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<S.g.length;b++){var P=this.i(T)>>>16,w=this.i(T)&65535,ii=S.i(b)>>>16,Fs=S.i(b)&65535;I[2*T+2*b]+=w*Fs,Ie(I,2*T+2*b),I[2*T+2*b+1]+=P*Fs,Ie(I,2*T+2*b+1),I[2*T+2*b+1]+=w*ii,Ie(I,2*T+2*b+1),I[2*T+2*b+2]+=P*ii,Ie(I,2*T+2*b+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new o(I,0)};function Ie(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function ue(S,v){this.g=S,this.h=v}function Me(S,v){if(N(v))throw Error("division by zero");if(N(S))return new ue(m,m);if($(S))return v=Me(W(S),v),new ue(W(v.g),W(v.h));if($(v))return v=Me(S,W(v)),new ue(W(v.g),v.h);if(30<S.g.length){if($(S)||$(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,T=v;0>=T.l(S);)I=nn(I),T=nn(T);var b=nt(I,1),P=nt(T,1);for(T=nt(T,2),I=nt(I,2);!N(T);){var w=P.add(T);0>=w.l(S)&&(b=b.add(I),P=w),T=nt(T,1),I=nt(I,1)}return v=we(S,b.j(v)),new ue(b,v)}for(b=m;0<=S.l(v);){for(I=Math.max(1,Math.floor(S.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),P=h(I),w=P.j(v);$(w)||0<w.l(S);)I-=T,P=h(I),w=P.j(v);N(P)&&(P=g),b=b.add(P),S=we(S,w)}return new ue(b,S)}n.A=function(S){return Me(this,S).h},n.and=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&S.i(T);return new o(I,this.h&S.h)},n.or=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|S.i(T);return new o(I,this.h|S.h)},n.xor=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^S.i(T);return new o(I,this.h^S.h)};function nn(S){for(var v=S.g.length+1,I=[],T=0;T<v;T++)I[T]=S.i(T)<<1|S.i(T-1)>>>31;return new o(I,S.h)}function nt(S,v){var I=v>>5;v%=32;for(var T=S.g.length-I,b=[],P=0;P<T;P++)b[P]=0<v?S.i(P+I)>>>v|S.i(P+I+1)<<32-v:S.i(P+I);return new o(b,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,rC=iC.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Zp=iC.Integer=o}).apply(typeof nC<"u"?nC:typeof self<"u"?self:typeof window<"u"?window:{});var ru=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bi={};var sC,oC,aC,cC,lC,uC,hC,dC,fC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,d){return a==Array.prototype||a==Object.prototype||(a[l]=d.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ru=="object"&&ru];for(var l=0;l<a.length;++l){var d=a[l];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=t(this);function r(a,l){if(l)e:{var d=i;a=a.split(".");for(var f=0;f<a.length-1;f++){var A=a[f];if(!(A in d))break e;d=d[A]}a=a[a.length-1],f=d[a],l=l(f),l!=f&&l!=null&&e(d,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var d=0,f=!1,A={next:function(){if(!f&&d<a.length){var D=d++;return{value:l(D,a[D]),done:!1}}return f=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}r("Array.prototype.values",function(a){return a||function(){return s(this,function(l,d){return d})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function h(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function p(a,l,d){return a.call.apply(a.bind,arguments)}function m(a,l,d){if(!a)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,f),a.apply(l,A)}}return function(){return a.apply(l,arguments)}}function g(a,l,d){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function x(a,l){var d=Array.prototype.slice.call(arguments,1);return function(){var f=d.slice();return f.push.apply(f,arguments),a.apply(this,f)}}function N(a,l){function d(){}d.prototype=l.prototype,a.aa=l.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(f,A,D){for(var U=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)U[Ae-2]=arguments[Ae];return l.prototype[A].apply(f,U)}}function $(a){let l=a.length;if(0<l){let d=Array(l);for(let f=0;f<l;f++)d[f]=a[f];return d}return[]}function W(a,l){for(let d=1;d<arguments.length;d++){let f=arguments[d];if(u(f)){let A=a.length||0,D=f.length||0;a.length=A+D;for(let U=0;U<D;U++)a[A+U]=f[U]}else a.push(f)}}class we{constructor(l,d){this.i=l,this.j=d,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function Ie(a){return/^[\s\xa0]*$/.test(a)}function ue(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Me(a){return Me[" "](a),a}Me[" "]=function(){};var nn=ue().indexOf("Gecko")!=-1&&!(ue().toLowerCase().indexOf("webkit")!=-1&&ue().indexOf("Edge")==-1)&&!(ue().indexOf("Trident")!=-1||ue().indexOf("MSIE")!=-1)&&ue().indexOf("Edge")==-1;function nt(a,l,d){for(let f in a)l.call(d,a[f],f,a)}function S(a,l){for(let d in a)l.call(void 0,a[d],d,a)}function v(a){let l={};for(let d in a)l[d]=a[d];return l}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,l){let d,f;for(let A=1;A<arguments.length;A++){f=arguments[A];for(d in f)a[d]=f[d];for(let D=0;D<I.length;D++)d=I[D],Object.prototype.hasOwnProperty.call(f,d)&&(a[d]=f[d])}}function b(a){var l=1;a=a.split(":");let d=[];for(;0<l&&a.length;)d.push(a.shift()),l--;return a.length&&d.push(a.join(":")),d}function P(a){c.setTimeout(()=>{throw a},0)}function w(){var a=du;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class ii{constructor(){this.h=this.g=null}add(l,d){let f=Fs.get();f.set(l,d),this.h?this.h.next=f:this.g=f,this.h=f}}var Fs=new we(()=>new qC,a=>a.reset());class qC{constructor(){this.next=this.g=this.h=null}set(l,d){this.h=l,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Us,Bs=!1,du=new ii,Om=()=>{let a=c.Promise.resolve(void 0);Us=()=>{a.then(WC)}};var WC=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(d){P(d)}var l=Fs;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}Bs=!1};function Ri(){this.s=this.s,this.C=this.C}Ri.prototype.s=!1,Ri.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ri.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function mt(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}mt.prototype.h=function(){this.defaultPrevented=!0};var HC=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let d=()=>{};c.addEventListener("test",d,l),c.removeEventListener("test",d,l)}catch{}return a}();function js(a,l){if(mt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,f=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(nn){e:{try{Me(l.nodeName);var A=!0;break e}catch{}A=!1}A||(l=null)}}else d=="mouseover"?l=a.fromElement:d=="mouseout"&&(l=a.toElement);this.relatedTarget=l,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:zC[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&js.aa.h.call(this)}}N(js,mt);var zC={2:"touch",3:"pen",4:"mouse"};js.prototype.h=function(){js.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var $s="closure_listenable_"+(1e6*Math.random()|0),GC=0;function KC(a,l,d,f,A){this.listener=a,this.proxy=null,this.src=l,this.type=d,this.capture=!!f,this.ha=A,this.key=++GC,this.da=this.fa=!1}function Wa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ha(a){this.src=a,this.g={},this.h=0}Ha.prototype.add=function(a,l,d,f,A){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var U=pu(a,l,f,A);return-1<U?(l=a[U],d||(l.fa=!1)):(l=new KC(l,this.src,D,!!f,A),l.fa=d,a.push(l)),l};function fu(a,l){var d=l.type;if(d in a.g){var f=a.g[d],A=Array.prototype.indexOf.call(f,l,void 0),D;(D=0<=A)&&Array.prototype.splice.call(f,A,1),D&&(Wa(l),a.g[d].length==0&&(delete a.g[d],a.h--))}}function pu(a,l,d,f){for(var A=0;A<a.length;++A){var D=a[A];if(!D.da&&D.listener==l&&D.capture==!!d&&D.ha==f)return A}return-1}var mu="closure_lm_"+(1e6*Math.random()|0),gu={};function Nm(a,l,d,f,A){if(f&&f.once)return Mm(a,l,d,f,A);if(Array.isArray(l)){for(var D=0;D<l.length;D++)Nm(a,l[D],d,f,A);return null}return d=wu(d),a&&a[$s]?a.K(l,d,h(f)?!!f.capture:!!f,A):km(a,l,d,!1,f,A)}function km(a,l,d,f,A,D){if(!l)throw Error("Invalid event type");var U=h(A)?!!A.capture:!!A,Ae=yu(a);if(Ae||(a[mu]=Ae=new Ha(a)),d=Ae.add(l,d,f,U,D),d.proxy)return d;if(f=QC(),d.proxy=f,f.src=a,f.listener=d,a.addEventListener)HC||(A=U),A===void 0&&(A=!1),a.addEventListener(l.toString(),f,A);else if(a.attachEvent)a.attachEvent(Vm(l.toString()),f);else if(a.addListener&&a.removeListener)a.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return d}function QC(){function a(d){return l.call(a.src,a.listener,d)}let l=YC;return a}function Mm(a,l,d,f,A){if(Array.isArray(l)){for(var D=0;D<l.length;D++)Mm(a,l[D],d,f,A);return null}return d=wu(d),a&&a[$s]?a.L(l,d,h(f)?!!f.capture:!!f,A):km(a,l,d,!0,f,A)}function Lm(a,l,d,f,A){if(Array.isArray(l))for(var D=0;D<l.length;D++)Lm(a,l[D],d,f,A);else f=h(f)?!!f.capture:!!f,d=wu(d),a&&a[$s]?(a=a.i,l=String(l).toString(),l in a.g&&(D=a.g[l],d=pu(D,d,f,A),-1<d&&(Wa(D[d]),Array.prototype.splice.call(D,d,1),D.length==0&&(delete a.g[l],a.h--)))):a&&(a=yu(a))&&(l=a.g[l.toString()],a=-1,l&&(a=pu(l,d,f,A)),(d=-1<a?l[a]:null)&&_u(d))}function _u(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[$s])fu(l.i,a);else{var d=a.type,f=a.proxy;l.removeEventListener?l.removeEventListener(d,f,a.capture):l.detachEvent?l.detachEvent(Vm(d),f):l.addListener&&l.removeListener&&l.removeListener(f),(d=yu(l))?(fu(d,a),d.h==0&&(d.src=null,l[mu]=null)):Wa(a)}}}function Vm(a){return a in gu?gu[a]:gu[a]="on"+a}function YC(a,l){if(a.da)a=!0;else{l=new js(l,this);var d=a.listener,f=a.ha||a.src;a.fa&&_u(a),a=d.call(f,l)}return a}function yu(a){return a=a[mu],a instanceof Ha?a:null}var vu="__closure_events_fn_"+(1e9*Math.random()>>>0);function wu(a){return typeof a=="function"?a:(a[vu]||(a[vu]=function(l){return a.handleEvent(l)}),a[vu])}function gt(){Ri.call(this),this.i=new Ha(this),this.M=this,this.F=null}N(gt,Ri),gt.prototype[$s]=!0,gt.prototype.removeEventListener=function(a,l,d,f){Lm(this,a,l,d,f)};function St(a,l){var d,f=a.F;if(f)for(d=[];f;f=f.F)d.push(f);if(a=a.M,f=l.type||l,typeof l=="string")l=new mt(l,a);else if(l instanceof mt)l.target=l.target||a;else{var A=l;l=new mt(f,a),T(l,A)}if(A=!0,d)for(var D=d.length-1;0<=D;D--){var U=l.g=d[D];A=za(U,f,!0,l)&&A}if(U=l.g=a,A=za(U,f,!0,l)&&A,A=za(U,f,!1,l)&&A,d)for(D=0;D<d.length;D++)U=l.g=d[D],A=za(U,f,!1,l)&&A}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var d=a.g[l],f=0;f<d.length;f++)Wa(d[f]);delete a.g[l],a.h--}}this.F=null},gt.prototype.K=function(a,l,d,f){return this.i.add(String(a),l,!1,d,f)},gt.prototype.L=function(a,l,d,f){return this.i.add(String(a),l,!0,d,f)};function za(a,l,d,f){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var A=!0,D=0;D<l.length;++D){var U=l[D];if(U&&!U.da&&U.capture==d){var Ae=U.listener,lt=U.ha||U.src;U.fa&&fu(a.i,U),A=Ae.call(lt,f)!==!1&&A}}return A&&!f.defaultPrevented}function Fm(a,l,d){if(typeof a=="function")d&&(a=g(a,d));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function Um(a){a.g=Fm(()=>{a.g=null,a.i&&(a.i=!1,Um(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class JC extends Ri{constructor(l,d){super(),this.m=l,this.l=d,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:Um(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qs(a){Ri.call(this),this.h=a,this.g={}}N(qs,Ri);var Bm=[];function jm(a){nt(a.g,function(l,d){this.g.hasOwnProperty(d)&&_u(l)},a),a.g={}}qs.prototype.N=function(){qs.aa.N.call(this),jm(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Iu=c.JSON.stringify,XC=c.JSON.parse,ZC=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Cu(){}Cu.prototype.h=null;function $m(a){return a.h||(a.h=a.i())}function qm(){}var Ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Eu(){mt.call(this,"d")}N(Eu,mt);function Tu(){mt.call(this,"c")}N(Tu,mt);var ir={},Wm=null;function Ga(){return Wm=Wm||new gt}ir.La="serverreachability";function Hm(a){mt.call(this,ir.La,a)}N(Hm,mt);function Hs(a){let l=Ga();St(l,new Hm(l))}ir.STAT_EVENT="statevent";function zm(a,l){mt.call(this,ir.STAT_EVENT,a),this.stat=l}N(zm,mt);function At(a){let l=Ga();St(l,new zm(l,a))}ir.Ma="timingevent";function Gm(a,l){mt.call(this,ir.Ma,a),this.size=l}N(Gm,mt);function zs(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function Gs(){this.g=!0}Gs.prototype.xa=function(){this.g=!1};function eE(a,l,d,f,A,D){a.info(function(){if(a.g)if(D)for(var U="",Ae=D.split("&"),lt=0;lt<Ae.length;lt++){var he=Ae[lt].split("=");if(1<he.length){var _t=he[0];he=he[1];var yt=_t.split("_");U=2<=yt.length&&yt[1]=="type"?U+(_t+"="+he+"&"):U+(_t+"=redacted&")}}else U=null;else U=D;return"XMLHTTP REQ ("+f+") [attempt "+A+"]: "+l+`
`+d+`
`+U})}function tE(a,l,d,f,A,D,U){a.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+A+"]: "+l+`
`+d+`
`+D+" "+U})}function Mr(a,l,d,f){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+iE(a,d)+(f?" "+f:"")})}function nE(a,l){a.info(function(){return"TIMEOUT: "+l})}Gs.prototype.info=function(){};function iE(a,l){if(!a.g)return l;if(!l)return null;try{var d=JSON.parse(l);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var f=d[a];if(!(2>f.length)){var A=f[1];if(Array.isArray(A)&&!(1>A.length)){var D=A[0];if(D!="noop"&&D!="stop"&&D!="close")for(var U=1;U<A.length;U++)A[U]=""}}}}return Iu(d)}catch{return l}}var Ka={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Km={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bu;function Qa(){}N(Qa,Cu),Qa.prototype.g=function(){return new XMLHttpRequest},Qa.prototype.i=function(){return{}},bu=new Qa;function Pi(a,l,d,f){this.j=a,this.i=l,this.l=d,this.R=f||1,this.U=new qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qm}function Qm(){this.i=null,this.g="",this.h=!1}var Ym={},Su={};function Au(a,l,d){a.L=1,a.v=Za(ri(l)),a.m=d,a.P=!0,Jm(a,null)}function Jm(a,l){a.F=Date.now(),Ya(a),a.A=ri(a.v);var d=a.A,f=a.R;Array.isArray(f)||(f=[String(f)]),hg(d.i,"t",f),a.C=0,d=a.j.J,a.h=new Qm,a.g=Pg(a.j,d?l:null,!a.m),0<a.O&&(a.M=new JC(g(a.Y,a,a.g),a.O)),l=a.U,d=a.g,f=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(Bm[0]=A.toString()),A=Bm);for(var D=0;D<A.length;D++){var U=Nm(d,A[D],f||l.handleEvent,!1,l.h||l);if(!U)break;l.g[U.key]=U}l=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),Hs(),eE(a.i,a.u,a.A,a.l,a.R,a.m)}Pi.prototype.ca=function(a){a=a.target;let l=this.M;l&&si(a)==3?l.j():this.Y(a)},Pi.prototype.Y=function(a){try{if(a==this.g)e:{let yt=si(this.g);var l=this.g.Ba();let Fr=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||yg(this.g)))){this.J||yt!=4||l==7||(l==8||0>=Fr?Hs(3):Hs(2)),Ru(this);var d=this.g.Z();this.X=d;t:if(Xm(this)){var f=yg(this.g);a="";var A=f.length,D=si(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rr(this),Ks(this);var U="";break t}this.h.i=new c.TextDecoder}for(l=0;l<A;l++)this.h.h=!0,a+=this.h.i.decode(f[l],{stream:!(D&&l==A-1)});f.length=0,this.h.g+=a,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=d==200,tE(this.i,this.u,this.A,this.l,this.R,yt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,lt=this.g;if((Ae=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ie(Ae)){var he=Ae;break t}}he=null}if(d=he)Mr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pu(this,d);else{this.o=!1,this.s=3,At(12),rr(this),Ks(this);break e}}if(this.P){d=!0;let In;for(;!this.J&&this.C<U.length;)if(In=rE(this,U),In==Su){yt==4&&(this.s=4,At(14),d=!1),Mr(this.i,this.l,null,"[Incomplete Response]");break}else if(In==Ym){this.s=4,At(15),Mr(this.i,this.l,U,"[Invalid Chunk]"),d=!1;break}else Mr(this.i,this.l,In,null),Pu(this,In);if(Xm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||U.length!=0||this.h.h||(this.s=1,At(16),d=!1),this.o=this.o&&d,!d)Mr(this.i,this.l,U,"[Invalid Chunked Response]"),rr(this),Ks(this);else if(0<U.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Mu(_t),_t.M=!0,At(11))}}else Mr(this.i,this.l,U,null),Pu(this,U);yt==4&&rr(this),this.o&&!this.J&&(yt==4?bg(this.j,this):(this.o=!1,Ya(this)))}else IE(this.g),d==400&&0<U.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),rr(this),Ks(this)}}}catch{}finally{}};function Xm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function rE(a,l){var d=a.C,f=l.indexOf(`
`,d);return f==-1?Su:(d=Number(l.substring(d,f)),isNaN(d)?Ym:(f+=1,f+d>l.length?Su:(l=l.slice(f,f+d),a.C=f+d,l)))}Pi.prototype.cancel=function(){this.J=!0,rr(this)};function Ya(a){a.S=Date.now()+a.I,Zm(a,a.I)}function Zm(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=zs(g(a.ba,a),l)}function Ru(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Pi.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(nE(this.i,this.A),this.L!=2&&(Hs(),At(17)),rr(this),this.s=2,Ks(this)):Zm(this,this.S-a)};function Ks(a){a.j.G==0||a.J||bg(a.j,a)}function rr(a){Ru(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,jm(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function Pu(a,l){try{var d=a.j;if(d.G!=0&&(d.g==a||Du(d.h,a))){if(!a.K&&Du(d.h,a)&&d.G==3){try{var f=d.Da.g.parse(l)}catch{f=null}if(Array.isArray(f)&&f.length==3){var A=f;if(A[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)rc(d),nc(d);else break e;ku(d),At(18)}}else d.za=A[1],0<d.za-d.T&&37500>A[2]&&d.F&&d.v==0&&!d.C&&(d.C=zs(g(d.Za,d),6e3));if(1>=ng(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else or(d,11)}else if((a.K||d.g==a)&&rc(d),!Ie(l))for(A=d.Da.g.parse(l),l=0;l<A.length;l++){let he=A[l];if(d.T=he[0],he=he[1],d.G==2)if(he[0]=="c"){d.K=he[1],d.ia=he[2];let _t=he[3];_t!=null&&(d.la=_t,d.j.info("VER="+d.la));let yt=he[4];yt!=null&&(d.Aa=yt,d.j.info("SVER="+d.Aa));let Fr=he[5];Fr!=null&&typeof Fr=="number"&&0<Fr&&(f=1.5*Fr,d.L=f,d.j.info("backChannelRequestTimeoutMs_="+f)),f=d;let In=a.g;if(In){let oc=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oc){var D=f.h;D.g||oc.indexOf("spdy")==-1&&oc.indexOf("quic")==-1&&oc.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(xu(D,D.h),D.h=null))}if(f.D){let Lu=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;Lu&&(f.ya=Lu,Le(f.I,f.D,Lu))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),f=d;var U=a;if(f.qa=Rg(f,f.J?f.ia:null,f.W),U.K){ig(f.h,U);var Ae=U,lt=f.L;lt&&(Ae.I=lt),Ae.B&&(Ru(Ae),Ya(Ae)),f.g=U}else Eg(f);0<d.i.length&&ic(d)}else he[0]!="stop"&&he[0]!="close"||or(d,7);else d.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?or(d,7):Nu(d):he[0]!="noop"&&d.l&&d.l.ta(he),d.v=0)}}Hs(4)}catch{}}var sE=class{constructor(a,l){this.g=a,this.map=l}};function eg(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ng(a){return a.h?1:a.g?a.g.size:0}function Du(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function xu(a,l){a.g?a.g.add(l):a.h=l}function ig(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}eg.prototype.cancel=function(){if(this.i=rg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function rg(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let d of a.g.values())l=l.concat(d.D);return l}return $(a.i)}function oE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],d=a.length,f=0;f<d;f++)l.push(a[f]);return l}l=[],d=0;for(f in a)l[d++]=a[f];return l}function aE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var d=0;d<a;d++)l.push(d);return l}l=[],d=0;for(let f in a)l[d++]=f;return l}}}function sg(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var d=aE(a),f=oE(a),A=f.length,D=0;D<A;D++)l.call(void 0,f[D],d&&d[D],a)}var og=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cE(a,l){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var f=a[d].indexOf("="),A=null;if(0<=f){var D=a[d].substring(0,f);A=a[d].substring(f+1)}else D=a[d];l(D,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function sr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof sr){this.h=a.h,Ja(this,a.j),this.o=a.o,this.g=a.g,Xa(this,a.s),this.l=a.l;var l=a.i,d=new Js;d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),ag(this,d),this.m=a.m}else a&&(l=String(a).match(og))?(this.h=!1,Ja(this,l[1]||"",!0),this.o=Qs(l[2]||""),this.g=Qs(l[3]||"",!0),Xa(this,l[4]),this.l=Qs(l[5]||"",!0),ag(this,l[6]||"",!0),this.m=Qs(l[7]||"")):(this.h=!1,this.i=new Js(null,this.h))}sr.prototype.toString=function(){var a=[],l=this.j;l&&a.push(Ys(l,cg,!0),":");var d=this.g;return(d||l=="file")&&(a.push("//"),(l=this.o)&&a.push(Ys(l,cg,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Ys(d,d.charAt(0)=="/"?hE:uE,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Ys(d,fE)),a.join("")};function ri(a){return new sr(a)}function Ja(a,l,d){a.j=d?Qs(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function Xa(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function ag(a,l,d){l instanceof Js?(a.i=l,pE(a.i,a.h)):(d||(l=Ys(l,dE)),a.i=new Js(l,a.h))}function Le(a,l,d){a.i.set(l,d)}function Za(a){return Le(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Qs(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ys(a,l,d){return typeof a=="string"?(a=encodeURI(a).replace(l,lE),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function lE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var cg=/[#\/\?@]/g,uE=/[#\?:]/g,hE=/[#\?]/g,dE=/[#\?@]/g,fE=/#/g;function Js(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function Di(a){a.g||(a.g=new Map,a.h=0,a.i&&cE(a.i,function(l,d){a.add(decodeURIComponent(l.replace(/\+/g," ")),d)}))}n=Js.prototype,n.add=function(a,l){Di(this),this.i=null,a=Lr(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(l),this.h+=1,this};function lg(a,l){Di(a),l=Lr(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function ug(a,l){return Di(a),l=Lr(a,l),a.g.has(l)}n.forEach=function(a,l){Di(this),this.g.forEach(function(d,f){d.forEach(function(A){a.call(l,A,f,this)},this)},this)},n.na=function(){Di(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),d=[];for(let f=0;f<l.length;f++){let A=a[f];for(let D=0;D<A.length;D++)d.push(l[f])}return d},n.V=function(a){Di(this);let l=[];if(typeof a=="string")ug(this,a)&&(l=l.concat(this.g.get(Lr(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)l=l.concat(a[d])}return l},n.set=function(a,l){return Di(this),this.i=null,a=Lr(this,a),ug(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function hg(a,l,d){lg(a,l),0<d.length&&(a.i=null,a.g.set(Lr(a,l),$(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var d=0;d<l.length;d++){var f=l[d];let D=encodeURIComponent(String(f)),U=this.V(f);for(f=0;f<U.length;f++){var A=D;U[f]!==""&&(A+="="+encodeURIComponent(String(U[f]))),a.push(A)}}return this.i=a.join("&")};function Lr(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function pE(a,l){l&&!a.j&&(Di(a),a.i=null,a.g.forEach(function(d,f){var A=f.toLowerCase();f!=A&&(lg(this,f),hg(this,A,d))},a)),a.j=l}function mE(a,l){let d=new Gs;if(c.Image){let f=new Image;f.onload=x(xi,d,"TestLoadImage: loaded",!0,l,f),f.onerror=x(xi,d,"TestLoadImage: error",!1,l,f),f.onabort=x(xi,d,"TestLoadImage: abort",!1,l,f),f.ontimeout=x(xi,d,"TestLoadImage: timeout",!1,l,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=a}else l(!1)}function gE(a,l){let d=new Gs,f=new AbortController,A=setTimeout(()=>{f.abort(),xi(d,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:f.signal}).then(D=>{clearTimeout(A),D.ok?xi(d,"TestPingServer: ok",!0,l):xi(d,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(A),xi(d,"TestPingServer: error",!1,l)})}function xi(a,l,d,f,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),f(d)}catch{}}function _E(){this.g=new ZC}function yE(a,l,d){let f=d||"";try{sg(a,function(A,D){let U=A;h(A)&&(U=Iu(A)),l.push(f+D+"="+encodeURIComponent(U))})}catch(A){throw l.push(f+"type="+encodeURIComponent("_badmap")),A}}function Xs(a){this.l=a.Ub||null,this.j=a.eb||!1}N(Xs,Cu),Xs.prototype.g=function(){return new ec(this.l,this.j)},Xs.prototype.i=function(a){return function(){return a}}({});function ec(a,l){gt.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(ec,gt),n=ec.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,eo(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zs(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,eo(this)),this.g&&(this.readyState=3,eo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function dg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?Zs(this):eo(this),this.readyState==3&&dg(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Zs(this))},n.Qa=function(a){this.g&&(this.response=a,Zs(this))},n.ga=function(){this.g&&Zs(this)};function Zs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,eo(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var d=l.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=l.next();return a.join(`\r
`)};function eo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ec.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function fg(a){let l="";return nt(a,function(d,f){l+=f,l+=":",l+=d,l+=`\r
`}),l}function Ou(a,l,d){e:{for(f in d){var f=!1;break e}f=!0}f||(d=fg(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Le(a,l,d))}function Be(a){gt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Be,gt);var vE=/^https?$/i,wE=["POST","PUT"];n=Be.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,d,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bu.g(),this.v=this.o?$m(this.o):$m(bu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(D){pg(this,D);return}if(a=d||"",d=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var A in f)d.set(A,f[A]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let D of f.keys())d.set(D,f.get(D));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(wE,l,void 0))||f||A||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,U]of d)this.g.setRequestHeader(D,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_g(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){pg(this,D)}};function pg(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,mg(a),tc(a)}function mg(a){a.A||(a.A=!0,St(a,"complete"),St(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,St(this,"complete"),St(this,"abort"),tc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tc(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?gg(this):this.bb())},n.bb=function(){gg(this)};function gg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||si(a)!=4||a.Z()!=2)){if(a.u&&si(a)==4)Fm(a.Ea,0,a);else if(St(a,"readystatechange"),si(a)==4){a.h=!1;try{let U=a.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var d;if(!(d=l)){var f;if(f=U===0){var A=String(a.D).match(og)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),f=!vE.test(A?A.toLowerCase():"")}d=f}if(d)St(a,"complete"),St(a,"success");else{a.m=6;try{var D=2<si(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",mg(a)}}finally{tc(a)}}}}function tc(a,l){if(a.g){_g(a);let d=a.g,f=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||St(a,"ready");try{d.onreadystatechange=f}catch{}}}function _g(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function si(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<si(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),XC(l)}};function yg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function IE(a){let l={};a=(a.g&&2<=si(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<a.length;f++){if(Ie(a[f]))continue;var d=b(a[f]);let A=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let D=l[A]||[];l[A]=D,D.push(d)}S(l,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function to(a,l,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||l}function vg(a){this.Aa=0,this.i=[],this.j=new Gs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=to("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=to("baseRetryDelayMs",5e3,a),this.cb=to("retryDelaySeedMs",1e4,a),this.Wa=to("forwardChannelMaxRetries",2,a),this.wa=to("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new eg(a&&a.concurrentRequestLimit),this.Da=new _E,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=vg.prototype,n.la=8,n.G=1,n.connect=function(a,l,d,f){At(0),this.W=a,this.H=l||{},d&&f!==void 0&&(this.H.OSID=d,this.H.OAID=f),this.F=this.X,this.I=Rg(this,null,this.W),ic(this)};function Nu(a){if(wg(a),a.G==3){var l=a.U++,d=ri(a.I);if(Le(d,"SID",a.K),Le(d,"RID",l),Le(d,"TYPE","terminate"),no(a,d),l=new Pi(a,a.j,l),l.L=2,l.v=Za(ri(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=l.v,d=!0),d||(l.g=Pg(l.j,null),l.g.ea(l.v)),l.F=Date.now(),Ya(l)}Ag(a)}function nc(a){a.g&&(Mu(a),a.g.cancel(),a.g=null)}function wg(a){nc(a),a.u&&(c.clearTimeout(a.u),a.u=null),rc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function ic(a){if(!tg(a.h)&&!a.s){a.s=!0;var l=a.Ga;Us||Om(),Bs||(Us(),Bs=!0),du.add(l,a),a.B=0}}function CE(a,l){return ng(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=zs(g(a.Ga,a,l),Sg(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new Pi(this,this.j,a),D=this.o;if(this.S&&(D?(D=v(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(A.H=D,D=null),this.P)e:{for(var l=0,d=0;d<this.i.length;d++){t:{var f=this.i[d];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(l+=f,4096<l){l=d;break e}if(l===4096||d===this.i.length-1){l=d+1;break e}}l=1e3}else l=1e3;l=Cg(this,A,l),d=ri(this.I),Le(d,"RID",a),Le(d,"CVER",22),this.D&&Le(d,"X-HTTP-Session-Id",this.D),no(this,d),D&&(this.O?l="headers="+encodeURIComponent(String(fg(D)))+"&"+l:this.m&&Ou(d,this.m,D)),xu(this.h,A),this.Ua&&Le(d,"TYPE","init"),this.P?(Le(d,"$req",l),Le(d,"SID","null"),A.T=!0,Au(A,d,null)):Au(A,d,l),this.G=2}}else this.G==3&&(a?Ig(this,a):this.i.length==0||tg(this.h)||Ig(this))};function Ig(a,l){var d;l?d=l.l:d=a.U++;let f=ri(a.I);Le(f,"SID",a.K),Le(f,"RID",d),Le(f,"AID",a.T),no(a,f),a.m&&a.o&&Ou(f,a.m,a.o),d=new Pi(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),l&&(a.i=l.D.concat(a.i)),l=Cg(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),xu(a.h,d),Au(d,f,l)}function no(a,l){a.H&&nt(a.H,function(d,f){Le(l,f,d)}),a.l&&sg({},function(d,f){Le(l,f,d)})}function Cg(a,l,d){d=Math.min(a.i.length,d);var f=a.l?g(a.l.Na,a.l,a):null;e:{var A=a.i;let D=-1;for(;;){let U=["count="+d];D==-1?0<d?(D=A[0].g,U.push("ofs="+D)):D=0:U.push("ofs="+D);let Ae=!0;for(let lt=0;lt<d;lt++){let he=A[lt].g,_t=A[lt].map;if(he-=D,0>he)D=Math.max(0,A[lt].g-100),Ae=!1;else try{yE(_t,U,"req"+he+"_")}catch{f&&f(_t)}}if(Ae){f=U.join("&");break e}}}return a=a.i.splice(0,d),l.D=a,f}function Eg(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;Us||Om(),Bs||(Us(),Bs=!0),du.add(l,a),a.v=0}}function ku(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=zs(g(a.Fa,a),Sg(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Tg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=zs(g(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),nc(this),Tg(this))};function Mu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Tg(a){a.g=new Pi(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=ri(a.qa);Le(l,"RID","rpc"),Le(l,"SID",a.K),Le(l,"AID",a.T),Le(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&Le(l,"TO",a.ja),Le(l,"TYPE","xmlhttp"),no(a,l),a.m&&a.o&&Ou(l,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Za(ri(l)),d.m=null,d.P=!0,Jm(d,a)}n.Za=function(){this.C!=null&&(this.C=null,nc(this),ku(this),At(19))};function rc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function bg(a,l){var d=null;if(a.g==l){rc(a),Mu(a),a.g=null;var f=2}else if(Du(a.h,l))d=l.D,ig(a.h,l),f=1;else return;if(a.G!=0){if(l.o)if(f==1){d=l.m?l.m.length:0,l=Date.now()-l.F;var A=a.B;f=Ga(),St(f,new Gm(f,d)),ic(a)}else Eg(a);else if(A=l.s,A==3||A==0&&0<l.X||!(f==1&&CE(a,l)||f==2&&ku(a)))switch(d&&0<d.length&&(l=a.h,l.i=l.i.concat(d)),A){case 1:or(a,5);break;case 4:or(a,10);break;case 3:or(a,6);break;default:or(a,2)}}}function Sg(a,l){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*l}function or(a,l){if(a.j.info("Error code "+l),l==2){var d=g(a.fb,a),f=a.Xa;let A=!f;f=new sr(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ja(f,"https"),Za(f),A?mE(f.toString(),d):gE(f.toString(),d)}else At(2);a.G=0,a.l&&a.l.sa(l),Ag(a),wg(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Ag(a){if(a.G=0,a.ka=[],a.l){let l=rg(a.h);(l.length!=0||a.i.length!=0)&&(W(a.ka,l),W(a.ka,a.i),a.h.i.length=0,$(a.i),a.i.length=0),a.l.ra()}}function Rg(a,l,d){var f=d instanceof sr?ri(d):new sr(d);if(f.g!="")l&&(f.g=l+"."+f.g),Xa(f,f.s);else{var A=c.location;f=A.protocol,l=l?l+"."+A.hostname:A.hostname,A=+A.port;var D=new sr(null);f&&Ja(D,f),l&&(D.g=l),A&&Xa(D,A),d&&(D.l=d),f=D}return d=a.D,l=a.ya,d&&l&&Le(f,d,l),Le(f,"VER",a.la),no(a,f),f}function Pg(a,l,d){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new Be(new Xs({eb:d})):new Be(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dg(){}n=Dg.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function sc(){}sc.prototype.g=function(a,l){return new Ht(a,l)};function Ht(a,l){gt.call(this),this.g=new vg(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!Ie(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!Ie(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Vr(this)}N(Ht,gt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Nu(this.g)},Ht.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Iu(a),a=d);l.i.push(new sE(l.Ya++,a)),l.G==3&&ic(l)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Nu(this.g),delete this.g,Ht.aa.N.call(this)};function xg(a){Eu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let d in l){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}N(xg,Eu);function Og(){Tu.call(this),this.status=1}N(Og,Tu);function Vr(a){this.g=a}N(Vr,Dg),Vr.prototype.ua=function(){St(this.g,"a")},Vr.prototype.ta=function(a){St(this.g,new xg(a))},Vr.prototype.sa=function(a){St(this.g,new Og)},Vr.prototype.ra=function(){St(this.g,"b")},sc.prototype.createWebChannel=sc.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,fC=bi.createWebChannelTransport=function(){return new sc},dC=bi.getStatEventTarget=function(){return Ga()},hC=bi.Event=ir,uC=bi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ka.NO_ERROR=0,Ka.TIMEOUT=8,Ka.HTTP_ERROR=6,lC=bi.ErrorCode=Ka,Km.COMPLETE="complete",cC=bi.EventType=Km,qm.EventType=Ws,Ws.OPEN="a",Ws.CLOSE="b",Ws.ERROR="c",Ws.MESSAGE="d",gt.prototype.listen=gt.prototype.K,aC=bi.WebChannel=qm,oC=bi.FetchXmlHttpFactory=Xs,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,sC=bi.XhrIo=Be}).apply(typeof ru<"u"?ru:typeof self<"u"?self:typeof window<"u"?window:{});var pC="@firebase/firestore";var ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");var ja="10.12.3";var ks=new $n("@firebase/firestore");function tn(n,...e){if(ks.logLevel<=le.DEBUG){let t=e.map(wm);ks.debug(`Firestore (${ja}): ${n}`,...t)}}function vm(n,...e){if(ks.logLevel<=le.ERROR){let t=e.map(wm);ks.error(`Firestore (${ja}): ${n}`,...t)}}function wk(n,...e){if(ks.logLevel<=le.WARN){let t=e.map(wm);ks.warn(`Firestore (${ja}): ${n}`,...t)}}function wm(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Wt(n="Unexpected state"){let e=`FIRESTORE (${ja}) INTERNAL ASSERTION FAILED: `+n;throw vm(e),new Error(e)}function Ba(n,e){n||Wt()}var pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},tt=class extends Ot{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var su=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},tm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ct.UNAUTHENTICATED))}shutdown(){}},nm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},im=class{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i,r=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve(),s=new nr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nr,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>C(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},c=u=>{tn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(tn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(tn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ba(typeof i.accessToken=="string"),new su(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ba(e===null||typeof e=="string"),new ct(e)}},rm=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},sm=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new rm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}},om=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},am=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let i=s=>{s.error!=null&&tn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,tn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{tn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):tn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ba(typeof t.token=="string"),this.R=t.token,new om(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Ik(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var cm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=Ik(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function vC(n,e){return n<e?-1:n>e?1:0}var lm=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Wt(),i===void 0?i=e.length-t:i>e.length-t&&Wt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},tr=class n extends lm{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new tt(pt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}};var kr=class n{constructor(e){this.path=e}static fromPath(e){return new n(tr.fromString(e))}static fromName(e){return new n(tr.fromString(e).popFirst(5))}static empty(){return new n(tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new tr(e.slice()))}};var um=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};um.UNKNOWN_ID=-1;function wC(n){return n.name==="IndexedDbTransactionError"}function Ck(n){return n===0&&1/n==-1/0}var Ek=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],S6=[...Ek,"documentOverlays"],Tk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bk=Tk,A6=[...bk,"indexConfiguration","indexState","indexEntries"];var Ms=class n{constructor(e,t){this.comparator=e,this.root=t||ti.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ti.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ns(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ns(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ns(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ns(this.root,e,this.comparator,!0)}},Ns=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ti=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Wt();let e=this.left.check();if(e!==this.right.check())throw Wt();return e+(this.isRed()?0:1)}};ti.EMPTY=null,ti.RED=!0,ti.BLACK=!1;ti.EMPTY=new class{constructor(){this.size=0}get key(){throw Wt()}get value(){throw Wt()}get color(){throw Wt()}get left(){throw Wt()}get right(){throw Wt()}copy(e,t,i,r,s){return this}insert(e,t,i){return new ti(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ou=class n{constructor(e){this.comparator=e,this.data=new Ms(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new au(this.data.getIterator())}getIteratorFrom(e){return new au(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},au=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var hm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ls=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hm("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vC(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ls.EMPTY_BYTE_STRING=new Ls("");var Sk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ak(n){if(Ba(!!n),typeof n=="string"){let e=0,t=Sk.exec(n);if(Ba(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:cu(n.seconds),nanos:cu(n.nanos)}}function cu(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Rk(n){return typeof n=="string"?Ls.fromBase64String(n):Ls.fromUint8Array(n)}var dm=class{constructor(e,t,i,r,s,o,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}},fm=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function Pk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var P6=new Ms(kr.comparator);var D6=new Ms(kr.comparator);var x6=new Ms(kr.comparator),O6=new ou(kr.comparator);var N6=new ou(vC);var mC,ae;(ae=mC||(mC={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";var k6=new Zp([4294967295,4294967295],0);var lu=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(cu(e.integerValue));else if("doubleValue"in e){let i=cu(e.doubleValue);isNaN(i)?this.Et(t,13):(this.Et(t,15),Ck(i)?t.dt(0):t.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(t,20),typeof i=="string"&&(i=Ak(i)),t.At(`${i.seconds||""}`),t.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Rk(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?Pk(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Wt()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let i=e.fields||{};this.Et(t,55);for(let r of Object.keys(i))this.Rt(r,t),this.It(i[r],t)}wt(e,t){let i=e.values||[];this.Et(t,50);for(let r of i)this.It(r,t)}gt(e,t){this.Et(t,37),kr.fromName(e).path.forEach(i=>{this.Et(t,60),this.St(i,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};lu.bt=new lu;var M6=new Uint8Array(0);var ei=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ei.DEFAULT_COLLECTION_PERCENTILE=10,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ei.DEFAULT=new ei(41943040,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ei.DISABLED=new ei(-1,0,0);function em(){return typeof document<"u"?document:null}var pm=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=i,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-i);r>0&&tn("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var mm=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,c=new n(e,t,o,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Dk(n,e){if(vm("AsyncQueue",`${e}: ${n}`),wC(n))return new tt(pt.UNAVAILABLE,`${e}: ${n}`);throw n}var gC,_C;(_C=gC||(gC={})).J_="default",_C.Cache="cache";var gm=class{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=ct.UNAUTHENTICATED,this.clientId=cm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>C(this,null,function*(){tn("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(tn("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new tt(pt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=Dk(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function IC(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var yC=new Map;function xk(n,e,t,i){if(e===!0&&i===!0)throw new tt(pt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ok(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Wt()}function Nk(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new tt(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ok(n);throw new tt(pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var uu=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new tt(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new tt(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new tt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new tt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new tt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},hu=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new tt(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new tt(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uu(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new tm;switch(i.type){case"firstParty":return new sm(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new tt(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=yC.get(t);i&&(tn("ComponentProvider","Removing Datastore"),yC.delete(t),i.terminate())}(this),Promise.resolve()}};function CC(n,e,t,i={}){var r;let s=(n=Nk(n,hu))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&wk("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=ct.MOCK_USER;else{c=ts(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new tt(pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ct(h)}n._authCredentials=new nm(new su(c,u))}}var _m=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new pm(this,"async_queue_retry"),this.hu=()=>{let t=em();t&&tn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};let e=em();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=em();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new nr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return C(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!wC(e))throw e;tn("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw vm("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=t,t}enqueueAfterDelay(e,t,i){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let r=mm.createAndSchedule(this,e,t,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&Wt()}verifyOperationInProgress(){}du(){return C(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}};var ym=class extends hu{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new _m}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||kk(this),this._firestoreClient.terminate()}};function EC(n,e){let t=typeof n=="object"?n:Wn(),i=typeof n=="string"?n:e||"(default)",r=pi(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=es("firestore");s&&CC(r,...s)}return r}function kk(n){var e,t,i;let r=n._freezeSettings(),s=function(c,u,h,p){return new dm(c,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,IC(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new gm(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var L6=new RegExp("[~\\*/\\[\\]]");(function(e,t=!0){(function(r){ja=r})(ln),cn(new Ct("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new ym(new im(i.getProvider("auth-internal")),new am(i.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new tt(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fm(h.options.projectId,p)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),ge(pC,"4.6.4",e),ge(pC,"4.6.4","esm2017")})();var $a=class{constructor(e){return e}},TC="firestore",Im=class{constructor(){return gi(TC)}};var Cm=new Ce("angularfire2.firestore-instances");function Mk(n,e){let t=Ki(TC,n,e);return t&&new $a(t)}function Lk(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new $a(i)}}var Vk={provide:Im,deps:[[new Fe,Cm]]},Fk={provide:$a,useFactory:Mk,deps:[[new Fe,Cm],Xt]};function bC(n,...e){return ge("angularfire",Nn.full,"fst"),Pt([Fk,Vk,{provide:Cm,useFactory:Lk(n),multi:!0,deps:[xe,zt,Qn,kn,[new Fe,Ci],[new Fe,Kn],...e]}])}var SC=at(EC,!0);var OC="firebasestorage.googleapis.com",Uk="storageBucket",Bk=2*60*1e3,jk=10*60*1e3;var ni=class n extends Ot{constructor(e,t,i=0){super(Em(e),`Firebase Storage: ${t} (${Em(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Em(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ai=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Ai||{});function Em(n){return"storage/"+n}function $k(){let n="An unknown error occurred, please check the error payload for server response.";return new ni(Ai.UNKNOWN,n)}function qk(){return new ni(Ai.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Wk(){return new ni(Ai.CANCELED,"User canceled the upload/download.")}function Hk(n){return new ni(Ai.INVALID_URL,"Invalid URL '"+n+"'.")}function zk(n){return new ni(Ai.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function AC(n){return new ni(Ai.INVALID_ARGUMENT,n)}function NC(){return new ni(Ai.APP_DELETED,"The Firebase app was deleted.")}function Gk(n){return new ni(Ai.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Si=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(i.path==="")return i;throw zk(e)}static makeFromUrl(e,t){let i=null,r="([A-Za-z0-9.\\-_]+)";function s(Me){Me.path.charAt(Me.path.length-1)==="/"&&(Me.path_=Me.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+r+o,"i"),u={bucket:1,path:3};function h(Me){Me.path_=decodeURIComponent(Me.path)}let p="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",x=new RegExp(`^https?://${m}/${p}/b/${r}/o${g}`,"i"),N={bucket:1,path:3},$=t===OC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,W="([^?#]*)",we=new RegExp(`^https?://${$}/${r}/${W}`,"i"),ue=[{regex:c,indices:u,postModify:s},{regex:x,indices:N,postModify:h},{regex:we,indices:{bucket:1,path:2},postModify:h}];for(let Me=0;Me<ue.length;Me++){let nn=ue[Me],nt=nn.regex.exec(e);if(nt){let S=nt[nn.indices.bucket],v=nt[nn.indices.path];v||(v=""),i=new n(S,v),nn.postModify(i);break}}if(i==null)throw Hk(e);return i}},Tm=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Kk(n,e,t){let i=1,r=null,s=null,o=!1,c=0;function u(){return c===2}let h=!1;function p(...W){h||(h=!0,e.apply(null,W))}function m(W){r=setTimeout(()=>{r=null,n(x,u())},W)}function g(){s&&clearTimeout(s)}function x(W,...we){if(h){g();return}if(W){g(),p.call(null,W,...we);return}if(u()||o){g(),p.call(null,W,...we);return}i<64&&(i*=2);let ue;c===1?(c=2,ue=0):ue=(i+Math.random())*1e3,m(ue)}let N=!1;function $(W){N||(N=!0,g(),!h&&(r!==null?(W||(c=2),clearTimeout(r),m(0)):W||(c=1)))}return m(0),s=setTimeout(()=>{o=!0,$(!0)},t),$}function Qk(n){n(!1)}function Yk(n){return n!==void 0}function RC(n,e,t,i){if(i<e)throw AC(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw AC(`Invalid value for '${n}'. Expected ${t} or less.`)}function Jk(n){let e=encodeURIComponent,t="?";for(let i in n)if(n.hasOwnProperty(i)){let r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}var bm=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(bm||{});function Xk(n,e){let t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||r||s}var Sm=class{constructor(e,t,i,r,s,o,c,u,h,p,m,g=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,N)=>{this.resolve_=x,this.reject_=N,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new Vs(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let u=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===bm.NO_ERROR,u=s.getStatus();if(!c||Xk(u,this.additionalRetryCodes_)&&this.retry){let p=s.getErrorCode()===bm.ABORT;i(!1,new Vs(!1,null,p));return}let h=this.successCodes_.indexOf(u)!==-1;i(!0,new Vs(h,s))})},t=(i,r)=>{let s=this.resolve_,o=this.reject_,c=r.connection;if(r.wasSuccessCode)try{let u=this.callback_(c,c.getResponse());Yk(u)?s(u):s()}catch(u){o(u)}else if(c!==null){let u=$k();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(r.canceled){let u=this.appDelete_?NC():Wk();o(u)}else{let u=qk();o(u)}};this.canceled_?t(!1,new Vs(!1,null,!0)):this.backoffId_=Kk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Qk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Vs=class{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}};function Zk(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function eM(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tM(n,e){e&&(n["X-Firebase-GMPID"]=e)}function nM(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function iM(n,e,t,i,r,s,o=!0){let c=Jk(n.urlParams),u=n.url+c,h=Object.assign({},n.headers);return tM(h,e),Zk(h,t),eM(h,s),nM(h,i),new Sm(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}function rM(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function sM(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var hB=256*1024;var Am=class n{constructor(e,t){this._service=e,t instanceof Si?this._location=t:this._location=Si.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Si(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sM(this._location.path)}get storage(){return this._service}get parent(){let e=rM(this._location.path);if(e===null)return null;let t=new Si(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Gk(e)}};function PC(n,e){let t=e?.[Uk];return t==null?null:Si.makeFromBucketSpec(t,n)}function oM(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:r}=i;r&&(n._overrideAuthToken=typeof r=="string"?r:ts(r,n.app.options.projectId))}var Rm=class{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=OC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Bk,this._maxUploadRetryTime=jk,this._requests=new Set,r!=null?this._bucket=Si.makeFromBucketSpec(r,this._host):this._bucket=PC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Si.makeFromBucketSpec(this._url,e):this._bucket=PC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){RC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){RC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return C(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return C(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Am(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new Tm(NC());{let o=iM(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return C(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()})}},DC="@firebase/storage",xC="0.12.6";var kC="storage";function MC(n=Wn(),e){n=ze(n);let i=pi(n,kC).getImmediate({identifier:e}),r=es("storage");return r&&LC(i,...r),i}function LC(n,e,t,i={}){oM(n,e,t,i)}function aM(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Rm(t,i,r,e,ln)}function cM(){cn(new Ct(kC,aM,"PUBLIC").setMultipleInstances(!0)),ge(DC,xC,""),ge(DC,xC,"esm2017")}cM();var qa=class{constructor(e){return e}},VC="storage",Pm=class{constructor(){return gi(VC)}};var Dm=new Ce("angularfire2.storage-instances");function lM(n,e){let t=Ki(VC,n,e);return t&&new qa(t)}function uM(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new qa(i)}}var hM={provide:Pm,deps:[[new Fe,Dm]]},dM={provide:qa,useFactory:lM,deps:[[new Fe,Dm],Xt]};function FC(n,...e){return ge("angularfire",Nn.full,"gcs"),Pt([dM,hM,{provide:Dm,useFactory:uM(n),multi:!0,deps:[xe,zt,Qn,kn,[new Fe,Ci],[new Fe,Kn],...e]}])}var UC=at(MC,!0);var BC={production:!1,firebase:{databaseURL:"https://travel-forum-50393-default-rtdb.europe-west1.firebasedatabase.app/",apiKey:"AIzaSyATJQgVC77bSh0CrQCTtU200eOoKT-W2rQ",authDomain:"travel-forum-50393.firebaseapp.com",projectId:"travel-forum-50393",storageBucket:"travel-forum-50393.appspot.com",messagingSenderId:"625161962223",appId:"1:625161962223:web:086741e1a8ef000879111a"}};var fM="@",pM=(()=>{let e=class e{constructor(i,r,s,o,c){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=Q(e_,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-Y2XX3PF6.js").then(r=>r)).catch(r=>{throw new Ve(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new xm(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let u=c.createRenderer(i,r);o.use(u),this.scheduler?.notify(9)}).catch(c=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){Ju()},e.\u0275prov=X({token:e,factory:e.\u0275fac});let n=e;return n})(),xm=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(fM)}};function jC(n="animations"){return t_("NgAsyncAnimations"),Pt([{provide:uc,useFactory:(e,t,i)=>new pM(e,t,i,n),deps:[Ue,gc,xe]},{provide:Jg,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var $C={providers:[u_({eventCoalescing:!0}),uy(tC),T0(()=>b0(BC.firebase)),Cw(()=>bw()),Pw(()=>Dw()),bC(()=>SC()),FC(()=>UC()),_n,ke,jC()]};A_(Uw,$C).catch(n=>console.error(n));
